import{_ as an,j as de}from"./mantine-vendor-ReIrNrBv.js";import{a as ge}from"./react-vendor-Bw01Nb_K.js";import{R as na,S as Rn,Q as mr,V as ke,O as Mn,M as yt,T as bt,a as ze,P as Dn,b as ra,c as aa,I as Or,F as Bn,d as In,e as wt,W as oa,B as on,f as Vn,g as Fr,U as Gn,h as gr,i as nn,j as dt,L as ia,k as Rr,l as sa,C as _t,m as la,n as fa,o as ca,p as ua,q as da,D as Hn,r as ha,s as pa,t as yr,u as va,v as jn,w as ma,x as ga,y as ya,z as nt,A as sn,E as ba,G as Sa}from"./three-vendor-BqLJfxQd.js";const Br=parseInt(na.replace(/\D+/g,"")),Ir=Br>=125?"uv1":"uv2";var wa=Object.defineProperty,xa=(c,n,d)=>n in c?wa(c,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[n]=d,_a=(c,n,d)=>(xa(c,n+"",d),d);class Ta{constructor(){_a(this,"_listeners")}addEventListener(n,d){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[n]===void 0&&(s[n]=[]),s[n].indexOf(d)===-1&&s[n].push(d)}hasEventListener(n,d){if(this._listeners===void 0)return!1;const s=this._listeners;return s[n]!==void 0&&s[n].indexOf(d)!==-1}removeEventListener(n,d){if(this._listeners===void 0)return;const t=this._listeners[n];if(t!==void 0){const e=t.indexOf(d);e!==-1&&t.splice(e,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const s=this._listeners[n.type];if(s!==void 0){n.target=this;const t=s.slice(0);for(let e=0,i=t.length;e<i;e++)t[e].call(this,n);n.target=null}}}var Ea=Object.defineProperty,Ua=(c,n,d)=>n in c?Ea(c,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[n]=d,ce=(c,n,d)=>(Ua(c,typeof n!="symbol"?n+"":n,d),d);const Jt=new ra,br=new aa,Aa=Math.cos(70*(Math.PI/180)),Sr=(c,n)=>(c%n+n)%n;let ka=class extends Ta{constructor(n,d){super(),ce(this,"object"),ce(this,"domElement"),ce(this,"enabled",!0),ce(this,"target",new ke),ce(this,"minDistance",0),ce(this,"maxDistance",1/0),ce(this,"minZoom",0),ce(this,"maxZoom",1/0),ce(this,"minPolarAngle",0),ce(this,"maxPolarAngle",Math.PI),ce(this,"minAzimuthAngle",-1/0),ce(this,"maxAzimuthAngle",1/0),ce(this,"enableDamping",!1),ce(this,"dampingFactor",.05),ce(this,"enableZoom",!0),ce(this,"zoomSpeed",1),ce(this,"enableRotate",!0),ce(this,"rotateSpeed",1),ce(this,"enablePan",!0),ce(this,"panSpeed",1),ce(this,"screenSpacePanning",!0),ce(this,"keyPanSpeed",7),ce(this,"zoomToCursor",!1),ce(this,"autoRotate",!1),ce(this,"autoRotateSpeed",2),ce(this,"reverseOrbit",!1),ce(this,"reverseHorizontalOrbit",!1),ce(this,"reverseVerticalOrbit",!1),ce(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ce(this,"mouseButtons",{LEFT:yt.ROTATE,MIDDLE:yt.DOLLY,RIGHT:yt.PAN}),ce(this,"touches",{ONE:bt.ROTATE,TWO:bt.DOLLY_PAN}),ce(this,"target0"),ce(this,"position0"),ce(this,"zoom0"),ce(this,"_domElementKeyEvents",null),ce(this,"getPolarAngle"),ce(this,"getAzimuthalAngle"),ce(this,"setPolarAngle"),ce(this,"setAzimuthalAngle"),ce(this,"getDistance"),ce(this,"getZoomScale"),ce(this,"listenToKeyEvents"),ce(this,"stopListenToKeyEvents"),ce(this,"saveState"),ce(this,"reset"),ce(this,"update"),ce(this,"connect"),ce(this,"dispose"),ce(this,"dollyIn"),ce(this,"dollyOut"),ce(this,"getScale"),ce(this,"setScale"),this.object=n,this.domElement=d,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>l.phi,this.getAzimuthalAngle=()=>l.theta,this.setPolarAngle=g=>{let C=Sr(g,2*Math.PI),ne=l.phi;ne<0&&(ne+=2*Math.PI),C<0&&(C+=2*Math.PI);let se=Math.abs(C-ne);2*Math.PI-se<se&&(C<ne?C+=2*Math.PI:ne+=2*Math.PI),f.phi=C-ne,s.update()},this.setAzimuthalAngle=g=>{let C=Sr(g,2*Math.PI),ne=l.theta;ne<0&&(ne+=2*Math.PI),C<0&&(C+=2*Math.PI);let se=Math.abs(C-ne);2*Math.PI-se<se&&(C<ne?C+=2*Math.PI:ne+=2*Math.PI),f.theta=C-ne,s.update()},this.getDistance=()=>s.object.position.distanceTo(s.target),this.listenToKeyEvents=g=>{g.addEventListener("keydown",X),this._domElementKeyEvents=g},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",X),this._domElementKeyEvents=null},this.saveState=()=>{s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=()=>{s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(t),s.update(),r=a.NONE},this.update=(()=>{const g=new ke,C=new ke(0,1,0),ne=new mr().setFromUnitVectors(n.up,C),se=ne.clone().invert(),me=new ke,Oe=new mr,We=2*Math.PI;return function(){const at=s.object.position;ne.setFromUnitVectors(n.up,C),se.copy(ne).invert(),g.copy(at).sub(s.target),g.applyQuaternion(ne),l.setFromVector3(g),s.autoRotate&&r===a.NONE&&D(T()),s.enableDamping?(l.theta+=f.theta*s.dampingFactor,l.phi+=f.phi*s.dampingFactor):(l.theta+=f.theta,l.phi+=f.phi);let xe=s.minAzimuthAngle,ye=s.maxAzimuthAngle;isFinite(xe)&&isFinite(ye)&&(xe<-Math.PI?xe+=We:xe>Math.PI&&(xe-=We),ye<-Math.PI?ye+=We:ye>Math.PI&&(ye-=We),xe<=ye?l.theta=Math.max(xe,Math.min(ye,l.theta)):l.theta=l.theta>(xe+ye)/2?Math.max(xe,l.theta):Math.min(ye,l.theta)),l.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,l.phi)),l.makeSafe(),s.enableDamping===!0?s.target.addScaledVector(p,s.dampingFactor):s.target.add(p),s.zoomToCursor&&N||s.object.isOrthographicCamera?l.radius=j(l.radius):l.radius=j(l.radius*u),g.setFromSpherical(l),g.applyQuaternion(se),at.copy(s.target).add(g),s.object.matrixAutoUpdate||s.object.updateMatrix(),s.object.lookAt(s.target),s.enableDamping===!0?(f.theta*=1-s.dampingFactor,f.phi*=1-s.dampingFactor,p.multiplyScalar(1-s.dampingFactor)):(f.set(0,0,0),p.set(0,0,0));let De=!1;if(s.zoomToCursor&&N){let Le=null;if(s.object instanceof Dn&&s.object.isPerspectiveCamera){const Ae=g.length();Le=j(Ae*u);const Pe=Ae-Le;s.object.position.addScaledVector(P,Pe),s.object.updateMatrixWorld()}else if(s.object.isOrthographicCamera){const Ae=new ke(U.x,U.y,0);Ae.unproject(s.object),s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/u)),s.object.updateProjectionMatrix(),De=!0;const Pe=new ke(U.x,U.y,0);Pe.unproject(s.object),s.object.position.sub(Pe).add(Ae),s.object.updateMatrixWorld(),Le=g.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;Le!==null&&(s.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(Le).add(s.object.position):(Jt.origin.copy(s.object.position),Jt.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(Jt.direction))<Aa?n.lookAt(s.target):(br.setFromNormalAndCoplanarPoint(s.object.up,s.target),Jt.intersectPlane(br,s.target))))}else s.object instanceof Mn&&s.object.isOrthographicCamera&&(De=u!==1,De&&(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/u)),s.object.updateProjectionMatrix()));return u=1,N=!1,De||me.distanceToSquared(s.object.position)>o||8*(1-Oe.dot(s.object.quaternion))>o?(s.dispatchEvent(t),me.copy(s.object.position),Oe.copy(s.object.quaternion),De=!1,!0):!1}})(),this.connect=g=>{s.domElement=g,s.domElement.style.touchAction="none",s.domElement.addEventListener("contextmenu",Ue),s.domElement.addEventListener("pointerdown",we),s.domElement.addEventListener("pointercancel",q),s.domElement.addEventListener("wheel",_e)},this.dispose=()=>{var g,C,ne,se,me,Oe;s.domElement&&(s.domElement.style.touchAction="auto"),(g=s.domElement)==null||g.removeEventListener("contextmenu",Ue),(C=s.domElement)==null||C.removeEventListener("pointerdown",we),(ne=s.domElement)==null||ne.removeEventListener("pointercancel",q),(se=s.domElement)==null||se.removeEventListener("wheel",_e),(me=s.domElement)==null||me.ownerDocument.removeEventListener("pointermove",Q),(Oe=s.domElement)==null||Oe.ownerDocument.removeEventListener("pointerup",q),s._domElementKeyEvents!==null&&s._domElementKeyEvents.removeEventListener("keydown",X)};const s=this,t={type:"change"},e={type:"start"},i={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=a.NONE;const o=1e-6,l=new Rn,f=new Rn;let u=1;const p=new ke,w=new ze,b=new ze,S=new ze,m=new ze,v=new ze,y=new ze,h=new ze,x=new ze,E=new ze,P=new ke,U=new ze;let N=!1;const G=[],J={};function T(){return 2*Math.PI/60/60*s.autoRotateSpeed}function k(){return Math.pow(.95,s.zoomSpeed)}function D(g){s.reverseOrbit||s.reverseHorizontalOrbit?f.theta+=g:f.theta-=g}function $(g){s.reverseOrbit||s.reverseVerticalOrbit?f.phi+=g:f.phi-=g}const Y=(()=>{const g=new ke;return function(ne,se){g.setFromMatrixColumn(se,0),g.multiplyScalar(-ne),p.add(g)}})(),fe=(()=>{const g=new ke;return function(ne,se){s.screenSpacePanning===!0?g.setFromMatrixColumn(se,1):(g.setFromMatrixColumn(se,0),g.crossVectors(s.object.up,g)),g.multiplyScalar(ne),p.add(g)}})(),ue=(()=>{const g=new ke;return function(ne,se){const me=s.domElement;if(me&&s.object instanceof Dn&&s.object.isPerspectiveCamera){const Oe=s.object.position;g.copy(Oe).sub(s.target);let We=g.length();We*=Math.tan(s.object.fov/2*Math.PI/180),Y(2*ne*We/me.clientHeight,s.object.matrix),fe(2*se*We/me.clientHeight,s.object.matrix)}else me&&s.object instanceof Mn&&s.object.isOrthographicCamera?(Y(ne*(s.object.right-s.object.left)/s.object.zoom/me.clientWidth,s.object.matrix),fe(se*(s.object.top-s.object.bottom)/s.object.zoom/me.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}})();function O(g){s.object instanceof Dn&&s.object.isPerspectiveCamera||s.object instanceof Mn&&s.object.isOrthographicCamera?u=g:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function W(g){O(u/g)}function _(g){O(u*g)}function M(g){if(!s.zoomToCursor||!s.domElement)return;N=!0;const C=s.domElement.getBoundingClientRect(),ne=g.clientX-C.left,se=g.clientY-C.top,me=C.width,Oe=C.height;U.x=ne/me*2-1,U.y=-(se/Oe)*2+1,P.set(U.x,U.y,1).unproject(s.object).sub(s.object.position).normalize()}function j(g){return Math.max(s.minDistance,Math.min(s.maxDistance,g))}function I(g){w.set(g.clientX,g.clientY)}function L(g){M(g),h.set(g.clientX,g.clientY)}function z(g){m.set(g.clientX,g.clientY)}function A(g){b.set(g.clientX,g.clientY),S.subVectors(b,w).multiplyScalar(s.rotateSpeed);const C=s.domElement;C&&(D(2*Math.PI*S.x/C.clientHeight),$(2*Math.PI*S.y/C.clientHeight)),w.copy(b),s.update()}function R(g){x.set(g.clientX,g.clientY),E.subVectors(x,h),E.y>0?W(k()):E.y<0&&_(k()),h.copy(x),s.update()}function H(g){v.set(g.clientX,g.clientY),y.subVectors(v,m).multiplyScalar(s.panSpeed),ue(y.x,y.y),m.copy(v),s.update()}function le(g){M(g),g.deltaY<0?_(k()):g.deltaY>0&&W(k()),s.update()}function K(g){let C=!1;switch(g.code){case s.keys.UP:ue(0,s.keyPanSpeed),C=!0;break;case s.keys.BOTTOM:ue(0,-s.keyPanSpeed),C=!0;break;case s.keys.LEFT:ue(s.keyPanSpeed,0),C=!0;break;case s.keys.RIGHT:ue(-s.keyPanSpeed,0),C=!0;break}C&&(g.preventDefault(),s.update())}function V(){if(G.length==1)w.set(G[0].pageX,G[0].pageY);else{const g=.5*(G[0].pageX+G[1].pageX),C=.5*(G[0].pageY+G[1].pageY);w.set(g,C)}}function Te(){if(G.length==1)m.set(G[0].pageX,G[0].pageY);else{const g=.5*(G[0].pageX+G[1].pageX),C=.5*(G[0].pageY+G[1].pageY);m.set(g,C)}}function be(){const g=G[0].pageX-G[1].pageX,C=G[0].pageY-G[1].pageY,ne=Math.sqrt(g*g+C*C);h.set(0,ne)}function ee(){s.enableZoom&&be(),s.enablePan&&Te()}function ie(){s.enableZoom&&be(),s.enableRotate&&V()}function ve(g){if(G.length==1)b.set(g.pageX,g.pageY);else{const ne=ae(g),se=.5*(g.pageX+ne.x),me=.5*(g.pageY+ne.y);b.set(se,me)}S.subVectors(b,w).multiplyScalar(s.rotateSpeed);const C=s.domElement;C&&(D(2*Math.PI*S.x/C.clientHeight),$(2*Math.PI*S.y/C.clientHeight)),w.copy(b)}function F(g){if(G.length==1)v.set(g.pageX,g.pageY);else{const C=ae(g),ne=.5*(g.pageX+C.x),se=.5*(g.pageY+C.y);v.set(ne,se)}y.subVectors(v,m).multiplyScalar(s.panSpeed),ue(y.x,y.y),m.copy(v)}function re(g){const C=ae(g),ne=g.pageX-C.x,se=g.pageY-C.y,me=Math.sqrt(ne*ne+se*se);x.set(0,me),E.set(0,Math.pow(x.y/h.y,s.zoomSpeed)),W(E.y),h.copy(x)}function te(g){s.enableZoom&&re(g),s.enablePan&&F(g)}function B(g){s.enableZoom&&re(g),s.enableRotate&&ve(g)}function we(g){var C,ne;s.enabled!==!1&&(G.length===0&&((C=s.domElement)==null||C.ownerDocument.addEventListener("pointermove",Q),(ne=s.domElement)==null||ne.ownerDocument.addEventListener("pointerup",q)),Ce(g),g.pointerType==="touch"?he(g):Z(g))}function Q(g){s.enabled!==!1&&(g.pointerType==="touch"?Ee(g):Se(g))}function q(g){var C,ne,se;Me(g),G.length===0&&((C=s.domElement)==null||C.releasePointerCapture(g.pointerId),(ne=s.domElement)==null||ne.ownerDocument.removeEventListener("pointermove",Q),(se=s.domElement)==null||se.ownerDocument.removeEventListener("pointerup",q)),s.dispatchEvent(i),r=a.NONE}function Z(g){let C;switch(g.button){case 0:C=s.mouseButtons.LEFT;break;case 1:C=s.mouseButtons.MIDDLE;break;case 2:C=s.mouseButtons.RIGHT;break;default:C=-1}switch(C){case yt.DOLLY:if(s.enableZoom===!1)return;L(g),r=a.DOLLY;break;case yt.ROTATE:if(g.ctrlKey||g.metaKey||g.shiftKey){if(s.enablePan===!1)return;z(g),r=a.PAN}else{if(s.enableRotate===!1)return;I(g),r=a.ROTATE}break;case yt.PAN:if(g.ctrlKey||g.metaKey||g.shiftKey){if(s.enableRotate===!1)return;I(g),r=a.ROTATE}else{if(s.enablePan===!1)return;z(g),r=a.PAN}break;default:r=a.NONE}r!==a.NONE&&s.dispatchEvent(e)}function Se(g){if(s.enabled!==!1)switch(r){case a.ROTATE:if(s.enableRotate===!1)return;A(g);break;case a.DOLLY:if(s.enableZoom===!1)return;R(g);break;case a.PAN:if(s.enablePan===!1)return;H(g);break}}function _e(g){s.enabled===!1||s.enableZoom===!1||r!==a.NONE&&r!==a.ROTATE||(g.preventDefault(),s.dispatchEvent(e),le(g),s.dispatchEvent(i))}function X(g){s.enabled===!1||s.enablePan===!1||K(g)}function he(g){switch(pe(g),G.length){case 1:switch(s.touches.ONE){case bt.ROTATE:if(s.enableRotate===!1)return;V(),r=a.TOUCH_ROTATE;break;case bt.PAN:if(s.enablePan===!1)return;Te(),r=a.TOUCH_PAN;break;default:r=a.NONE}break;case 2:switch(s.touches.TWO){case bt.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;ee(),r=a.TOUCH_DOLLY_PAN;break;case bt.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;ie(),r=a.TOUCH_DOLLY_ROTATE;break;default:r=a.NONE}break;default:r=a.NONE}r!==a.NONE&&s.dispatchEvent(e)}function Ee(g){switch(pe(g),r){case a.TOUCH_ROTATE:if(s.enableRotate===!1)return;ve(g),s.update();break;case a.TOUCH_PAN:if(s.enablePan===!1)return;F(g),s.update();break;case a.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;te(g),s.update();break;case a.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;B(g),s.update();break;default:r=a.NONE}}function Ue(g){s.enabled!==!1&&g.preventDefault()}function Ce(g){G.push(g)}function Me(g){delete J[g.pointerId];for(let C=0;C<G.length;C++)if(G[C].pointerId==g.pointerId){G.splice(C,1);return}}function pe(g){let C=J[g.pointerId];C===void 0&&(C=new ze,J[g.pointerId]=C),C.set(g.pageX,g.pageY)}function ae(g){const C=g.pointerId===G[0].pointerId?G[1]:G[0];return J[C.pointerId]}this.dollyIn=(g=k())=>{_(g),s.update()},this.dollyOut=(g=k())=>{W(g),s.update()},this.getScale=()=>u,this.setScale=g=>{O(g),s.update()},this.getZoomScale=()=>k(),d!==void 0&&this.connect(d),this.update()}};const wr=new on,Qt=new ke;class Gr extends Or{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const n=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],d=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],s=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(s),this.setAttribute("position",new Bn(n,3)),this.setAttribute("uv",new Bn(d,2))}applyMatrix4(n){const d=this.attributes.instanceStart,s=this.attributes.instanceEnd;return d!==void 0&&(d.applyMatrix4(n),s.applyMatrix4(n),d.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(n){let d;n instanceof Float32Array?d=n:Array.isArray(n)&&(d=new Float32Array(n));const s=new In(d,6,1);return this.setAttribute("instanceStart",new wt(s,3,0)),this.setAttribute("instanceEnd",new wt(s,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(n,d=3){let s;n instanceof Float32Array?s=n:Array.isArray(n)&&(s=new Float32Array(n));const t=new In(s,d*2,1);return this.setAttribute("instanceColorStart",new wt(t,d,0)),this.setAttribute("instanceColorEnd",new wt(t,d,d)),this}fromWireframeGeometry(n){return this.setPositions(n.attributes.position.array),this}fromEdgesGeometry(n){return this.setPositions(n.attributes.position.array),this}fromMesh(n){return this.fromWireframeGeometry(new oa(n.geometry)),this}fromLineSegments(n){const d=n.geometry;return this.setPositions(d.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new on);const n=this.attributes.instanceStart,d=this.attributes.instanceEnd;n!==void 0&&d!==void 0&&(this.boundingBox.setFromBufferAttribute(n),wr.setFromBufferAttribute(d),this.boundingBox.union(wr))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vn),this.boundingBox===null&&this.computeBoundingBox();const n=this.attributes.instanceStart,d=this.attributes.instanceEnd;if(n!==void 0&&d!==void 0){const s=this.boundingSphere.center;this.boundingBox.getCenter(s);let t=0;for(let e=0,i=n.count;e<i;e++)Qt.fromBufferAttribute(n,e),t=Math.max(t,s.distanceToSquared(Qt)),Qt.fromBufferAttribute(d,e),t=Math.max(t,s.distanceToSquared(Qt));this.boundingSphere.radius=Math.sqrt(t),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(n){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(n)}}class jr extends Gr{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(n){const d=n.length-3,s=new Float32Array(2*d);for(let t=0;t<d;t+=3)s[2*t]=n[t],s[2*t+1]=n[t+1],s[2*t+2]=n[t+2],s[2*t+3]=n[t+3],s[2*t+4]=n[t+4],s[2*t+5]=n[t+5];return super.setPositions(s),this}setColors(n,d=3){const s=n.length-d,t=new Float32Array(2*s);if(d===3)for(let e=0;e<s;e+=d)t[2*e]=n[e],t[2*e+1]=n[e+1],t[2*e+2]=n[e+2],t[2*e+3]=n[e+3],t[2*e+4]=n[e+4],t[2*e+5]=n[e+5];else for(let e=0;e<s;e+=d)t[2*e]=n[e],t[2*e+1]=n[e+1],t[2*e+2]=n[e+2],t[2*e+3]=n[e+3],t[2*e+4]=n[e+4],t[2*e+5]=n[e+5],t[2*e+6]=n[e+6],t[2*e+7]=n[e+7];return super.setColors(t,d),this}fromLine(n){const d=n.geometry;return this.setPositions(d.attributes.position.array),this}}class Yn extends Fr{constructor(n){super({type:"LineMaterial",uniforms:Gn.clone(Gn.merge([gr.common,gr.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ze(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${Br>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(d){this.uniforms.diffuse.value=d}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(d){d===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(d){this.uniforms.linewidth.value=d}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(d){!!d!="USE_DASH"in this.defines&&(this.needsUpdate=!0),d===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(d){this.uniforms.dashScale.value=d}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(d){this.uniforms.dashSize.value=d}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(d){this.uniforms.dashOffset.value=d}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(d){this.uniforms.gapSize.value=d}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(d){this.uniforms.opacity.value=d}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(d){this.uniforms.resolution.value.copy(d)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(d){!!d!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),d===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(n)}}const Pn=new dt,xr=new ke,_r=new ke,Ie=new dt,Ge=new dt,$e=new dt,Ln=new ke,On=new Rr,Ne=new ia,Tr=new ke,qt=new on,$t=new Vn,et=new dt;let tt,ut;function Er(c,n,d){return et.set(0,0,-n,1).applyMatrix4(c.projectionMatrix),et.multiplyScalar(1/et.w),et.x=ut/d.width,et.y=ut/d.height,et.applyMatrix4(c.projectionMatrixInverse),et.multiplyScalar(1/et.w),Math.abs(Math.max(et.x,et.y))}function Ca(c,n){const d=c.matrixWorld,s=c.geometry,t=s.attributes.instanceStart,e=s.attributes.instanceEnd,i=Math.min(s.instanceCount,t.count);for(let a=0,r=i;a<r;a++){Ne.start.fromBufferAttribute(t,a),Ne.end.fromBufferAttribute(e,a),Ne.applyMatrix4(d);const o=new ke,l=new ke;tt.distanceSqToSegment(Ne.start,Ne.end,l,o),l.distanceTo(o)<ut*.5&&n.push({point:l,pointOnLine:o,distance:tt.origin.distanceTo(l),object:c,face:null,faceIndex:a,uv:null,[Ir]:null})}}function Ma(c,n,d){const s=n.projectionMatrix,e=c.material.resolution,i=c.matrixWorld,a=c.geometry,r=a.attributes.instanceStart,o=a.attributes.instanceEnd,l=Math.min(a.instanceCount,r.count),f=-n.near;tt.at(1,$e),$e.w=1,$e.applyMatrix4(n.matrixWorldInverse),$e.applyMatrix4(s),$e.multiplyScalar(1/$e.w),$e.x*=e.x/2,$e.y*=e.y/2,$e.z=0,Ln.copy($e),On.multiplyMatrices(n.matrixWorldInverse,i);for(let u=0,p=l;u<p;u++){if(Ie.fromBufferAttribute(r,u),Ge.fromBufferAttribute(o,u),Ie.w=1,Ge.w=1,Ie.applyMatrix4(On),Ge.applyMatrix4(On),Ie.z>f&&Ge.z>f)continue;if(Ie.z>f){const y=Ie.z-Ge.z,h=(Ie.z-f)/y;Ie.lerp(Ge,h)}else if(Ge.z>f){const y=Ge.z-Ie.z,h=(Ge.z-f)/y;Ge.lerp(Ie,h)}Ie.applyMatrix4(s),Ge.applyMatrix4(s),Ie.multiplyScalar(1/Ie.w),Ge.multiplyScalar(1/Ge.w),Ie.x*=e.x/2,Ie.y*=e.y/2,Ge.x*=e.x/2,Ge.y*=e.y/2,Ne.start.copy(Ie),Ne.start.z=0,Ne.end.copy(Ge),Ne.end.z=0;const b=Ne.closestPointToPointParameter(Ln,!0);Ne.at(b,Tr);const S=sa.lerp(Ie.z,Ge.z,b),m=S>=-1&&S<=1,v=Ln.distanceTo(Tr)<ut*.5;if(m&&v){Ne.start.fromBufferAttribute(r,u),Ne.end.fromBufferAttribute(o,u),Ne.start.applyMatrix4(i),Ne.end.applyMatrix4(i);const y=new ke,h=new ke;tt.distanceSqToSegment(Ne.start,Ne.end,h,y),d.push({point:h,pointOnLine:y,distance:tt.origin.distanceTo(h),object:c,face:null,faceIndex:u,uv:null,[Ir]:null})}}}class Da extends nn{constructor(n=new Gr,d=new Yn({color:Math.random()*16777215})){super(n,d),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const n=this.geometry,d=n.attributes.instanceStart,s=n.attributes.instanceEnd,t=new Float32Array(2*d.count);for(let i=0,a=0,r=d.count;i<r;i++,a+=2)xr.fromBufferAttribute(d,i),_r.fromBufferAttribute(s,i),t[a]=a===0?0:t[a-1],t[a+1]=t[a]+xr.distanceTo(_r);const e=new In(t,2,1);return n.setAttribute("instanceDistanceStart",new wt(e,1,0)),n.setAttribute("instanceDistanceEnd",new wt(e,1,1)),this}raycast(n,d){const s=this.material.worldUnits,t=n.camera;t===null&&!s&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const e=n.params.Line2!==void 0&&n.params.Line2.threshold||0;tt=n.ray;const i=this.matrixWorld,a=this.geometry,r=this.material;ut=r.linewidth+e,a.boundingSphere===null&&a.computeBoundingSphere(),$t.copy(a.boundingSphere).applyMatrix4(i);let o;if(s)o=ut*.5;else{const f=Math.max(t.near,$t.distanceToPoint(tt.origin));o=Er(t,f,r.resolution)}if($t.radius+=o,tt.intersectsSphere($t)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),qt.copy(a.boundingBox).applyMatrix4(i);let l;if(s)l=ut*.5;else{const f=Math.max(t.near,qt.distanceToPoint(tt.origin));l=Er(t,f,r.resolution)}qt.expandByScalar(l),tt.intersectsBox(qt)!==!1&&(s?Ca(this,d):Ma(this,t,d))}onBeforeRender(n){const d=this.material.uniforms;d&&d.resolution&&(n.getViewport(Pn),this.material.uniforms.resolution.value.set(Pn.z,Pn.w))}}class Pa extends Da{constructor(n=new jr,d=new Yn({color:Math.random()*16777215})){super(n,d),this.isLine2=!0,this.type="Line2"}}const La=ge.forwardRef(function({points:n,color:d="black",vertexColors:s,lineWidth:t,dashed:e,...i},a){const[r]=ge.useState(()=>new Pa),[o]=ge.useState(()=>new Yn),[l]=ge.useState(()=>new ze(512,512)),f=ge.useMemo(()=>{const u=new jr,p=n.map(w=>w instanceof ke?w.toArray():w);if(u.setPositions(p.flat()),s){const w=s.map(b=>b instanceof _t?b.toArray():b);u.setColors(w.flat())}return u},[n,s]);return ge.useLayoutEffect(()=>{r.computeLineDistances()},[n,r]),ge.useLayoutEffect(()=>{e?o.defines.USE_DASH="":delete o.defines.USE_DASH,o.needsUpdate=!0},[e,o]),ge.useEffect(()=>()=>f.dispose(),[f]),ge.createElement("primitive",an({object:r,ref:a},i),ge.createElement("primitive",{object:f,attach:"geometry"}),ge.createElement("primitive",an({object:o,attach:"material",color:d,vertexColors:!!s,resolution:l,linewidth:t,dashed:e},i)))});function Xn(){var c=0,n=[],d,s=0,t=0;function e(m,v){var y=Xn();function h(){var x=c>0?m:v;if(b(x))try{var E=x(d);E===y&&w();var P=u(E);P?P.call(E,y.resolve,y.reject):y.resolve(E)}catch(U){y.reject(U)}else y[c>0?"resolve":"reject"](d)}return n.push(h),c&&o(),y}var i=p(function(m){t||r(1,m)}),a=p(function(m){t||r(-1,m)});function r(m,v){t++;var y=0;try{v===S&&w();var h=m>0&&u(v);h?h.call(v,p(function(x){y++,r(1,x)}),p(function(x){y++,r(-1,x)})):(c=m,d=v,o())}catch(x){!c&&!y&&r(-1,x)}}function o(){s||(setTimeout(l,0),s=1)}function l(){var m=n;s=0,n=[],m.forEach(f)}function f(m){m()}function u(m){var v=m&&(b(m)||typeof m=="object")&&m.then;return b(v)&&v}function p(m){var v=0;return function(){for(var y=[],h=arguments.length;h--;)y[h]=arguments[h];v++||m.apply(this,y)}}function w(){throw new TypeError("Chaining cycle detected")}var b=function(m){return typeof m=="function"},S={then:e,resolve:i,reject:a};return S}function Nr(){var c,n,d=new Promise(function(s,t){c=s,n=t});return{then:d.then.bind(d),resolve:c,reject:n}}Xn.all=Nr.all=function(c){var n=0,d=[],s=rt();return c.length===0?s.resolve([]):c.forEach(function(t,e){var i=rt();i.resolve(t),i.then(function(a){n++,d[e]=a,n===c.length&&s.resolve(d)},s.reject)}),s};var rt=typeof Promise=="function"?Nr:Xn;function Oa(){var c=Object.create(null);function n(t,e){var i=t.id,a=t.name,r=t.dependencies;r===void 0&&(r=[]);var o=t.init;o===void 0&&(o=function(){});var l=t.getTransferables;if(l===void 0&&(l=null),!c[i])try{r=r.map(function(u){return u&&u.isWorkerModule&&(n(u,function(p){if(p instanceof Error)throw p}),u=c[u.id].value),u}),o=s("<"+a+">.init",o),l&&(l=s("<"+a+">.getTransferables",l));var f=null;typeof o=="function"?f=o.apply(void 0,r):console.error("worker module init function failed to rehydrate"),c[i]={id:i,value:f,getTransferables:l},e(f)}catch(u){u&&u.noLog||console.error(u),e(u)}}function d(t,e){var i,a=t.id,r=t.args;(!c[a]||typeof c[a].value!="function")&&e(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var o=(i=c[a]).value.apply(i,r);o&&typeof o.then=="function"?o.then(l,function(f){return e(f instanceof Error?f:new Error(""+f))}):l(o)}catch(f){e(f)}function l(f){try{var u=c[a].getTransferables&&c[a].getTransferables(f);(!u||!Array.isArray(u)||!u.length)&&(u=void 0),e(f,u)}catch(p){console.error(p),e(p)}}}function s(t,e){var i=void 0;self.troikaDefine=function(r){return i=r};var a=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(r){console.error(r)}return URL.revokeObjectURL(a),delete self.troikaDefine,i}self.addEventListener("message",function(t){var e=t.data,i=e.messageId,a=e.action,r=e.data;try{a==="registerModule"&&n(r,function(o){o instanceof Error?postMessage({messageId:i,success:!1,error:o.message}):postMessage({messageId:i,success:!0,result:{isCallable:typeof o=="function"}})}),a==="callModule"&&d(r,function(o,l){o instanceof Error?postMessage({messageId:i,success:!1,error:o.message}):postMessage({messageId:i,success:!0,result:o},l||void 0)})}catch(o){postMessage({messageId:i,success:!1,error:o.stack})}})}function Fa(c){var n=function(){for(var d=[],s=arguments.length;s--;)d[s]=arguments[s];return n._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,d);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var d=c.dependencies,s=c.init;d=Array.isArray(d)?d.map(function(e){return e&&e._getInitResult?e._getInitResult():e}):[];var t=rt.all(d).then(function(e){return s.apply(null,e)});return n._getInitResult=function(){return t},t},n}var zr=function(){var c=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),c=!0}catch(d){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+d.message+"]")}return zr=function(){return c},c},Ra=0,Ba=0,Fn=!1,Ft=Object.create(null),Rt=Object.create(null),Nn=Object.create(null);function Tt(c){if((!c||typeof c.init!="function")&&!Fn)throw new Error("requires `options.init` function");var n=c.dependencies,d=c.init,s=c.getTransferables,t=c.workerId;if(!zr())return Fa(c);t==null&&(t="#default");var e="workerModule"+ ++Ra,i=c.name||e,a=null;n=n&&n.map(function(o){return typeof o=="function"&&!o.workerModuleData&&(Fn=!0,o=Tt({workerId:t,name:"<"+i+"> function dependency: "+o.name,init:`function(){return (
`+rn(o)+`
)}`}),Fn=!1),o&&o.workerModuleData&&(o=o.workerModuleData),o});function r(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];if(!a){a=Ur(t,"registerModule",r.workerModuleData);var f=function(){a=null,Rt[t].delete(f)};(Rt[t]||(Rt[t]=new Set)).add(f)}return a.then(function(u){var p=u.isCallable;if(p)return Ur(t,"callModule",{id:e,args:o});throw new Error("Worker module function was called but `init` did not return a callable function")})}return r.workerModuleData={isWorkerModule:!0,id:e,name:i,dependencies:n,init:rn(d),getTransferables:s&&rn(s)},r}function Ia(c){Rt[c]&&Rt[c].forEach(function(n){n()}),Ft[c]&&(Ft[c].terminate(),delete Ft[c])}function rn(c){var n=c.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function Ga(c){var n=Ft[c];if(!n){var d=rn(Oa);n=Ft[c]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+c.replace(/\*/g,"")+` **/

;(`+d+")()"],{type:"application/javascript"}))),n.onmessage=function(s){var t=s.data,e=t.messageId,i=Nn[e];if(!i)throw new Error("WorkerModule response with empty or unknown messageId");delete Nn[e],i(t)}}return n}function Ur(c,n,d){var s=rt(),t=++Ba;return Nn[t]=function(e){e.success?s.resolve(e.result):s.reject(new Error("Error in worker "+n+" call: "+e.error))},Ga(c).postMessage({messageId:t,action:n,data:d}),s}var ja=Tt({name:"Thenable",dependencies:[rt],init:function(c){return c}});function Wr(){var c=(function(n){function d(O,W,_,M,j,I,L,z){var A=1-L;z.x=A*A*O+2*A*L*_+L*L*j,z.y=A*A*W+2*A*L*M+L*L*I}function s(O,W,_,M,j,I,L,z,A,R){var H=1-A;R.x=H*H*H*O+3*H*H*A*_+3*H*A*A*j+A*A*A*L,R.y=H*H*H*W+3*H*H*A*M+3*H*A*A*I+A*A*A*z}function t(O,W){for(var _=/([MLQCZ])([^MLQCZ]*)/g,M,j,I,L,z;M=_.exec(O);){var A=M[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(R){return parseFloat(R)});switch(M[1]){case"M":L=j=A[0],z=I=A[1];break;case"L":(A[0]!==L||A[1]!==z)&&W("L",L,z,L=A[0],z=A[1]);break;case"Q":{W("Q",L,z,L=A[2],z=A[3],A[0],A[1]);break}case"C":{W("C",L,z,L=A[4],z=A[5],A[0],A[1],A[2],A[3]);break}case"Z":(L!==j||z!==I)&&W("L",L,z,j,I);break}}}function e(O,W,_){_===void 0&&(_=16);var M={x:0,y:0};t(O,function(j,I,L,z,A,R,H,le,K){switch(j){case"L":W(I,L,z,A);break;case"Q":{for(var V=I,Te=L,be=1;be<_;be++)d(I,L,R,H,z,A,be/(_-1),M),W(V,Te,M.x,M.y),V=M.x,Te=M.y;break}case"C":{for(var ee=I,ie=L,ve=1;ve<_;ve++)s(I,L,R,H,le,K,z,A,ve/(_-1),M),W(ee,ie,M.x,M.y),ee=M.x,ie=M.y;break}}})}var i="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",r=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(O,W){var _=O.getContext?O.getContext("webgl",o):O,M=r.get(_);if(!M){let H=function(ee){var ie=I[ee];if(!ie&&(ie=I[ee]=_.getExtension(ee),!ie))throw new Error(ee+" not supported");return ie},le=function(ee,ie){var ve=_.createShader(ie);return _.shaderSource(ve,ee),_.compileShader(ve),ve},K=function(ee,ie,ve,F){if(!L[ee]){var re={},te={},B=_.createProgram();_.attachShader(B,le(ie,_.VERTEX_SHADER)),_.attachShader(B,le(ve,_.FRAGMENT_SHADER)),_.linkProgram(B),L[ee]={program:B,transaction:function(Q){_.useProgram(B),Q({setUniform:function(Z,Se){for(var _e=[],X=arguments.length-2;X-- >0;)_e[X]=arguments[X+2];var he=te[Se]||(te[Se]=_.getUniformLocation(B,Se));_["uniform"+Z].apply(_,[he].concat(_e))},setAttribute:function(Z,Se,_e,X,he){var Ee=re[Z];Ee||(Ee=re[Z]={buf:_.createBuffer(),loc:_.getAttribLocation(B,Z),data:null}),_.bindBuffer(_.ARRAY_BUFFER,Ee.buf),_.vertexAttribPointer(Ee.loc,Se,_.FLOAT,!1,0,0),_.enableVertexAttribArray(Ee.loc),j?_.vertexAttribDivisor(Ee.loc,X):H("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ee.loc,X),he!==Ee.data&&(_.bufferData(_.ARRAY_BUFFER,he,_e),Ee.data=he)}})}}}L[ee].transaction(F)},V=function(ee,ie){A++;try{_.activeTexture(_.TEXTURE0+A);var ve=z[ee];ve||(ve=z[ee]=_.createTexture(),_.bindTexture(_.TEXTURE_2D,ve),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST)),_.bindTexture(_.TEXTURE_2D,ve),ie(ve,A)}finally{A--}},Te=function(ee,ie,ve){var F=_.createFramebuffer();R.push(F),_.bindFramebuffer(_.FRAMEBUFFER,F),_.activeTexture(_.TEXTURE0+ie),_.bindTexture(_.TEXTURE_2D,ee),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,ee,0);try{ve(F)}finally{_.deleteFramebuffer(F),_.bindFramebuffer(_.FRAMEBUFFER,R[--R.length-1]||null)}},be=function(){I={},L={},z={},A=-1,R.length=0};var j=typeof WebGL2RenderingContext<"u"&&_ instanceof WebGL2RenderingContext,I={},L={},z={},A=-1,R=[];_.canvas.addEventListener("webglcontextlost",function(ee){be(),ee.preventDefault()},!1),r.set(_,M={gl:_,isWebGL2:j,getExtension:H,withProgram:K,withTexture:V,withTextureFramebuffer:Te,handleContextLoss:be})}W(M)}function f(O,W,_,M,j,I,L,z){L===void 0&&(L=15),z===void 0&&(z=null),l(O,function(A){var R=A.gl,H=A.withProgram,le=A.withTexture;le("copy",function(K,V){R.texImage2D(R.TEXTURE_2D,0,R.RGBA,j,I,0,R.RGBA,R.UNSIGNED_BYTE,W),H("copy",i,a,function(Te){var be=Te.setUniform,ee=Te.setAttribute;ee("aUV",2,R.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),be("1i","image",V),R.bindFramebuffer(R.FRAMEBUFFER,z||null),R.disable(R.BLEND),R.colorMask(L&8,L&4,L&2,L&1),R.viewport(_,M,j,I),R.scissor(_,M,j,I),R.drawArrays(R.TRIANGLES,0,3)})})})}function u(O,W,_){var M=O.width,j=O.height;l(O,function(I){var L=I.gl,z=new Uint8Array(M*j*4);L.readPixels(0,0,M,j,L.RGBA,L.UNSIGNED_BYTE,z),O.width=W,O.height=_,f(L,z,0,0,M,j)})}var p=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:f,resizeWebGLCanvasWithoutClearing:u});function w(O,W,_,M,j,I){I===void 0&&(I=1);var L=new Uint8Array(O*W),z=M[2]-M[0],A=M[3]-M[1],R=[];e(_,function(ee,ie,ve,F){R.push({x1:ee,y1:ie,x2:ve,y2:F,minX:Math.min(ee,ve),minY:Math.min(ie,F),maxX:Math.max(ee,ve),maxY:Math.max(ie,F)})}),R.sort(function(ee,ie){return ee.maxX-ie.maxX});for(var H=0;H<O;H++)for(var le=0;le<W;le++){var K=Te(M[0]+z*(H+.5)/O,M[1]+A*(le+.5)/W),V=Math.pow(1-Math.abs(K)/j,I)/2;K<0&&(V=1-V),V=Math.max(0,Math.min(255,Math.round(V*255))),L[le*O+H]=V}return L;function Te(ee,ie){for(var ve=1/0,F=1/0,re=R.length;re--;){var te=R[re];if(te.maxX+F<=ee)break;if(ee+F>te.minX&&ie-F<te.maxY&&ie+F>te.minY){var B=m(ee,ie,te.x1,te.y1,te.x2,te.y2);B<ve&&(ve=B,F=Math.sqrt(ve))}}return be(ee,ie)&&(F=-F),F}function be(ee,ie){for(var ve=0,F=R.length;F--;){var re=R[F];if(re.maxX<=ee)break;var te=re.y1>ie!=re.y2>ie&&ee<(re.x2-re.x1)*(ie-re.y1)/(re.y2-re.y1)+re.x1;te&&(ve+=re.y1<re.y2?1:-1)}return ve!==0}}function b(O,W,_,M,j,I,L,z,A,R){I===void 0&&(I=1),z===void 0&&(z=0),A===void 0&&(A=0),R===void 0&&(R=0),S(O,W,_,M,j,I,L,null,z,A,R)}function S(O,W,_,M,j,I,L,z,A,R,H){I===void 0&&(I=1),A===void 0&&(A=0),R===void 0&&(R=0),H===void 0&&(H=0);for(var le=w(O,W,_,M,j,I),K=new Uint8Array(le.length*4),V=0;V<le.length;V++)K[V*4+H]=le[V];f(L,K,A,R,O,W,1<<3-H,z)}function m(O,W,_,M,j,I){var L=j-_,z=I-M,A=L*L+z*z,R=A?Math.max(0,Math.min(1,((O-_)*L+(W-M)*z)/A)):0,H=O-(_+R*L),le=W-(M+R*z);return H*H+le*le}var v=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:b,generateIntoFramebuffer:S}),y="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",h="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",x="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",E=new Float32Array([0,0,2,0,0,2]),P=null,U=!1,N={},G=new WeakMap;function J(O){if(!U&&!$(O))throw new Error("WebGL generation not supported")}function T(O,W,_,M,j,I,L){if(I===void 0&&(I=1),L===void 0&&(L=null),!L&&(L=P,!L)){var z=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!z)throw new Error("OffscreenCanvas or DOM canvas not supported");L=P=z.getContext("webgl",{depth:!1})}J(L);var A=new Uint8Array(O*W*4);l(L,function(K){var V=K.gl,Te=K.withTexture,be=K.withTextureFramebuffer;Te("readable",function(ee,ie){V.texImage2D(V.TEXTURE_2D,0,V.RGBA,O,W,0,V.RGBA,V.UNSIGNED_BYTE,null),be(ee,ie,function(ve){D(O,W,_,M,j,I,V,ve,0,0,0),V.readPixels(0,0,O,W,V.RGBA,V.UNSIGNED_BYTE,A)})})});for(var R=new Uint8Array(O*W),H=0,le=0;H<A.length;H+=4)R[le++]=A[H];return R}function k(O,W,_,M,j,I,L,z,A,R){I===void 0&&(I=1),z===void 0&&(z=0),A===void 0&&(A=0),R===void 0&&(R=0),D(O,W,_,M,j,I,L,null,z,A,R)}function D(O,W,_,M,j,I,L,z,A,R,H){I===void 0&&(I=1),A===void 0&&(A=0),R===void 0&&(R=0),H===void 0&&(H=0),J(L);var le=[];e(_,function(K,V,Te,be){le.push(K,V,Te,be)}),le=new Float32Array(le),l(L,function(K){var V=K.gl,Te=K.isWebGL2,be=K.getExtension,ee=K.withProgram,ie=K.withTexture,ve=K.withTextureFramebuffer,F=K.handleContextLoss;if(ie("rawDistances",function(re,te){(O!==re._lastWidth||W!==re._lastHeight)&&V.texImage2D(V.TEXTURE_2D,0,V.RGBA,re._lastWidth=O,re._lastHeight=W,0,V.RGBA,V.UNSIGNED_BYTE,null),ee("main",y,h,function(B){var we=B.setAttribute,Q=B.setUniform,q=!Te&&be("ANGLE_instanced_arrays"),Z=!Te&&be("EXT_blend_minmax");we("aUV",2,V.STATIC_DRAW,0,E),we("aLineSegment",4,V.DYNAMIC_DRAW,1,le),Q.apply(void 0,["4f","uGlyphBounds"].concat(M)),Q("1f","uMaxDistance",j),Q("1f","uExponent",I),ve(re,te,function(Se){V.enable(V.BLEND),V.colorMask(!0,!0,!0,!0),V.viewport(0,0,O,W),V.scissor(0,0,O,W),V.blendFunc(V.ONE,V.ONE),V.blendEquationSeparate(V.FUNC_ADD,Te?V.MAX:Z.MAX_EXT),V.clear(V.COLOR_BUFFER_BIT),Te?V.drawArraysInstanced(V.TRIANGLES,0,3,le.length/4):q.drawArraysInstancedANGLE(V.TRIANGLES,0,3,le.length/4)})}),ee("post",i,x,function(B){B.setAttribute("aUV",2,V.STATIC_DRAW,0,E),B.setUniform("1i","tex",te),V.bindFramebuffer(V.FRAMEBUFFER,z),V.disable(V.BLEND),V.colorMask(H===0,H===1,H===2,H===3),V.viewport(A,R,O,W),V.scissor(A,R,O,W),V.drawArrays(V.TRIANGLES,0,3)})}),V.isContextLost())throw F(),new Error("webgl context lost")})}function $(O){var W=!O||O===P?N:O.canvas||O,_=G.get(W);if(_===void 0){U=!0;var M=null;try{var j=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],I=T(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);_=I&&j.length===I.length&&I.every(function(L,z){return L===j[z]}),_||(M="bad trial run results",console.info(j,I))}catch(L){_=!1,M=L.message}M&&console.warn("WebGL SDF generation not supported:",M),U=!1,G.set(W,_)}return _}var Y=Object.freeze({__proto__:null,generate:T,generateIntoCanvas:k,generateIntoFramebuffer:D,isSupported:$});function fe(O,W,_,M,j,I){j===void 0&&(j=Math.max(M[2]-M[0],M[3]-M[1])/2),I===void 0&&(I=1);try{return T.apply(Y,arguments)}catch(L){return console.info("WebGL SDF generation failed, falling back to JS",L),w.apply(v,arguments)}}function ue(O,W,_,M,j,I,L,z,A,R){j===void 0&&(j=Math.max(M[2]-M[0],M[3]-M[1])/2),I===void 0&&(I=1),z===void 0&&(z=0),A===void 0&&(A=0),R===void 0&&(R=0);try{return k.apply(Y,arguments)}catch(H){return console.info("WebGL SDF generation failed, falling back to JS",H),b.apply(v,arguments)}}return n.forEachPathCommand=t,n.generate=fe,n.generateIntoCanvas=ue,n.javascript=v,n.pathToLineSegments=e,n.webgl=Y,n.webglUtils=p,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return c}function Na(){var c=(function(n){var d={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},s={},t={};s.L=1,t[1]="L",Object.keys(d).forEach(function(F,re){s[F]=1<<re+1,t[s[F]]=F}),Object.freeze(s);var e=s.LRI|s.RLI|s.FSI,i=s.L|s.R|s.AL,a=s.B|s.S|s.WS|s.ON|s.FSI|s.LRI|s.RLI|s.PDI,r=s.BN|s.RLE|s.LRE|s.RLO|s.LRO|s.PDF,o=s.S|s.WS|s.B|e|s.PDI|r,l=null;function f(){if(!l){l=new Map;var F=function(te){if(d.hasOwnProperty(te)){var B=0;d[te].split(",").forEach(function(we){var Q=we.split("+"),q=Q[0],Z=Q[1];q=parseInt(q,36),Z=Z?parseInt(Z,36):0,l.set(B+=q,s[te]);for(var Se=0;Se<Z;Se++)l.set(++B,s[te])})}};for(var re in d)F(re)}}function u(F){return f(),l.get(F.codePointAt(0))||s.L}function p(F){return t[u(F)]}var w={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function b(F,re){var te=36,B=0,we=new Map,Q=re&&new Map,q;return F.split(",").forEach(function Z(Se){if(Se.indexOf("+")!==-1)for(var _e=+Se;_e--;)Z(q);else{q=Se;var X=Se.split(">"),he=X[0],Ee=X[1];he=String.fromCodePoint(B+=parseInt(he,te)),Ee=String.fromCodePoint(B+=parseInt(Ee,te)),we.set(he,Ee),re&&Q.set(Ee,he)}}),{map:we,reverseMap:Q}}var S,m,v;function y(){if(!S){var F=b(w.pairs,!0),re=F.map,te=F.reverseMap;S=re,m=te,v=b(w.canonical,!1).map}}function h(F){return y(),S.get(F)||null}function x(F){return y(),m.get(F)||null}function E(F){return y(),v.get(F)||null}var P=s.L,U=s.R,N=s.EN,G=s.ES,J=s.ET,T=s.AN,k=s.CS,D=s.B,$=s.S,Y=s.ON,fe=s.BN,ue=s.NSM,O=s.AL,W=s.LRO,_=s.RLO,M=s.LRE,j=s.RLE,I=s.PDF,L=s.LRI,z=s.RLI,A=s.FSI,R=s.PDI;function H(F,re){for(var te=125,B=new Uint32Array(F.length),we=0;we<F.length;we++)B[we]=u(F[we]);var Q=new Map;function q(Ve,Je){var He=B[Ve];B[Ve]=Je,Q.set(He,Q.get(He)-1),He&a&&Q.set(a,Q.get(a)-1),Q.set(Je,(Q.get(Je)||0)+1),Je&a&&Q.set(a,(Q.get(a)||0)+1)}for(var Z=new Uint8Array(F.length),Se=new Map,_e=[],X=null,he=0;he<F.length;he++)X||_e.push(X={start:he,end:F.length-1,level:re==="rtl"?1:re==="ltr"?0:pr(he,!1)}),B[he]&D&&(X.end=he,X=null);for(var Ee=j|M|_|W|e|R|I|D,Ue=function(Ve){return Ve+(Ve&1?1:2)},Ce=function(Ve){return Ve+(Ve&1?2:1)},Me=0;Me<_e.length;Me++){X=_e[Me];var pe=[{_level:X.level,_override:0,_isolate:0}],ae=void 0,g=0,C=0,ne=0;Q.clear();for(var se=X.start;se<=X.end;se++){var me=B[se];if(ae=pe[pe.length-1],Q.set(me,(Q.get(me)||0)+1),me&a&&Q.set(a,(Q.get(a)||0)+1),me&Ee)if(me&(j|M)){Z[se]=ae._level;var Oe=(me===j?Ce:Ue)(ae._level);Oe<=te&&!g&&!C?pe.push({_level:Oe,_override:0,_isolate:0}):g||C++}else if(me&(_|W)){Z[se]=ae._level;var We=(me===_?Ce:Ue)(ae._level);We<=te&&!g&&!C?pe.push({_level:We,_override:me&_?U:P,_isolate:0}):g||C++}else if(me&e){me&A&&(me=pr(se+1,!0)===1?z:L),Z[se]=ae._level,ae._override&&q(se,ae._override);var Fe=(me===z?Ce:Ue)(ae._level);Fe<=te&&g===0&&C===0?(ne++,pe.push({_level:Fe,_override:0,_isolate:1,_isolInitIndex:se})):g++}else if(me&R){if(g>0)g--;else if(ne>0){for(C=0;!pe[pe.length-1]._isolate;)pe.pop();var at=pe[pe.length-1]._isolInitIndex;at!=null&&(Se.set(at,se),Se.set(se,at)),pe.pop(),ne--}ae=pe[pe.length-1],Z[se]=ae._level,ae._override&&q(se,ae._override)}else me&I?(g===0&&(C>0?C--:!ae._isolate&&pe.length>1&&(pe.pop(),ae=pe[pe.length-1])),Z[se]=ae._level):me&D&&(Z[se]=X.level);else Z[se]=ae._level,ae._override&&me!==fe&&q(se,ae._override)}for(var xe=[],ye=null,De=X.start;De<=X.end;De++){var Le=B[De];if(!(Le&r)){var Ae=Z[De],Pe=Le&e,Qe=Le===R;ye&&Ae===ye._level?(ye._end=De,ye._endsWithIsolInit=Pe):xe.push(ye={_start:De,_end:De,_level:Ae,_startsWithPDI:Qe,_endsWithIsolInit:Pe})}}for(var Be=[],Re=0;Re<xe.length;Re++){var Ye=xe[Re];if(!Ye._startsWithPDI||Ye._startsWithPDI&&!Se.has(Ye._start)){for(var ot=[ye=Ye],Ke=void 0;ye&&ye._endsWithIsolInit&&(Ke=Se.get(ye._end))!=null;)for(var it=Re+1;it<xe.length;it++)if(xe[it]._start===Ke){ot.push(ye=xe[it]);break}for(var ht=[],fn=0;fn<ot.length;fn++)for(var Kn=ot[fn],cn=Kn._start;cn<=Kn._end;cn++)ht.push(cn);for(var Jr=Z[ht[0]],Zn=X.level,Bt=ht[0]-1;Bt>=0;Bt--)if(!(B[Bt]&r)){Zn=Z[Bt];break}var un=ht[ht.length-1],Qr=Z[un],Jn=X.level;if(!(B[un]&e)){for(var It=un+1;It<=X.end;It++)if(!(B[It]&r)){Jn=Z[It];break}}Be.push({_seqIndices:ht,_sosType:Math.max(Zn,Jr)%2?U:P,_eosType:Math.max(Jn,Qr)%2?U:P})}}for(var dn=0;dn<Be.length;dn++){var hn=Be[dn],oe=hn._seqIndices,Et=hn._sosType,qr=hn._eosType,pt=Z[oe[0]]&1?U:P;if(Q.get(ue))for(var Gt=0;Gt<oe.length;Gt++){var Qn=oe[Gt];if(B[Qn]&ue){for(var pn=Et,jt=Gt-1;jt>=0;jt--)if(!(B[oe[jt]]&r)){pn=B[oe[jt]];break}q(Qn,pn&(e|R)?Y:pn)}}if(Q.get(N))for(var Nt=0;Nt<oe.length;Nt++){var qn=oe[Nt];if(B[qn]&N)for(var zt=Nt-1;zt>=-1;zt--){var $n=zt===-1?Et:B[oe[zt]];if($n&i){$n===O&&q(qn,T);break}}}if(Q.get(O))for(var vn=0;vn<oe.length;vn++){var er=oe[vn];B[er]&O&&q(er,U)}if(Q.get(G)||Q.get(k))for(var Ut=1;Ut<oe.length-1;Ut++){var mn=oe[Ut];if(B[mn]&(G|k)){for(var vt=0,gn=0,yn=Ut-1;yn>=0&&(vt=B[oe[yn]],!!(vt&r));yn--);for(var bn=Ut+1;bn<oe.length&&(gn=B[oe[bn]],!!(gn&r));bn++);vt===gn&&(B[mn]===G?vt===N:vt&(N|T))&&q(mn,vt)}}if(Q.get(N))for(var qe=0;qe<oe.length;qe++){var $r=oe[qe];if(B[$r]&N){for(var Wt=qe-1;Wt>=0&&B[oe[Wt]]&(J|r);Wt--)q(oe[Wt],N);for(qe++;qe<oe.length&&B[oe[qe]]&(J|r|N);qe++)B[oe[qe]]!==N&&q(oe[qe],N)}}if(Q.get(J)||Q.get(G)||Q.get(k))for(var At=0;At<oe.length;At++){var tr=oe[At];if(B[tr]&(J|G|k)){q(tr,Y);for(var Vt=At-1;Vt>=0&&B[oe[Vt]]&r;Vt--)q(oe[Vt],Y);for(var Ht=At+1;Ht<oe.length&&B[oe[Ht]]&r;Ht++)q(oe[Ht],Y)}}if(Q.get(N))for(var Sn=0,nr=Et;Sn<oe.length;Sn++){var rr=oe[Sn],wn=B[rr];wn&N?nr===P&&q(rr,P):wn&i&&(nr=wn)}if(Q.get(a)){var kt=U|N|T,ar=kt|P,Yt=[];{for(var mt=[],gt=0;gt<oe.length;gt++)if(B[oe[gt]]&a){var Ct=F[oe[gt]],or=void 0;if(h(Ct)!==null)if(mt.length<63)mt.push({char:Ct,seqIndex:gt});else break;else if((or=x(Ct))!==null)for(var Mt=mt.length-1;Mt>=0;Mt--){var xn=mt[Mt].char;if(xn===or||xn===x(E(Ct))||h(E(xn))===Ct){Yt.push([mt[Mt].seqIndex,gt]),mt.length=Mt;break}}}Yt.sort(function(Ve,Je){return Ve[0]-Je[0]})}for(var _n=0;_n<Yt.length;_n++){for(var ir=Yt[_n],Xt=ir[0],Tn=ir[1],sr=!1,Ze=0,En=Xt+1;En<Tn;En++){var lr=oe[En];if(B[lr]&ar){sr=!0;var fr=B[lr]&kt?U:P;if(fr===pt){Ze=fr;break}}}if(sr&&!Ze){Ze=Et;for(var Un=Xt-1;Un>=0;Un--){var cr=oe[Un];if(B[cr]&ar){var ur=B[cr]&kt?U:P;ur!==pt?Ze=ur:Ze=pt;break}}}if(Ze){if(B[oe[Xt]]=B[oe[Tn]]=Ze,Ze!==pt){for(var Dt=Xt+1;Dt<oe.length;Dt++)if(!(B[oe[Dt]]&r)){u(F[oe[Dt]])&ue&&(B[oe[Dt]]=Ze);break}}if(Ze!==pt){for(var Pt=Tn+1;Pt<oe.length;Pt++)if(!(B[oe[Pt]]&r)){u(F[oe[Pt]])&ue&&(B[oe[Pt]]=Ze);break}}}}for(var st=0;st<oe.length;st++)if(B[oe[st]]&a){for(var dr=st,An=st,kn=Et,Lt=st-1;Lt>=0;Lt--)if(B[oe[Lt]]&r)dr=Lt;else{kn=B[oe[Lt]]&kt?U:P;break}for(var hr=qr,Ot=st+1;Ot<oe.length;Ot++)if(B[oe[Ot]]&(a|r))An=Ot;else{hr=B[oe[Ot]]&kt?U:P;break}for(var Cn=dr;Cn<=An;Cn++)B[oe[Cn]]=kn===hr?kn:pt;st=An}}}for(var Xe=X.start;Xe<=X.end;Xe++){var ea=Z[Xe],Kt=B[Xe];if(ea&1?Kt&(P|N|T)&&Z[Xe]++:Kt&U?Z[Xe]++:Kt&(T|N)&&(Z[Xe]+=2),Kt&r&&(Z[Xe]=Xe===0?X.level:Z[Xe-1]),Xe===X.end||u(F[Xe])&($|D))for(var Zt=Xe;Zt>=0&&u(F[Zt])&o;Zt--)Z[Zt]=X.level}}return{levels:Z,paragraphs:_e};function pr(Ve,Je){for(var He=Ve;He<F.length;He++){var lt=B[He];if(lt&(U|O))return 1;if(lt&(D|P)||Je&&lt===R)return 0;if(lt&e){var vr=ta(He);He=vr===-1?F.length:vr}}return 0}function ta(Ve){for(var Je=1,He=Ve+1;He<F.length;He++){var lt=B[He];if(lt&D)break;if(lt&R){if(--Je===0)return He}else lt&e&&Je++}return-1}}var le="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",K;function V(){if(!K){var F=b(le,!0),re=F.map,te=F.reverseMap;te.forEach(function(B,we){re.set(we,B)}),K=re}}function Te(F){return V(),K.get(F)||null}function be(F,re,te,B){var we=F.length;te=Math.max(0,te==null?0:+te),B=Math.min(we-1,B==null?we-1:+B);for(var Q=new Map,q=te;q<=B;q++)if(re[q]&1){var Z=Te(F[q]);Z!==null&&Q.set(q,Z)}return Q}function ee(F,re,te,B){var we=F.length;te=Math.max(0,te==null?0:+te),B=Math.min(we-1,B==null?we-1:+B);var Q=[];return re.paragraphs.forEach(function(q){var Z=Math.max(te,q.start),Se=Math.min(B,q.end);if(Z<Se){for(var _e=re.levels.slice(Z,Se+1),X=Se;X>=Z&&u(F[X])&o;X--)_e[X]=q.level;for(var he=q.level,Ee=1/0,Ue=0;Ue<_e.length;Ue++){var Ce=_e[Ue];Ce>he&&(he=Ce),Ce<Ee&&(Ee=Ce|1)}for(var Me=he;Me>=Ee;Me--)for(var pe=0;pe<_e.length;pe++)if(_e[pe]>=Me){for(var ae=pe;pe+1<_e.length&&_e[pe+1]>=Me;)pe++;pe>ae&&Q.push([ae+Z,pe+Z])}}}),Q}function ie(F,re,te,B){var we=ve(F,re,te,B),Q=[].concat(F);return we.forEach(function(q,Z){Q[Z]=(re.levels[q]&1?Te(F[q]):null)||F[q]}),Q.join("")}function ve(F,re,te,B){for(var we=ee(F,re,te,B),Q=[],q=0;q<F.length;q++)Q[q]=q;return we.forEach(function(Z){for(var Se=Z[0],_e=Z[1],X=Q.slice(Se,_e+1),he=X.length;he--;)Q[_e-he]=X[he]}),Q}return n.closingToOpeningBracket=x,n.getBidiCharType=u,n.getBidiCharTypeName=p,n.getCanonicalBracket=E,n.getEmbeddingLevels=H,n.getMirroredCharacter=Te,n.getMirroredCharactersMap=be,n.getReorderSegments=ee,n.getReorderedIndices=ve,n.getReorderedString=ie,n.openingToClosingBracket=h,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return c}const Vr=/\bvoid\s+main\s*\(\s*\)\s*{/g;function zn(c){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function d(s,t){let e=ua[t];return e?zn(e):s}return c.replace(n,d)}const je=[];for(let c=0;c<256;c++)je[c]=(c<16?"0":"")+c.toString(16);function za(){const c=Math.random()*4294967295|0,n=Math.random()*4294967295|0,d=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(je[c&255]+je[c>>8&255]+je[c>>16&255]+je[c>>24&255]+"-"+je[n&255]+je[n>>8&255]+"-"+je[n>>16&15|64]+je[n>>24&255]+"-"+je[d&63|128]+je[d>>8&255]+"-"+je[d>>16&255]+je[d>>24&255]+je[s&255]+je[s>>8&255]+je[s>>16&255]+je[s>>24&255]).toUpperCase()}const ft=Object.assign||function(){let c=arguments[0];for(let n=1,d=arguments.length;n<d;n++){let s=arguments[n];if(s)for(let t in s)s.hasOwnProperty(t)&&(c[t]=s[t])}return c},Wa=Date.now(),Ar=new WeakMap,kr=new Map;let Va=1e10;function Wn(c,n){const d=Ka(n);let s=Ar.get(c);if(s||Ar.set(c,s=Object.create(null)),s[d])return new s[d];const t=`_onBeforeCompile${d}`,e=function(o){c.onBeforeCompile.call(this,o);const l=this.customProgramCacheKey()+"|"+o.vertexShader+"|"+o.fragmentShader;let f=kr[l];if(!f){const u=Ha(o,n,d);f=kr[l]=u}o.vertexShader=f.vertexShader,o.fragmentShader=f.fragmentShader,ft(o.uniforms,this.uniforms),n.timeUniform&&(o.uniforms[n.timeUniform]={get value(){return Date.now()-Wa}}),this[t]&&this[t](o)},i=function(){return a(n.chained?c:c.clone())},a=function(o){const l=Object.create(o,r);return Object.defineProperty(l,"baseMaterial",{value:c}),Object.defineProperty(l,"id",{value:Va++}),l.uuid=za(),l.uniforms=ft({},o.uniforms,n.uniforms),l.defines=ft({},o.defines,n.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${d}`]="",l.extensions=ft({},o.extensions,n.extensions),l._listeners=void 0,l},r={constructor:{value:i},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return c.customProgramCacheKey()+"|"+d}},onBeforeCompile:{get(){return e},set(o){this[t]=o}},copy:{writable:!0,configurable:!0,value:function(o){return c.copy.call(this,o),!c.isShaderMaterial&&!c.isDerivedMaterial&&(ft(this.extensions,o.extensions),ft(this.defines,o.defines),ft(this.uniforms,Gn.clone(o.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const o=new c.constructor;return a(o).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let o=this._depthMaterial;return o||(o=this._depthMaterial=Wn(c.isDerivedMaterial?c.getDepthMaterial():new fa({depthPacking:ca}),n),o.defines.IS_DEPTH_MATERIAL="",o.uniforms=this.uniforms),o}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let o=this._distanceMaterial;return o||(o=this._distanceMaterial=Wn(c.isDerivedMaterial?c.getDistanceMaterial():new la,n),o.defines.IS_DISTANCE_MATERIAL="",o.uniforms=this.uniforms),o}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:o,_distanceMaterial:l}=this;o&&o.dispose(),l&&l.dispose(),c.dispose.call(this)}}};return s[d]=i,new i}function Ha({vertexShader:c,fragmentShader:n},d,s){let{vertexDefs:t,vertexMainIntro:e,vertexMainOutro:i,vertexTransform:a,fragmentDefs:r,fragmentMainIntro:o,fragmentMainOutro:l,fragmentColorTransform:f,customRewriter:u,timeUniform:p}=d;if(t=t||"",e=e||"",i=i||"",r=r||"",o=o||"",l=l||"",(a||u)&&(c=zn(c)),(f||u)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=zn(n)),u){let w=u({vertexShader:c,fragmentShader:n});c=w.vertexShader,n=w.fragmentShader}if(f){let w=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,b=>(w.push(b),"")),l=`${f}
${w.join(`
`)}
${l}`}if(p){const w=`
uniform float ${p};
`;t=w+t,r=w+r}return a&&(c=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${c}
`,t=`${t}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${a}
}
`,e=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${e}
`,c=c.replace(/\b(position|normal|uv)\b/g,(w,b,S,m)=>/\battribute\s+vec[23]\s+$/.test(m.substr(0,S))?b:`troika_${b}_${s}`)),c=Cr(c,s,t,e,i),n=Cr(n,s,r,o,l),{vertexShader:c,fragmentShader:n}}function Cr(c,n,d,s,t){return(s||t||d)&&(c=c.replace(Vr,`
${d}
void troikaOrigMain${n}() {`),c+=`
void main() {
  ${s}
  troikaOrigMain${n}();
  ${t}
}`),c}function Ya(c,n){return c==="uniforms"?void 0:typeof n=="function"?n.toString():n}let Xa=0;const Mr=new Map;function Ka(c){const n=JSON.stringify(c,Ya);let d=Mr.get(n);return d==null&&Mr.set(n,d=++Xa),d}function Za(c,n,d){const{defaultFontURL:s}=d,t=Object.create(null),e=1/0,i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function r(m,v){function y(){const h=x=>{console.error(`Failure loading font ${m}${m===s?"":"; trying fallback"}`,x),m!==s&&(m=s,y())};try{const x=new XMLHttpRequest;x.open("get",m,!0),x.responseType="arraybuffer",x.onload=function(){if(x.status>=400)h(new Error(x.statusText));else if(x.status>0)try{const E=c(x.response);v(E)}catch(E){h(E)}},x.onerror=h,x.send()}catch(x){h(x)}}y()}function o(m,v){m||(m=s);let y=t[m];y?y.pending?y.pending.push(v):v(y):(t[m]={pending:[v]},r(m,h=>{let x=t[m].pending;t[m]=h,x.forEach(E=>E(h))}))}function l({text:m="",font:v=s,sdfGlyphSize:y=64,fontSize:h=1,letterSpacing:x=0,lineHeight:E="normal",maxWidth:P=e,direction:U,textAlign:N="left",textIndent:G=0,whiteSpace:J="normal",overflowWrap:T="normal",anchorX:k=0,anchorY:D=0,includeCaretPositions:$=!1,chunkedBoundsSize:Y=8192,colorRanges:fe=null},ue,O=!1){const W=w(),_={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),h=+h,x=+x,P=+P,E=E||"normal",G=+G,o(v,M=>{const j=isFinite(P);let I=null,L=null,z=null,A=null,R=null,H=null,le=null,K=0,V=0,Te=J!=="nowrap";const{ascender:be,descender:ee,unitsPerEm:ie}=M;_.fontLoad=w()-W;const ve=w(),F=h/ie;E==="normal"&&(E=(be-ee)/ie),E=E*h;const re=(E-(be-ee)*F)/2,te=-(be*F+re),B=Math.min(E,(be-ee)*F),we=(be+ee)/2*F-B/2;let Q=G,q=new b;const Z=[q];M.forEachGlyph(m,h,x,(X,he,Ee)=>{const Ue=m.charAt(Ee),Ce=X.advanceWidth*F,Me=q.count;let pe;if("isEmpty"in X||(X.isWhitespace=!!Ue&&/\s/.test(Ue),X.canBreakAfter=!!Ue&&a.test(Ue),X.isEmpty=X.xMin===X.xMax||X.yMin===X.yMax||i.test(Ue)),!X.isWhitespace&&!X.isEmpty&&V++,Te&&j&&!X.isWhitespace&&he+Ce+Q>P&&Me){if(q.glyphAt(Me-1).glyphObj.canBreakAfter)pe=new b,Q=-he;else for(let g=Me;g--;)if(g===0&&T==="break-word"){pe=new b,Q=-he;break}else if(q.glyphAt(g).glyphObj.canBreakAfter){pe=q.splitAt(g+1);const C=pe.glyphAt(0).x;Q-=C;for(let ne=pe.count;ne--;)pe.glyphAt(ne).x-=C;break}pe&&(q.isSoftWrapped=!0,q=pe,Z.push(q),K=P)}let ae=q.glyphAt(q.count);ae.glyphObj=X,ae.x=he+Q,ae.width=Ce,ae.charIndex=Ee,Ue===`
`&&(q=new b,Z.push(q),Q=-(he+Ce+x*h)+G)}),Z.forEach(X=>{for(let he=X.count;he--;){let{glyphObj:Ee,x:Ue,width:Ce}=X.glyphAt(he);if(!Ee.isWhitespace){X.width=Ue+Ce,X.width>K&&(K=X.width);return}}});let Se=0,_e=0;if(k&&(typeof k=="number"?Se=-k:typeof k=="string"&&(Se=-K*(k==="left"?0:k==="center"?.5:k==="right"?1:u(k)))),D){if(typeof D=="number")_e=-D;else if(typeof D=="string"){let X=Z.length*E;_e=D==="top"?0:D==="top-baseline"?-te:D==="middle"?X/2:D==="bottom"?X:D==="bottom-baseline"?X-re+ee*F:u(D)*X}}if(!O){const X=n.getEmbeddingLevels(m,U);I=new Uint16Array(V),L=new Float32Array(V*2),z={},H=[e,e,-e,-e],le=[];let he=te;$&&(R=new Float32Array(m.length*3)),fe&&(A=new Uint8Array(V*3));let Ee=0,Ue=-1,Ce=-1,Me,pe;if(Z.forEach((ae,g)=>{let{count:C,width:ne}=ae;if(C>0){let se=0;for(let xe=C;xe--&&ae.glyphAt(xe).glyphObj.isWhitespace;)se++;let me=0,Oe=0;if(N==="center")me=(K-ne)/2;else if(N==="right")me=K-ne;else if(N==="justify"&&ae.isSoftWrapped){let xe=0;for(let ye=C-se;ye--;)ae.glyphAt(ye).glyphObj.isWhitespace&&xe++;Oe=(K-ne)/xe}if(Oe||me){let xe=0;for(let ye=0;ye<C;ye++){let De=ae.glyphAt(ye);const Le=De.glyphObj;De.x+=me+xe,Oe!==0&&Le.isWhitespace&&ye<C-se&&(xe+=Oe,De.width+=Oe)}}const We=n.getReorderSegments(m,X,ae.glyphAt(0).charIndex,ae.glyphAt(ae.count-1).charIndex);for(let xe=0;xe<We.length;xe++){const[ye,De]=We[xe];let Le=1/0,Ae=-1/0;for(let Pe=0;Pe<C;Pe++)if(ae.glyphAt(Pe).charIndex>=ye){let Qe=Pe,Be=Pe;for(;Be<C;Be++){let Re=ae.glyphAt(Be);if(Re.charIndex>De)break;Be<C-se&&(Le=Math.min(Le,Re.x),Ae=Math.max(Ae,Re.x+Re.width))}for(let Re=Qe;Re<Be;Re++){const Ye=ae.glyphAt(Re);Ye.x=Ae-(Ye.x+Ye.width-Le)}break}}let Fe;const at=xe=>Fe=xe;for(let xe=0;xe<C;xe++){let ye=ae.glyphAt(xe);Fe=ye.glyphObj;const De=Fe.index,Le=X.levels[ye.charIndex]&1;if(Le){const Ae=n.getMirroredCharacter(m[ye.charIndex]);Ae&&M.forEachGlyph(Ae,0,0,at)}if($){const{charIndex:Ae}=ye,Pe=ye.x+Se,Qe=ye.x+ye.width+Se;R[Ae*3]=Le?Qe:Pe,R[Ae*3+1]=Le?Pe:Qe,R[Ae*3+2]=he+we+_e;const Be=Ae-Ue;Be>1&&p(R,Ue,Be),Ue=Ae}if(fe){const{charIndex:Ae}=ye;for(;Ae>Ce;)Ce++,fe.hasOwnProperty(Ce)&&(pe=fe[Ce])}if(!Fe.isWhitespace&&!Fe.isEmpty){const Ae=Ee++;z[De]||(z[De]={path:Fe.path,pathBounds:[Fe.xMin,Fe.yMin,Fe.xMax,Fe.yMax]});const Pe=ye.x+Se,Qe=he+_e;L[Ae*2]=Pe,L[Ae*2+1]=Qe;const Be=Pe+Fe.xMin*F,Re=Qe+Fe.yMin*F,Ye=Pe+Fe.xMax*F,ot=Qe+Fe.yMax*F;Be<H[0]&&(H[0]=Be),Re<H[1]&&(H[1]=Re),Ye>H[2]&&(H[2]=Ye),ot>H[3]&&(H[3]=ot),Ae%Y===0&&(Me={start:Ae,end:Ae,rect:[e,e,-e,-e]},le.push(Me)),Me.end++;const Ke=Me.rect;if(Be<Ke[0]&&(Ke[0]=Be),Re<Ke[1]&&(Ke[1]=Re),Ye>Ke[2]&&(Ke[2]=Ye),ot>Ke[3]&&(Ke[3]=ot),I[Ae]=De,fe){const it=Ae*3;A[it]=pe>>16&255,A[it+1]=pe>>8&255,A[it+2]=pe&255}}}}he-=E}),R){const ae=m.length-Ue;ae>1&&p(R,Ue,ae)}}_.typesetting=w()-ve,ue({glyphIds:I,glyphPositions:L,glyphData:z,caretPositions:R,caretHeight:B,glyphColors:A,chunkedBounds:le,fontSize:h,unitsPerEm:ie,ascender:be*F,descender:ee*F,lineHeight:E,topBaseline:te,blockBounds:[Se,_e-Z.length*E,Se+K,_e],visibleBounds:H,timings:_})})}function f(m,v){l(m,y=>{const[h,x,E,P]=y.blockBounds;v({width:E-h,height:P-x})},{})}function u(m){let v=m.match(/^([\d.]+)%$/),y=v?parseFloat(v[1]):NaN;return isNaN(y)?0:y/100}function p(m,v,y){const h=m[v*3],x=m[v*3+1],E=m[v*3+2],P=(x-h)/y;for(let U=0;U<y;U++){const N=(v+U)*3;m[N]=h+P*U,m[N+1]=h+P*(U+1),m[N+2]=E}}function w(){return(self.performance||Date).now()}function b(){this.data=[]}const S=["glyphObj","x","width","charIndex"];return b.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/S.length)},glyphAt(m){let v=b.flyweight;return v.data=this.data,v.index=m,v},splitAt(m){let v=new b;return v.data=this.data.splice(m*S.length),v}},b.flyweight=S.reduce((m,v,y,h)=>(Object.defineProperty(m,v,{get(){return this.data[this.index*S.length+y]},set(x){this.data[this.index*S.length+y]=x}}),m),{data:null,index:0}),{typeset:l,measure:f,loadFont:o}}const ct=()=>(self.performance||Date).now(),ln=Wr();let Dr;function Ja(c,n,d,s,t,e,i,a,r,o,l=!0){return l?Qa(c,n,d,s,t,e,i,a,r,o).then(null,f=>(Dr||(console.warn("WebGL SDF generation failed, falling back to JS",f),Dr=!0),Pr(c,n,d,s,t,e,i,a,r,o))):Pr(c,n,d,s,t,e,i,a,r,o)}const Qa=(function(){const c=[];let d=0;function s(){const t=ct();for(;c.length&&ct()-t<5;)c.shift()();d=c.length?setTimeout(s,0):0}return(...t)=>{const e=rt();return c.push(()=>{const i=ct();try{ln.webgl.generateIntoCanvas(...t),e.resolve({timing:ct()-i})}catch(a){e.reject(a)}}),d||(d=setTimeout(s,0)),e}})(),Pr=(function(){const d={};let s=0;return function(t,e,i,a,r,o,l,f,u,p){const w="TroikaTextSDFGenerator_JS_"+s++%4;let b=d[w];return b||(b=d[w]={workerModule:Tt({name:w,workerId:w,dependencies:[Wr,ct],init(S,m){const v=S().javascript.generate;return function(...y){const h=m();return{textureData:v(...y),timing:m()-h}}},getTransferables(S){return[S.textureData.buffer]}}),requests:0,idleTimer:null}),b.requests++,clearTimeout(b.idleTimer),b.workerModule(t,e,i,a,r,o).then(({textureData:S,timing:m})=>{const v=ct(),y=new Uint8Array(S.length*4);for(let h=0;h<S.length;h++)y[h*4+p]=S[h];return ln.webglUtils.renderImageData(l,y,f,u,t,e,1<<3-p),m+=ct()-v,--b.requests===0&&(b.idleTimer=setTimeout(()=>{Ia(w)},2e3)),{timing:m}})}})();function qa(c){c._warm||(ln.webgl.isSupported(c),c._warm=!0)}const $a=ln.webglUtils.resizeWebGLCanvasWithoutClearing;function eo(){return typeof window>"u"&&(self.window=self),(function(c){var n={parse:function(t){var e=n._bin,i=new Uint8Array(t);if(e.readASCII(i,0,4)=="ttcf"){var a=4;e.readUshort(i,a),a+=2,e.readUshort(i,a),a+=2;var r=e.readUint(i,a);a+=4;for(var o=[],l=0;l<r;l++){var f=e.readUint(i,a);a+=4,o.push(n._readFont(i,f))}return o}return[n._readFont(i,0)]},_readFont:function(t,e){var i=n._bin,a=e;i.readFixed(t,e),e+=4;var r=i.readUshort(t,e);e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],l={_data:t,_offset:a},f={},u=0;u<r;u++){var p=i.readASCII(t,e,4);e+=4,i.readUint(t,e),e+=4;var w=i.readUint(t,e);e+=4;var b=i.readUint(t,e);e+=4,f[p]={offset:w,length:b}}for(u=0;u<o.length;u++){var S=o[u];f[S]&&(l[S.trim()]=n[S.trim()].parse(t,f[S].offset,f[S].length,l))}return l},_tabOffset:function(t,e,i){for(var a=n._bin,r=a.readUshort(t,i+4),o=i+12,l=0;l<r;l++){var f=a.readASCII(t,o,4);o+=4,a.readUint(t,o),o+=4;var u=a.readUint(t,o);if(o+=4,a.readUint(t,o),o+=4,f==e)return u}return 0}};n._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return n._bin.readShort(t,e)/16384},readInt:function(t,e){return n._bin._view(t).getInt32(e)},readInt8:function(t,e){return n._bin._view(t).getInt8(e)},readShort:function(t,e){return n._bin._view(t).getInt16(e)},readUshort:function(t,e){return n._bin._view(t).getUint16(e)},readUshorts:function(t,e,i){for(var a=[],r=0;r<i;r++)a.push(n._bin.readUshort(t,e+2*r));return a},readUint:function(t,e){return n._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*n._bin.readUint(t,e)+n._bin.readUint(t,e+4)},readASCII:function(t,e,i){for(var a="",r=0;r<i;r++)a+=String.fromCharCode(t[e+r]);return a},readUnicode:function(t,e,i){for(var a="",r=0;r<i;r++){var o=t[e++]<<8|t[e++];a+=String.fromCharCode(o)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,i){var a=n._bin._tdec;return a&&e==0&&i==t.length?a.decode(t):n._bin.readASCII(t,e,i)},readBytes:function(t,e,i){for(var a=[],r=0;r<i;r++)a.push(t[e+r]);return a},readASCIIArray:function(t,e,i){for(var a=[],r=0;r<i;r++)a.push(String.fromCharCode(t[e+r]));return a},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},n._lctf={},n._lctf.parse=function(t,e,i,a,r){var o=n._bin,l={},f=e;o.readFixed(t,e),e+=4;var u=o.readUshort(t,e);e+=2;var p=o.readUshort(t,e);e+=2;var w=o.readUshort(t,e);return e+=2,l.scriptList=n._lctf.readScriptList(t,f+u),l.featureList=n._lctf.readFeatureList(t,f+p),l.lookupList=n._lctf.readLookupList(t,f+w,r),l},n._lctf.readLookupList=function(t,e,i){var a=n._bin,r=e,o=[],l=a.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var u=a.readUshort(t,e);e+=2;var p=n._lctf.readLookupTable(t,r+u,i);o.push(p)}return o},n._lctf.readLookupTable=function(t,e,i){var a=n._bin,r=e,o={tabs:[]};o.ltype=a.readUshort(t,e),e+=2,o.flag=a.readUshort(t,e),e+=2;var l=a.readUshort(t,e);e+=2;for(var f=o.ltype,u=0;u<l;u++){var p=a.readUshort(t,e);e+=2;var w=i(t,f,r+p,o);o.tabs.push(w)}return o},n._lctf.numOfOnes=function(t){for(var e=0,i=0;i<32;i++)(t>>>i&1)!=0&&e++;return e},n._lctf.readClassDef=function(t,e){var i=n._bin,a=[],r=i.readUshort(t,e);if(e+=2,r==1){var o=i.readUshort(t,e);e+=2;var l=i.readUshort(t,e);e+=2;for(var f=0;f<l;f++)a.push(o+f),a.push(o+f),a.push(i.readUshort(t,e)),e+=2}if(r==2){var u=i.readUshort(t,e);for(e+=2,f=0;f<u;f++)a.push(i.readUshort(t,e)),e+=2,a.push(i.readUshort(t,e)),e+=2,a.push(i.readUshort(t,e)),e+=2}return a},n._lctf.getInterval=function(t,e){for(var i=0;i<t.length;i+=3){var a=t[i],r=t[i+1];if(t[i+2],a<=e&&e<=r)return i}return-1},n._lctf.readCoverage=function(t,e){var i=n._bin,a={};a.fmt=i.readUshort(t,e),e+=2;var r=i.readUshort(t,e);return e+=2,a.fmt==1&&(a.tab=i.readUshorts(t,e,r)),a.fmt==2&&(a.tab=i.readUshorts(t,e,3*r)),a},n._lctf.coverageIndex=function(t,e){var i=t.tab;if(t.fmt==1)return i.indexOf(e);if(t.fmt==2){var a=n._lctf.getInterval(i,e);if(a!=-1)return i[a+2]+(e-i[a])}return-1},n._lctf.readFeatureList=function(t,e){var i=n._bin,a=e,r=[],o=i.readUshort(t,e);e+=2;for(var l=0;l<o;l++){var f=i.readASCII(t,e,4);e+=4;var u=i.readUshort(t,e);e+=2;var p=n._lctf.readFeatureTable(t,a+u);p.tag=f.trim(),r.push(p)}return r},n._lctf.readFeatureTable=function(t,e){var i=n._bin,a=e,r={},o=i.readUshort(t,e);e+=2,o>0&&(r.featureParams=a+o);var l=i.readUshort(t,e);e+=2,r.tab=[];for(var f=0;f<l;f++)r.tab.push(i.readUshort(t,e+2*f));return r},n._lctf.readScriptList=function(t,e){var i=n._bin,a=e,r={},o=i.readUshort(t,e);e+=2;for(var l=0;l<o;l++){var f=i.readASCII(t,e,4);e+=4;var u=i.readUshort(t,e);e+=2,r[f.trim()]=n._lctf.readScriptTable(t,a+u)}return r},n._lctf.readScriptTable=function(t,e){var i=n._bin,a=e,r={},o=i.readUshort(t,e);e+=2,r.default=n._lctf.readLangSysTable(t,a+o);var l=i.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var u=i.readASCII(t,e,4);e+=4;var p=i.readUshort(t,e);e+=2,r[u.trim()]=n._lctf.readLangSysTable(t,a+p)}return r},n._lctf.readLangSysTable=function(t,e){var i=n._bin,a={};i.readUshort(t,e),e+=2,a.reqFeature=i.readUshort(t,e),e+=2;var r=i.readUshort(t,e);return e+=2,a.features=i.readUshorts(t,e,r),a},n.CFF={},n.CFF.parse=function(t,e,i){var a=n._bin;(t=new Uint8Array(t.buffer,e,i))[e=0],t[++e],t[++e],t[++e],e++;var r=[];e=n.CFF.readIndex(t,e,r);for(var o=[],l=0;l<r.length-1;l++)o.push(a.readASCII(t,e+r[l],r[l+1]-r[l]));e+=r[r.length-1];var f=[];e=n.CFF.readIndex(t,e,f);var u=[];for(l=0;l<f.length-1;l++)u.push(n.CFF.readDict(t,e+f[l],e+f[l+1]));e+=f[f.length-1];var p=u[0],w=[];e=n.CFF.readIndex(t,e,w);var b=[];for(l=0;l<w.length-1;l++)b.push(a.readASCII(t,e+w[l],w[l+1]-w[l]));if(e+=w[w.length-1],n.CFF.readSubrs(t,e,p),p.CharStrings){e=p.CharStrings,w=[],e=n.CFF.readIndex(t,e,w);var S=[];for(l=0;l<w.length-1;l++)S.push(a.readBytes(t,e+w[l],w[l+1]-w[l]));p.CharStrings=S}if(p.ROS){e=p.FDArray;var m=[];for(e=n.CFF.readIndex(t,e,m),p.FDArray=[],l=0;l<m.length-1;l++){var v=n.CFF.readDict(t,e+m[l],e+m[l+1]);n.CFF._readFDict(t,v,b),p.FDArray.push(v)}e+=m[m.length-1],e=p.FDSelect,p.FDSelect=[];var y=t[e];if(e++,y!=3)throw y;var h=a.readUshort(t,e);for(e+=2,l=0;l<h+1;l++)p.FDSelect.push(a.readUshort(t,e),t[e+2]),e+=3}return p.Encoding&&(p.Encoding=n.CFF.readEncoding(t,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=n.CFF.readCharset(t,p.charset,p.CharStrings.length)),n.CFF._readFDict(t,p,b),p},n.CFF._readFDict=function(t,e,i){var a;for(var r in e.Private&&(a=e.Private[1],e.Private=n.CFF.readDict(t,a,a+e.Private[0]),e.Private.Subrs&&n.CFF.readSubrs(t,a+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(r)!=-1&&(e[r]=i[e[r]-426+35])},n.CFF.readSubrs=function(t,e,i){var a=n._bin,r=[];e=n.CFF.readIndex(t,e,r);var o,l=r.length;o=l<1240?107:l<33900?1131:32768,i.Bias=o,i.Subrs=[];for(var f=0;f<r.length-1;f++)i.Subrs.push(a.readBytes(t,e+r[f],r[f+1]-r[f]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(t,e){for(var i=0;i<t.charset.length;i++)if(t.charset[i]==e)return i;return-1},n.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:n.CFF.glyphByUnicode(t,n.CFF.tableSE[e])},n.CFF.readEncoding=function(t,e,i){n._bin;var a=[".notdef"],r=t[e];if(e++,r!=0)throw"error: unknown encoding format: "+r;var o=t[e];e++;for(var l=0;l<o;l++)a.push(t[e+l]);return a},n.CFF.readCharset=function(t,e,i){var a=n._bin,r=[".notdef"],o=t[e];if(e++,o==0)for(var l=0;l<i;l++){var f=a.readUshort(t,e);e+=2,r.push(f)}else{if(o!=1&&o!=2)throw"error: format: "+o;for(;r.length<i;){f=a.readUshort(t,e),e+=2;var u=0;for(o==1?(u=t[e],e++):(u=a.readUshort(t,e),e+=2),l=0;l<=u;l++)r.push(f),f++}}return r},n.CFF.readIndex=function(t,e,i){var a=n._bin,r=a.readUshort(t,e)+1,o=t[e+=2];if(e++,o==1)for(var l=0;l<r;l++)i.push(t[e+l]);else if(o==2)for(l=0;l<r;l++)i.push(a.readUshort(t,e+2*l));else if(o==3)for(l=0;l<r;l++)i.push(16777215&a.readUint(t,e+3*l-1));else if(r!=1)throw"unsupported offset size: "+o+", count: "+r;return(e+=r*o)-1},n.CFF.getCharString=function(t,e,i){var a=n._bin,r=t[e],o=t[e+1];t[e+2],t[e+3],t[e+4];var l=1,f=null,u=null;r<=20&&(f=r,l=1),r==12&&(f=100*r+o,l=2),21<=r&&r<=27&&(f=r,l=1),r==28&&(u=a.readShort(t,e+1),l=3),29<=r&&r<=31&&(f=r,l=1),32<=r&&r<=246&&(u=r-139,l=1),247<=r&&r<=250&&(u=256*(r-247)+o+108,l=2),251<=r&&r<=254&&(u=256*-(r-251)-o-108,l=2),r==255&&(u=a.readInt(t,e+1)/65535,l=5),i.val=u??"o"+f,i.size=l},n.CFF.readCharString=function(t,e,i){for(var a=e+i,r=n._bin,o=[];e<a;){var l=t[e],f=t[e+1];t[e+2],t[e+3],t[e+4];var u=1,p=null,w=null;l<=20&&(p=l,u=1),l==12&&(p=100*l+f,u=2),l!=19&&l!=20||(p=l,u=2),21<=l&&l<=27&&(p=l,u=1),l==28&&(w=r.readShort(t,e+1),u=3),29<=l&&l<=31&&(p=l,u=1),32<=l&&l<=246&&(w=l-139,u=1),247<=l&&l<=250&&(w=256*(l-247)+f+108,u=2),251<=l&&l<=254&&(w=256*-(l-251)-f-108,u=2),l==255&&(w=r.readInt(t,e+1)/65535,u=5),o.push(w??"o"+p),e+=u}return o},n.CFF.readDict=function(t,e,i){for(var a=n._bin,r={},o=[];e<i;){var l=t[e],f=t[e+1];t[e+2],t[e+3],t[e+4];var u=1,p=null,w=null;if(l==28&&(w=a.readShort(t,e+1),u=3),l==29&&(w=a.readInt(t,e+1),u=5),32<=l&&l<=246&&(w=l-139,u=1),247<=l&&l<=250&&(w=256*(l-247)+f+108,u=2),251<=l&&l<=254&&(w=256*-(l-251)-f-108,u=2),l==255)throw w=a.readInt(t,e+1)/65535,u=5,"unknown number";if(l==30){var b=[];for(u=1;;){var S=t[e+u];u++;var m=S>>4,v=15&S;if(m!=15&&b.push(m),v!=15&&b.push(v),v==15)break}for(var y="",h=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],x=0;x<b.length;x++)y+=h[b[x]];w=parseFloat(y)}l<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][l],u=1,l==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],u=2)),p!=null?(r[p]=o.length==1?o[0]:o,o=[]):o.push(w),e+=u}return r},n.cmap={},n.cmap.parse=function(t,e,i){t=new Uint8Array(t.buffer,e,i),e=0;var a=n._bin,r={};a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);e+=2;var l=[];r.tables=[];for(var f=0;f<o;f++){var u=a.readUshort(t,e);e+=2;var p=a.readUshort(t,e);e+=2;var w=a.readUint(t,e);e+=4;var b="p"+u+"e"+p,S=l.indexOf(w);if(S==-1){var m;S=r.tables.length,l.push(w);var v=a.readUshort(t,w);v==0?m=n.cmap.parse0(t,w):v==4?m=n.cmap.parse4(t,w):v==6?m=n.cmap.parse6(t,w):v==12?m=n.cmap.parse12(t,w):console.debug("unknown format: "+v,u,p,w),r.tables.push(m)}if(r[b]!=null)throw"multiple tables for one platform+encoding";r[b]=S}return r},n.cmap.parse0=function(t,e){var i=n._bin,a={};a.format=i.readUshort(t,e),e+=2;var r=i.readUshort(t,e);e+=2,i.readUshort(t,e),e+=2,a.map=[];for(var o=0;o<r-6;o++)a.map.push(t[e+o]);return a},n.cmap.parse4=function(t,e){var i=n._bin,a=e,r={};r.format=i.readUshort(t,e),e+=2;var o=i.readUshort(t,e);e+=2,i.readUshort(t,e),e+=2;var l=i.readUshort(t,e);e+=2;var f=l/2;r.searchRange=i.readUshort(t,e),e+=2,r.entrySelector=i.readUshort(t,e),e+=2,r.rangeShift=i.readUshort(t,e),e+=2,r.endCount=i.readUshorts(t,e,f),e+=2*f,e+=2,r.startCount=i.readUshorts(t,e,f),e+=2*f,r.idDelta=[];for(var u=0;u<f;u++)r.idDelta.push(i.readShort(t,e)),e+=2;for(r.idRangeOffset=i.readUshorts(t,e,f),e+=2*f,r.glyphIdArray=[];e<a+o;)r.glyphIdArray.push(i.readUshort(t,e)),e+=2;return r},n.cmap.parse6=function(t,e){var i=n._bin,a={};a.format=i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2,a.firstCode=i.readUshort(t,e),e+=2;var r=i.readUshort(t,e);e+=2,a.glyphIdArray=[];for(var o=0;o<r;o++)a.glyphIdArray.push(i.readUshort(t,e)),e+=2;return a},n.cmap.parse12=function(t,e){var i=n._bin,a={};a.format=i.readUshort(t,e),e+=2,e+=2,i.readUint(t,e),e+=4,i.readUint(t,e),e+=4;var r=i.readUint(t,e);e+=4,a.groups=[];for(var o=0;o<r;o++){var l=e+12*o,f=i.readUint(t,l+0),u=i.readUint(t,l+4),p=i.readUint(t,l+8);a.groups.push([f,u,p])}return a},n.glyf={},n.glyf.parse=function(t,e,i,a){for(var r=[],o=0;o<a.maxp.numGlyphs;o++)r.push(null);return r},n.glyf._parseGlyf=function(t,e){var i=n._bin,a=t._data,r=n._tabOffset(a,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var o={};if(o.noc=i.readShort(a,r),r+=2,o.xMin=i.readShort(a,r),r+=2,o.yMin=i.readShort(a,r),r+=2,o.xMax=i.readShort(a,r),r+=2,o.yMax=i.readShort(a,r),r+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var l=0;l<o.noc;l++)o.endPts.push(i.readUshort(a,r)),r+=2;var f=i.readUshort(a,r);if(r+=2,a.length-r<f)return null;o.instructions=i.readBytes(a,r,f),r+=f;var u=o.endPts[o.noc-1]+1;for(o.flags=[],l=0;l<u;l++){var p=a[r];if(r++,o.flags.push(p),(8&p)!=0){var w=a[r];r++;for(var b=0;b<w;b++)o.flags.push(p),l++}}for(o.xs=[],l=0;l<u;l++){var S=(2&o.flags[l])!=0,m=(16&o.flags[l])!=0;S?(o.xs.push(m?a[r]:-a[r]),r++):m?o.xs.push(0):(o.xs.push(i.readShort(a,r)),r+=2)}for(o.ys=[],l=0;l<u;l++)S=(4&o.flags[l])!=0,m=(32&o.flags[l])!=0,S?(o.ys.push(m?a[r]:-a[r]),r++):m?o.ys.push(0):(o.ys.push(i.readShort(a,r)),r+=2);var v=0,y=0;for(l=0;l<u;l++)v+=o.xs[l],y+=o.ys[l],o.xs[l]=v,o.ys[l]=y}else{var h;o.parts=[];do{h=i.readUshort(a,r),r+=2;var x={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(x),x.glyphIndex=i.readUshort(a,r),r+=2,1&h){var E=i.readShort(a,r);r+=2;var P=i.readShort(a,r);r+=2}else E=i.readInt8(a,r),r++,P=i.readInt8(a,r),r++;2&h?(x.m.tx=E,x.m.ty=P):(x.p1=E,x.p2=P),8&h?(x.m.a=x.m.d=i.readF2dot14(a,r),r+=2):64&h?(x.m.a=i.readF2dot14(a,r),r+=2,x.m.d=i.readF2dot14(a,r),r+=2):128&h&&(x.m.a=i.readF2dot14(a,r),r+=2,x.m.b=i.readF2dot14(a,r),r+=2,x.m.c=i.readF2dot14(a,r),r+=2,x.m.d=i.readF2dot14(a,r),r+=2)}while(32&h);if(256&h){var U=i.readUshort(a,r);for(r+=2,o.instr=[],l=0;l<U;l++)o.instr.push(a[r]),r++}}return o},n.GPOS={},n.GPOS.parse=function(t,e,i,a){return n._lctf.parse(t,e,i,a,n.GPOS.subt)},n.GPOS.subt=function(t,e,i,a){var r=n._bin,o=i,l={};if(l.fmt=r.readUshort(t,i),i+=2,e==1||e==2||e==3||e==7||e==8&&l.fmt<=2){var f=r.readUshort(t,i);i+=2,l.coverage=n._lctf.readCoverage(t,f+o)}if(e==1&&l.fmt==1){var u=r.readUshort(t,i);i+=2;var p=n._lctf.numOfOnes(u);u!=0&&(l.pos=n.GPOS.readValueRecord(t,i,u))}else if(e==2&&l.fmt>=1&&l.fmt<=2){u=r.readUshort(t,i),i+=2;var w=r.readUshort(t,i);i+=2,p=n._lctf.numOfOnes(u);var b=n._lctf.numOfOnes(w);if(l.fmt==1){l.pairsets=[];var S=r.readUshort(t,i);i+=2;for(var m=0;m<S;m++){var v=o+r.readUshort(t,i);i+=2;var y=r.readUshort(t,v);v+=2;for(var h=[],x=0;x<y;x++){var E=r.readUshort(t,v);v+=2,u!=0&&(T=n.GPOS.readValueRecord(t,v,u),v+=2*p),w!=0&&(k=n.GPOS.readValueRecord(t,v,w),v+=2*b),h.push({gid2:E,val1:T,val2:k})}l.pairsets.push(h)}}if(l.fmt==2){var P=r.readUshort(t,i);i+=2;var U=r.readUshort(t,i);i+=2;var N=r.readUshort(t,i);i+=2;var G=r.readUshort(t,i);for(i+=2,l.classDef1=n._lctf.readClassDef(t,o+P),l.classDef2=n._lctf.readClassDef(t,o+U),l.matrix=[],m=0;m<N;m++){var J=[];for(x=0;x<G;x++){var T=null,k=null;u!=0&&(T=n.GPOS.readValueRecord(t,i,u),i+=2*p),w!=0&&(k=n.GPOS.readValueRecord(t,i,w),i+=2*b),J.push({val1:T,val2:k})}l.matrix.push(J)}}}else{if(e==9&&l.fmt==1){var D=r.readUshort(t,i);i+=2;var $=r.readUint(t,i);if(i+=4,a.ltype==9)a.ltype=D;else if(a.ltype!=D)throw"invalid extension substitution";return n.GPOS.subt(t,a.ltype,o+$)}console.debug("unsupported GPOS table LookupType",e,"format",l.fmt)}return l},n.GPOS.readValueRecord=function(t,e,i){var a=n._bin,r=[];return r.push(1&i?a.readShort(t,e):0),e+=1&i?2:0,r.push(2&i?a.readShort(t,e):0),e+=2&i?2:0,r.push(4&i?a.readShort(t,e):0),e+=4&i?2:0,r.push(8&i?a.readShort(t,e):0),e+=8&i?2:0,r},n.GSUB={},n.GSUB.parse=function(t,e,i,a){return n._lctf.parse(t,e,i,a,n.GSUB.subt)},n.GSUB.subt=function(t,e,i,a){var r=n._bin,o=i,l={};if(l.fmt=r.readUshort(t,i),i+=2,e!=1&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==4||e==5&&l.fmt<=2||e==6&&l.fmt<=2){var f=r.readUshort(t,i);i+=2,l.coverage=n._lctf.readCoverage(t,o+f)}if(e==1&&l.fmt>=1&&l.fmt<=2){if(l.fmt==1)l.delta=r.readShort(t,i),i+=2;else if(l.fmt==2){var u=r.readUshort(t,i);i+=2,l.newg=r.readUshorts(t,i,u),i+=2*l.newg.length}}else if(e==4){l.vals=[],u=r.readUshort(t,i),i+=2;for(var p=0;p<u;p++){var w=r.readUshort(t,i);i+=2,l.vals.push(n.GSUB.readLigatureSet(t,o+w))}}else if(e==5&&l.fmt==2){if(l.fmt==2){var b=r.readUshort(t,i);i+=2,l.cDef=n._lctf.readClassDef(t,o+b),l.scset=[];var S=r.readUshort(t,i);for(i+=2,p=0;p<S;p++){var m=r.readUshort(t,i);i+=2,l.scset.push(m==0?null:n.GSUB.readSubClassSet(t,o+m))}}}else if(e==6&&l.fmt==3){if(l.fmt==3){for(p=0;p<3;p++){u=r.readUshort(t,i),i+=2;for(var v=[],y=0;y<u;y++)v.push(n._lctf.readCoverage(t,o+r.readUshort(t,i+2*y)));i+=2*u,p==0&&(l.backCvg=v),p==1&&(l.inptCvg=v),p==2&&(l.ahedCvg=v)}u=r.readUshort(t,i),i+=2,l.lookupRec=n.GSUB.readSubstLookupRecords(t,i,u)}}else{if(e==7&&l.fmt==1){var h=r.readUshort(t,i);i+=2;var x=r.readUint(t,i);if(i+=4,a.ltype==9)a.ltype=h;else if(a.ltype!=h)throw"invalid extension substitution";return n.GSUB.subt(t,a.ltype,o+x)}console.debug("unsupported GSUB table LookupType",e,"format",l.fmt)}return l},n.GSUB.readSubClassSet=function(t,e){var i=n._bin.readUshort,a=e,r=[],o=i(t,e);e+=2;for(var l=0;l<o;l++){var f=i(t,e);e+=2,r.push(n.GSUB.readSubClassRule(t,a+f))}return r},n.GSUB.readSubClassRule=function(t,e){var i=n._bin.readUshort,a={},r=i(t,e),o=i(t,e+=2);e+=2,a.input=[];for(var l=0;l<r-1;l++)a.input.push(i(t,e)),e+=2;return a.substLookupRecords=n.GSUB.readSubstLookupRecords(t,e,o),a},n.GSUB.readSubstLookupRecords=function(t,e,i){for(var a=n._bin.readUshort,r=[],o=0;o<i;o++)r.push(a(t,e),a(t,e+2)),e+=4;return r},n.GSUB.readChainSubClassSet=function(t,e){var i=n._bin,a=e,r=[],o=i.readUshort(t,e);e+=2;for(var l=0;l<o;l++){var f=i.readUshort(t,e);e+=2,r.push(n.GSUB.readChainSubClassRule(t,a+f))}return r},n.GSUB.readChainSubClassRule=function(t,e){for(var i=n._bin,a={},r=["backtrack","input","lookahead"],o=0;o<r.length;o++){var l=i.readUshort(t,e);e+=2,o==1&&l--,a[r[o]]=i.readUshorts(t,e,l),e+=2*a[r[o]].length}return l=i.readUshort(t,e),e+=2,a.subst=i.readUshorts(t,e,2*l),e+=2*a.subst.length,a},n.GSUB.readLigatureSet=function(t,e){var i=n._bin,a=e,r=[],o=i.readUshort(t,e);e+=2;for(var l=0;l<o;l++){var f=i.readUshort(t,e);e+=2,r.push(n.GSUB.readLigature(t,a+f))}return r},n.GSUB.readLigature=function(t,e){var i=n._bin,a={chain:[]};a.nglyph=i.readUshort(t,e),e+=2;var r=i.readUshort(t,e);e+=2;for(var o=0;o<r-1;o++)a.chain.push(i.readUshort(t,e)),e+=2;return a},n.head={},n.head.parse=function(t,e,i){var a=n._bin,r={};return a.readFixed(t,e),e+=4,r.fontRevision=a.readFixed(t,e),e+=4,a.readUint(t,e),e+=4,a.readUint(t,e),e+=4,r.flags=a.readUshort(t,e),e+=2,r.unitsPerEm=a.readUshort(t,e),e+=2,r.created=a.readUint64(t,e),e+=8,r.modified=a.readUint64(t,e),e+=8,r.xMin=a.readShort(t,e),e+=2,r.yMin=a.readShort(t,e),e+=2,r.xMax=a.readShort(t,e),e+=2,r.yMax=a.readShort(t,e),e+=2,r.macStyle=a.readUshort(t,e),e+=2,r.lowestRecPPEM=a.readUshort(t,e),e+=2,r.fontDirectionHint=a.readShort(t,e),e+=2,r.indexToLocFormat=a.readShort(t,e),e+=2,r.glyphDataFormat=a.readShort(t,e),e+=2,r},n.hhea={},n.hhea.parse=function(t,e,i){var a=n._bin,r={};return a.readFixed(t,e),e+=4,r.ascender=a.readShort(t,e),e+=2,r.descender=a.readShort(t,e),e+=2,r.lineGap=a.readShort(t,e),e+=2,r.advanceWidthMax=a.readUshort(t,e),e+=2,r.minLeftSideBearing=a.readShort(t,e),e+=2,r.minRightSideBearing=a.readShort(t,e),e+=2,r.xMaxExtent=a.readShort(t,e),e+=2,r.caretSlopeRise=a.readShort(t,e),e+=2,r.caretSlopeRun=a.readShort(t,e),e+=2,r.caretOffset=a.readShort(t,e),e+=2,e+=8,r.metricDataFormat=a.readShort(t,e),e+=2,r.numberOfHMetrics=a.readUshort(t,e),e+=2,r},n.hmtx={},n.hmtx.parse=function(t,e,i,a){for(var r=n._bin,o={aWidth:[],lsBearing:[]},l=0,f=0,u=0;u<a.maxp.numGlyphs;u++)u<a.hhea.numberOfHMetrics&&(l=r.readUshort(t,e),e+=2,f=r.readShort(t,e),e+=2),o.aWidth.push(l),o.lsBearing.push(f);return o},n.kern={},n.kern.parse=function(t,e,i,a){var r=n._bin,o=r.readUshort(t,e);if(e+=2,o==1)return n.kern.parseV1(t,e-2,i,a);var l=r.readUshort(t,e);e+=2;for(var f={glyph1:[],rval:[]},u=0;u<l;u++){e+=2,i=r.readUshort(t,e),e+=2;var p=r.readUshort(t,e);e+=2;var w=p>>>8;if((w&=15)!=0)throw"unknown kern table format: "+w;e=n.kern.readFormat0(t,e,f)}return f},n.kern.parseV1=function(t,e,i,a){var r=n._bin;r.readFixed(t,e),e+=4;var o=r.readUint(t,e);e+=4;for(var l={glyph1:[],rval:[]},f=0;f<o;f++){r.readUint(t,e),e+=4;var u=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2;var p=u>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;e=n.kern.readFormat0(t,e,l)}return l},n.kern.readFormat0=function(t,e,i){var a=n._bin,r=-1,o=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2;for(var l=0;l<o;l++){var f=a.readUshort(t,e);e+=2;var u=a.readUshort(t,e);e+=2;var p=a.readShort(t,e);e+=2,f!=r&&(i.glyph1.push(f),i.rval.push({glyph2:[],vals:[]}));var w=i.rval[i.rval.length-1];w.glyph2.push(u),w.vals.push(p),r=f}return e},n.loca={},n.loca.parse=function(t,e,i,a){var r=n._bin,o=[],l=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(l==0)for(var u=0;u<f;u++)o.push(r.readUshort(t,e+(u<<1))<<1);if(l==1)for(u=0;u<f;u++)o.push(r.readUint(t,e+(u<<2)));return o},n.maxp={},n.maxp.parse=function(t,e,i){var a=n._bin,r={},o=a.readUint(t,e);return e+=4,r.numGlyphs=a.readUshort(t,e),e+=2,o==65536&&(r.maxPoints=a.readUshort(t,e),e+=2,r.maxContours=a.readUshort(t,e),e+=2,r.maxCompositePoints=a.readUshort(t,e),e+=2,r.maxCompositeContours=a.readUshort(t,e),e+=2,r.maxZones=a.readUshort(t,e),e+=2,r.maxTwilightPoints=a.readUshort(t,e),e+=2,r.maxStorage=a.readUshort(t,e),e+=2,r.maxFunctionDefs=a.readUshort(t,e),e+=2,r.maxInstructionDefs=a.readUshort(t,e),e+=2,r.maxStackElements=a.readUshort(t,e),e+=2,r.maxSizeOfInstructions=a.readUshort(t,e),e+=2,r.maxComponentElements=a.readUshort(t,e),e+=2,r.maxComponentDepth=a.readUshort(t,e),e+=2),r},n.name={},n.name.parse=function(t,e,i){var a=n._bin,r={};a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);e+=2,a.readUshort(t,e);for(var l,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=e+=2,p=0;p<o;p++){var w=a.readUshort(t,e);e+=2;var b=a.readUshort(t,e);e+=2;var S=a.readUshort(t,e);e+=2;var m=a.readUshort(t,e);e+=2;var v=a.readUshort(t,e);e+=2;var y=a.readUshort(t,e);e+=2;var h,x=f[m],E=u+12*o+y;if(w==0)h=a.readUnicode(t,E,v/2);else if(w==3&&b==0)h=a.readUnicode(t,E,v/2);else if(b==0)h=a.readASCII(t,E,v);else if(b==1)h=a.readUnicode(t,E,v/2);else if(b==3)h=a.readUnicode(t,E,v/2);else{if(w!=1)throw"unknown encoding "+b+", platformID: "+w;h=a.readASCII(t,E,v),console.debug("reading unknown MAC encoding "+b+" as ASCII")}var P="p"+w+","+S.toString(16);r[P]==null&&(r[P]={}),r[P][x!==void 0?x:m]=h,r[P]._lang=S}for(var U in r)if(r[U].postScriptName!=null&&r[U]._lang==1033)return r[U];for(var U in r)if(r[U].postScriptName!=null&&r[U]._lang==0)return r[U];for(var U in r)if(r[U].postScriptName!=null&&r[U]._lang==3084)return r[U];for(var U in r)if(r[U].postScriptName!=null)return r[U];for(var U in r){l=U;break}return console.debug("returning name table with languageID "+r[l]._lang),r[l]},n["OS/2"]={},n["OS/2"].parse=function(t,e,i){var a=n._bin.readUshort(t,e);e+=2;var r={};if(a==0)n["OS/2"].version0(t,e,r);else if(a==1)n["OS/2"].version1(t,e,r);else if(a==2||a==3||a==4)n["OS/2"].version2(t,e,r);else{if(a!=5)throw"unknown OS/2 table version: "+a;n["OS/2"].version5(t,e,r)}return r},n["OS/2"].version0=function(t,e,i){var a=n._bin;return i.xAvgCharWidth=a.readShort(t,e),e+=2,i.usWeightClass=a.readUshort(t,e),e+=2,i.usWidthClass=a.readUshort(t,e),e+=2,i.fsType=a.readUshort(t,e),e+=2,i.ySubscriptXSize=a.readShort(t,e),e+=2,i.ySubscriptYSize=a.readShort(t,e),e+=2,i.ySubscriptXOffset=a.readShort(t,e),e+=2,i.ySubscriptYOffset=a.readShort(t,e),e+=2,i.ySuperscriptXSize=a.readShort(t,e),e+=2,i.ySuperscriptYSize=a.readShort(t,e),e+=2,i.ySuperscriptXOffset=a.readShort(t,e),e+=2,i.ySuperscriptYOffset=a.readShort(t,e),e+=2,i.yStrikeoutSize=a.readShort(t,e),e+=2,i.yStrikeoutPosition=a.readShort(t,e),e+=2,i.sFamilyClass=a.readShort(t,e),e+=2,i.panose=a.readBytes(t,e,10),e+=10,i.ulUnicodeRange1=a.readUint(t,e),e+=4,i.ulUnicodeRange2=a.readUint(t,e),e+=4,i.ulUnicodeRange3=a.readUint(t,e),e+=4,i.ulUnicodeRange4=a.readUint(t,e),e+=4,i.achVendID=[a.readInt8(t,e),a.readInt8(t,e+1),a.readInt8(t,e+2),a.readInt8(t,e+3)],e+=4,i.fsSelection=a.readUshort(t,e),e+=2,i.usFirstCharIndex=a.readUshort(t,e),e+=2,i.usLastCharIndex=a.readUshort(t,e),e+=2,i.sTypoAscender=a.readShort(t,e),e+=2,i.sTypoDescender=a.readShort(t,e),e+=2,i.sTypoLineGap=a.readShort(t,e),e+=2,i.usWinAscent=a.readUshort(t,e),e+=2,i.usWinDescent=a.readUshort(t,e),e+=2},n["OS/2"].version1=function(t,e,i){var a=n._bin;return e=n["OS/2"].version0(t,e,i),i.ulCodePageRange1=a.readUint(t,e),e+=4,i.ulCodePageRange2=a.readUint(t,e),e+=4},n["OS/2"].version2=function(t,e,i){var a=n._bin;return e=n["OS/2"].version1(t,e,i),i.sxHeight=a.readShort(t,e),e+=2,i.sCapHeight=a.readShort(t,e),e+=2,i.usDefault=a.readUshort(t,e),e+=2,i.usBreak=a.readUshort(t,e),e+=2,i.usMaxContext=a.readUshort(t,e),e+=2},n["OS/2"].version5=function(t,e,i){var a=n._bin;return e=n["OS/2"].version2(t,e,i),i.usLowerOpticalPointSize=a.readUshort(t,e),e+=2,i.usUpperOpticalPointSize=a.readUshort(t,e),e+=2},n.post={},n.post.parse=function(t,e,i){var a=n._bin,r={};return r.version=a.readFixed(t,e),e+=4,r.italicAngle=a.readFixed(t,e),e+=4,r.underlinePosition=a.readShort(t,e),e+=2,r.underlineThickness=a.readShort(t,e),e+=2,r},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(t,e){var i=t.cmap,a=-1;if(i.p0e4!=null?a=i.p0e4:i.p3e1!=null?a=i.p3e1:i.p1e0!=null?a=i.p1e0:i.p0e3!=null&&(a=i.p0e3),a==-1)throw"no familiar platform and encoding!";var r=i.tables[a];if(r.format==0)return e>=r.map.length?0:r.map[e];if(r.format==4){for(var o=-1,l=0;l<r.endCount.length;l++)if(e<=r.endCount[l]){o=l;break}return o==-1||r.startCount[o]>e?0:65535&(r.idRangeOffset[o]!=0?r.glyphIdArray[e-r.startCount[o]+(r.idRangeOffset[o]>>1)-(r.idRangeOffset.length-o)]:e+r.idDelta[o])}if(r.format==12){if(e>r.groups[r.groups.length-1][1])return 0;for(l=0;l<r.groups.length;l++){var f=r.groups[l];if(f[0]<=e&&e<=f[1])return f[2]+(e-f[0])}return 0}throw"unknown cmap table format "+r.format},n.U.glyphToPath=function(t,e){var i={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var a=t.SVG.entries[e];return a==null?i:(typeof a=="string"&&(a=n.SVG.toPath(a),t.SVG.entries[e]=a),a)}if(t.CFF){var r={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},o=t.CFF,l=t.CFF.Private;if(o.ROS){for(var f=0;o.FDSelect[f+2]<=e;)f+=2;l=o.FDArray[o.FDSelect[f+1]].Private}n.U._drawCFF(t.CFF.CharStrings[e],r,o,l,i)}else t.glyf&&n.U._drawGlyf(e,t,i);return i},n.U._drawGlyf=function(t,e,i){var a=e.glyf[t];a==null&&(a=e.glyf[t]=n.glyf._parseGlyf(e,t)),a!=null&&(a.noc>-1?n.U._simpleGlyph(a,i):n.U._compoGlyph(a,e,i))},n.U._simpleGlyph=function(t,e){for(var i=0;i<t.noc;i++){for(var a=i==0?0:t.endPts[i-1]+1,r=t.endPts[i],o=a;o<=r;o++){var l=o==a?r:o-1,f=o==r?a:o+1,u=1&t.flags[o],p=1&t.flags[l],w=1&t.flags[f],b=t.xs[o],S=t.ys[o];if(o==a)if(u){if(!p){n.U.P.moveTo(e,b,S);continue}n.U.P.moveTo(e,t.xs[l],t.ys[l])}else p?n.U.P.moveTo(e,t.xs[l],t.ys[l]):n.U.P.moveTo(e,(t.xs[l]+b)/2,(t.ys[l]+S)/2);u?p&&n.U.P.lineTo(e,b,S):w?n.U.P.qcurveTo(e,b,S,t.xs[f],t.ys[f]):n.U.P.qcurveTo(e,b,S,(b+t.xs[f])/2,(S+t.ys[f])/2)}n.U.P.closePath(e)}},n.U._compoGlyph=function(t,e,i){for(var a=0;a<t.parts.length;a++){var r={cmds:[],crds:[]},o=t.parts[a];n.U._drawGlyf(o.glyphIndex,e,r);for(var l=o.m,f=0;f<r.crds.length;f+=2){var u=r.crds[f],p=r.crds[f+1];i.crds.push(u*l.a+p*l.b+l.tx),i.crds.push(u*l.c+p*l.d+l.ty)}for(f=0;f<r.cmds.length;f++)i.cmds.push(r.cmds[f])}},n.U._getGlyphClass=function(t,e){var i=n._lctf.getInterval(e,t);return i==-1?0:e[i+2]},n.U.getPairAdjustment=function(t,e,i){var a=0,r=!1;if(t.GPOS)for(var o=t.GPOS,l=o.lookupList,f=o.featureList,u=[],p=0;p<f.length;p++){var w=f[p];if(w.tag=="kern"){r=!0;for(var b=0;b<w.tab.length;b++)if(!u[w.tab[b]]){u[w.tab[b]]=!0;for(var S=l[w.tab[b]],m=0;m<S.tabs.length;m++)if(S.tabs[m]!=null){var v,y=S.tabs[m];if((!y.coverage||(v=n._lctf.coverageIndex(y.coverage,e))!=-1)&&S.ltype!=1){if(S.ltype==2){var h;if(y.fmt==1){var x=y.pairsets[v];for(p=0;p<x.length;p++)x[p].gid2==i&&(h=x[p])}else if(y.fmt==2){var E=n.U._getGlyphClass(e,y.classDef1),P=n.U._getGlyphClass(i,y.classDef2);h=y.matrix[E][P]}h&&h.val1&&h.val1[2]&&(a+=h.val1[2]),h&&h.val2&&h.val2[0]&&(a+=h.val2[0])}}}}}}if(t.kern&&!r){var U=t.kern.glyph1.indexOf(e);if(U!=-1){var N=t.kern.rval[U].glyph2.indexOf(i);N!=-1&&(a+=t.kern.rval[U].vals[N])}}return a},n.U._applySubs=function(t,e,i,a){for(var r=t.length-e-1,o=0;o<i.tabs.length;o++)if(i.tabs[o]!=null){var l,f=i.tabs[o];if(!f.coverage||(l=n._lctf.coverageIndex(f.coverage,t[e]))!=-1){if(i.ltype==1)t[e],f.fmt==1?t[e]=t[e]+f.delta:t[e]=f.newg[l];else if(i.ltype==4)for(var u=f.vals[l],p=0;p<u.length;p++){var w=u[p],b=w.chain.length;if(!(b>r)){for(var S=!0,m=0,v=0;v<b;v++){for(;t[e+m+(1+v)]==-1;)m++;w.chain[v]!=t[e+m+(1+v)]&&(S=!1)}if(S){for(t[e]=w.nglyph,v=0;v<b+m;v++)t[e+v+1]=-1;break}}}else if(i.ltype==5&&f.fmt==2)for(var y=n._lctf.getInterval(f.cDef,t[e]),h=f.cDef[y+2],x=f.scset[h],E=0;E<x.length;E++){var P=x[E],U=P.input;if(!(U.length>r)){for(S=!0,v=0;v<U.length;v++){var N=n._lctf.getInterval(f.cDef,t[e+1+v]);if(y==-1&&f.cDef[N+2]!=U[v]){S=!1;break}}if(S){var G=P.substLookupRecords;for(p=0;p<G.length;p+=2)G[p],G[p+1]}}}else if(i.ltype==6&&f.fmt==3){if(!n.U._glsCovered(t,f.backCvg,e-f.backCvg.length)||!n.U._glsCovered(t,f.inptCvg,e)||!n.U._glsCovered(t,f.ahedCvg,e+f.inptCvg.length))continue;var J=f.lookupRec;for(E=0;E<J.length;E+=2){y=J[E];var T=a[J[E+1]];n.U._applySubs(t,e+y,T,a)}}}}},n.U._glsCovered=function(t,e,i){for(var a=0;a<e.length;a++)if(n._lctf.coverageIndex(e[a],t[i+a])==-1)return!1;return!0},n.U.glyphsToPath=function(t,e,i){for(var a={cmds:[],crds:[]},r=0,o=0;o<e.length;o++){var l=e[o];if(l!=-1){for(var f=o<e.length-1&&e[o+1]!=-1?e[o+1]:0,u=n.U.glyphToPath(t,l),p=0;p<u.crds.length;p+=2)a.crds.push(u.crds[p]+r),a.crds.push(u.crds[p+1]);for(i&&a.cmds.push(i),p=0;p<u.cmds.length;p++)a.cmds.push(u.cmds[p]);i&&a.cmds.push("X"),r+=t.hmtx.aWidth[l],o<e.length-1&&(r+=n.U.getPairAdjustment(t,l,f))}}return a},n.U.P={},n.U.P.moveTo=function(t,e,i){t.cmds.push("M"),t.crds.push(e,i)},n.U.P.lineTo=function(t,e,i){t.cmds.push("L"),t.crds.push(e,i)},n.U.P.curveTo=function(t,e,i,a,r,o,l){t.cmds.push("C"),t.crds.push(e,i,a,r,o,l)},n.U.P.qcurveTo=function(t,e,i,a,r){t.cmds.push("Q"),t.crds.push(e,i,a,r)},n.U.P.closePath=function(t){t.cmds.push("Z")},n.U._drawCFF=function(t,e,i,a,r){for(var o=e.stack,l=e.nStems,f=e.haveWidth,u=e.width,p=e.open,w=0,b=e.x,S=e.y,m=0,v=0,y=0,h=0,x=0,E=0,P=0,U=0,N=0,G=0,J={val:0,size:0};w<t.length;){n.CFF.getCharString(t,w,J);var T=J.val;if(w+=J.size,T=="o1"||T=="o18")o.length%2!=0&&!f&&(u=o.shift()+a.nominalWidthX),l+=o.length>>1,o.length=0,f=!0;else if(T=="o3"||T=="o23")o.length%2!=0&&!f&&(u=o.shift()+a.nominalWidthX),l+=o.length>>1,o.length=0,f=!0;else if(T=="o4")o.length>1&&!f&&(u=o.shift()+a.nominalWidthX,f=!0),p&&n.U.P.closePath(r),S+=o.pop(),n.U.P.moveTo(r,b,S),p=!0;else if(T=="o5")for(;o.length>0;)b+=o.shift(),S+=o.shift(),n.U.P.lineTo(r,b,S);else if(T=="o6"||T=="o7")for(var k=o.length,D=T=="o6",$=0;$<k;$++){var Y=o.shift();D?b+=Y:S+=Y,D=!D,n.U.P.lineTo(r,b,S)}else if(T=="o8"||T=="o24"){k=o.length;for(var fe=0;fe+6<=k;)m=b+o.shift(),v=S+o.shift(),y=m+o.shift(),h=v+o.shift(),b=y+o.shift(),S=h+o.shift(),n.U.P.curveTo(r,m,v,y,h,b,S),fe+=6;T=="o24"&&(b+=o.shift(),S+=o.shift(),n.U.P.lineTo(r,b,S))}else{if(T=="o11")break;if(T=="o1234"||T=="o1235"||T=="o1236"||T=="o1237")T=="o1234"&&(v=S,y=(m=b+o.shift())+o.shift(),G=h=v+o.shift(),E=h,U=S,b=(P=(x=(N=y+o.shift())+o.shift())+o.shift())+o.shift(),n.U.P.curveTo(r,m,v,y,h,N,G),n.U.P.curveTo(r,x,E,P,U,b,S)),T=="o1235"&&(m=b+o.shift(),v=S+o.shift(),y=m+o.shift(),h=v+o.shift(),N=y+o.shift(),G=h+o.shift(),x=N+o.shift(),E=G+o.shift(),P=x+o.shift(),U=E+o.shift(),b=P+o.shift(),S=U+o.shift(),o.shift(),n.U.P.curveTo(r,m,v,y,h,N,G),n.U.P.curveTo(r,x,E,P,U,b,S)),T=="o1236"&&(m=b+o.shift(),v=S+o.shift(),y=m+o.shift(),G=h=v+o.shift(),E=h,P=(x=(N=y+o.shift())+o.shift())+o.shift(),U=E+o.shift(),b=P+o.shift(),n.U.P.curveTo(r,m,v,y,h,N,G),n.U.P.curveTo(r,x,E,P,U,b,S)),T=="o1237"&&(m=b+o.shift(),v=S+o.shift(),y=m+o.shift(),h=v+o.shift(),N=y+o.shift(),G=h+o.shift(),x=N+o.shift(),E=G+o.shift(),P=x+o.shift(),U=E+o.shift(),Math.abs(P-b)>Math.abs(U-S)?b=P+o.shift():S=U+o.shift(),n.U.P.curveTo(r,m,v,y,h,N,G),n.U.P.curveTo(r,x,E,P,U,b,S));else if(T=="o14"){if(o.length>0&&!f&&(u=o.shift()+i.nominalWidthX,f=!0),o.length==4){var ue=o.shift(),O=o.shift(),W=o.shift(),_=o.shift(),M=n.CFF.glyphBySE(i,W),j=n.CFF.glyphBySE(i,_);n.U._drawCFF(i.CharStrings[M],e,i,a,r),e.x=ue,e.y=O,n.U._drawCFF(i.CharStrings[j],e,i,a,r)}p&&(n.U.P.closePath(r),p=!1)}else if(T=="o19"||T=="o20")o.length%2!=0&&!f&&(u=o.shift()+a.nominalWidthX),l+=o.length>>1,o.length=0,f=!0,w+=l+7>>3;else if(T=="o21")o.length>2&&!f&&(u=o.shift()+a.nominalWidthX,f=!0),S+=o.pop(),b+=o.pop(),p&&n.U.P.closePath(r),n.U.P.moveTo(r,b,S),p=!0;else if(T=="o22")o.length>1&&!f&&(u=o.shift()+a.nominalWidthX,f=!0),b+=o.pop(),p&&n.U.P.closePath(r),n.U.P.moveTo(r,b,S),p=!0;else if(T=="o25"){for(;o.length>6;)b+=o.shift(),S+=o.shift(),n.U.P.lineTo(r,b,S);m=b+o.shift(),v=S+o.shift(),y=m+o.shift(),h=v+o.shift(),b=y+o.shift(),S=h+o.shift(),n.U.P.curveTo(r,m,v,y,h,b,S)}else if(T=="o26")for(o.length%2&&(b+=o.shift());o.length>0;)m=b,v=S+o.shift(),b=y=m+o.shift(),S=(h=v+o.shift())+o.shift(),n.U.P.curveTo(r,m,v,y,h,b,S);else if(T=="o27")for(o.length%2&&(S+=o.shift());o.length>0;)v=S,y=(m=b+o.shift())+o.shift(),h=v+o.shift(),b=y+o.shift(),S=h,n.U.P.curveTo(r,m,v,y,h,b,S);else if(T=="o10"||T=="o29"){var I=T=="o10"?a:i;if(o.length==0)console.debug("error: empty stack");else{var L=o.pop(),z=I.Subrs[L+I.Bias];e.x=b,e.y=S,e.nStems=l,e.haveWidth=f,e.width=u,e.open=p,n.U._drawCFF(z,e,i,a,r),b=e.x,S=e.y,l=e.nStems,f=e.haveWidth,u=e.width,p=e.open}}else if(T=="o30"||T=="o31"){var A=o.length,R=(fe=0,T=="o31");for(fe+=A-(k=-3&A);fe<k;)R?(v=S,y=(m=b+o.shift())+o.shift(),S=(h=v+o.shift())+o.shift(),k-fe==5?(b=y+o.shift(),fe++):b=y,R=!1):(m=b,v=S+o.shift(),y=m+o.shift(),h=v+o.shift(),b=y+o.shift(),k-fe==5?(S=h+o.shift(),fe++):S=h,R=!0),n.U.P.curveTo(r,m,v,y,h,b,S),fe+=4}else{if((T+"").charAt(0)=="o")throw console.debug("Unknown operation: "+T,t),T;o.push(T)}}}e.x=b,e.y=S,e.nStems=l,e.haveWidth=f,e.width=u,e.open=p};var d=n,s={Typr:d};return c.Typr=d,c.default=s,Object.defineProperty(c,"__esModule",{value:!0}),c})({}).Typr}function to(){return(function(c){var n=Uint8Array,d=Uint16Array,s=Uint32Array,t=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(T,k){for(var D=new d(31),$=0;$<31;++$)D[$]=k+=1<<T[$-1];var Y=new s(D[30]);for($=1;$<30;++$)for(var fe=D[$];fe<D[$+1];++fe)Y[fe]=fe-D[$]<<5|$;return[D,Y]},r=a(t,2),o=r[0],l=r[1];o[28]=258,l[258]=28;for(var f=a(e,0)[0],u=new d(32768),p=0;p<32768;++p){var w=(43690&p)>>>1|(21845&p)<<1;w=(61680&(w=(52428&w)>>>2|(13107&w)<<2))>>>4|(3855&w)<<4,u[p]=((65280&w)>>>8|(255&w)<<8)>>>1}var b=function(T,k,D){for(var $=T.length,Y=0,fe=new d(k);Y<$;++Y)++fe[T[Y]-1];var ue,O=new d(k);for(Y=0;Y<k;++Y)O[Y]=O[Y-1]+fe[Y-1]<<1;{ue=new d(1<<k);var W=15-k;for(Y=0;Y<$;++Y)if(T[Y])for(var _=Y<<4|T[Y],M=k-T[Y],j=O[T[Y]-1]++<<M,I=j|(1<<M)-1;j<=I;++j)ue[u[j]>>>W]=_}return ue},S=new n(288);for(p=0;p<144;++p)S[p]=8;for(p=144;p<256;++p)S[p]=9;for(p=256;p<280;++p)S[p]=7;for(p=280;p<288;++p)S[p]=8;var m=new n(32);for(p=0;p<32;++p)m[p]=5;var v=b(S,9),y=b(m,5),h=function(T){for(var k=T[0],D=1;D<T.length;++D)T[D]>k&&(k=T[D]);return k},x=function(T,k,D){var $=k/8|0;return(T[$]|T[$+1]<<8)>>(7&k)&D},E=function(T,k){var D=k/8|0;return(T[D]|T[D+1]<<8|T[D+2]<<16)>>(7&k)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(T,k,D){var $=new Error(k||P[T]);if($.code=T,Error.captureStackTrace&&Error.captureStackTrace($,U),!D)throw $;return $},N=function(T,k,D){var $=T.length;if(!$||D&&!D.l&&$<5)return k||new n(0);var Y=!k||D,fe=!D||D.i;D||(D={}),k||(k=new n(3*$));var ue,O=function(ae){var g=k.length;if(ae>g){var C=new n(Math.max(2*g,ae));C.set(k),k=C}},W=D.f||0,_=D.p||0,M=D.b||0,j=D.l,I=D.d,L=D.m,z=D.n,A=8*$;do{if(!j){D.f=W=x(T,_,1);var R=x(T,_+1,3);if(_+=3,!R){var H=T[(te=((ue=_)/8|0)+(7&ue&&1)+4)-4]|T[te-3]<<8,le=te+H;if(le>$){fe&&U(0);break}Y&&O(M+H),k.set(T.subarray(te,le),M),D.b=M+=H,D.p=_=8*le;continue}if(R==1)j=v,I=y,L=9,z=5;else if(R==2){var K=x(T,_,31)+257,V=x(T,_+10,15)+4,Te=K+x(T,_+5,31)+1;_+=14;for(var be=new n(Te),ee=new n(19),ie=0;ie<V;++ie)ee[i[ie]]=x(T,_+3*ie,7);_+=3*V;var ve=h(ee),F=(1<<ve)-1,re=b(ee,ve);for(ie=0;ie<Te;){var te,B=re[x(T,_,F)];if(_+=15&B,(te=B>>>4)<16)be[ie++]=te;else{var we=0,Q=0;for(te==16?(Q=3+x(T,_,3),_+=2,we=be[ie-1]):te==17?(Q=3+x(T,_,7),_+=3):te==18&&(Q=11+x(T,_,127),_+=7);Q--;)be[ie++]=we}}var q=be.subarray(0,K),Z=be.subarray(K);L=h(q),z=h(Z),j=b(q,L),I=b(Z,z)}else U(1);if(_>A){fe&&U(0);break}}Y&&O(M+131072);for(var Se=(1<<L)-1,_e=(1<<z)-1,X=_;;X=_){var he=(we=j[E(T,_)&Se])>>>4;if((_+=15&we)>A){fe&&U(0);break}if(we||U(2),he<256)k[M++]=he;else{if(he==256){X=_,j=null;break}var Ee=he-254;if(he>264){var Ue=t[ie=he-257];Ee=x(T,_,(1<<Ue)-1)+o[ie],_+=Ue}var Ce=I[E(T,_)&_e],Me=Ce>>>4;if(Ce||U(3),_+=15&Ce,Z=f[Me],Me>3&&(Ue=e[Me],Z+=E(T,_)&(1<<Ue)-1,_+=Ue),_>A){fe&&U(0);break}Y&&O(M+131072);for(var pe=M+Ee;M<pe;M+=4)k[M]=k[M-Z],k[M+1]=k[M+1-Z],k[M+2]=k[M+2-Z],k[M+3]=k[M+3-Z];M=pe}}D.l=j,D.p=X,D.b=M,j&&(W=1,D.m=L,D.d=I,D.n=z)}while(!W);return M==k.length?k:(function(ae,g,C){(C==null||C>ae.length)&&(C=ae.length);var ne=new(ae instanceof d?d:ae instanceof s?s:n)(C-g);return ne.set(ae.subarray(g,C)),ne})(k,0,M)},G=new n(0),J=typeof TextDecoder<"u"&&new TextDecoder;try{J.decode(G,{stream:!0})}catch{}return c.convert_streams=function(T){var k=new DataView(T),D=0;function $(){var K=k.getUint16(D);return D+=2,K}function Y(){var K=k.getUint32(D);return D+=4,K}function fe(K){H.setUint16(le,K),le+=2}function ue(K){H.setUint32(le,K),le+=4}for(var O={signature:Y(),flavor:Y(),length:Y(),numTables:$(),reserved:$(),totalSfntSize:Y(),majorVersion:$(),minorVersion:$(),metaOffset:Y(),metaLength:Y(),metaOrigLength:Y(),privOffset:Y(),privLength:Y()},W=0;Math.pow(2,W)<=O.numTables;)W++;W--;for(var _=16*Math.pow(2,W),M=16*O.numTables-_,j=12,I=[],L=0;L<O.numTables;L++)I.push({tag:Y(),offset:Y(),compLength:Y(),origLength:Y(),origChecksum:Y()}),j+=16;var z,A=new Uint8Array(12+16*I.length+I.reduce((function(K,V){return K+V.origLength+4}),0)),R=A.buffer,H=new DataView(R),le=0;return ue(O.flavor),fe(O.numTables),fe(_),fe(W),fe(M),I.forEach((function(K){ue(K.tag),ue(K.origChecksum),ue(j),ue(K.origLength),K.outOffset=j,(j+=K.origLength)%4!=0&&(j+=4-j%4)})),I.forEach((function(K){var V,Te=T.slice(K.offset,K.offset+K.compLength);if(K.compLength!=K.origLength){var be=new Uint8Array(K.origLength);V=new Uint8Array(Te,2),N(V,be)}else be=new Uint8Array(Te);A.set(be,K.outOffset);var ee=0;(j=K.outOffset+K.origLength)%4!=0&&(ee=4-j%4),A.set(new Uint8Array(ee).buffer,K.outOffset+K.origLength),z=j+ee})),R.slice(0,z)},Object.defineProperty(c,"__esModule",{value:!0}),c})({}).convert_streams}function no(c,n){const d={M:2,L:2,Q:4,C:6,Z:0},s={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,i=4,a=8,r=16,o=32;let l;function f(h){if(!l){const x={R:e,L:t,D:i,C:r,U:o,T:a};l=new Map;for(let E in s){let P=0;s[E].split(",").forEach(U=>{let[N,G]=U.split("+");N=parseInt(N,36),G=G?parseInt(G,36):0,l.set(P+=N,x[E]);for(let J=G;J--;)l.set(++P,x[E])})}}return l.get(h)||o}const u=1,p=2,w=3,b=4,S=[null,"isol","init","fina","medi"];function m(h){const x=new Uint8Array(h.length);let E=o,P=u,U=-1;for(let N=0;N<h.length;N++){const G=h.codePointAt(N);let J=f(G)|0,T=u;J&a||(E&(t|i|r)?J&(e|i|r)?(T=w,(P===u||P===w)&&x[U]++):J&(t|o)&&(P===p||P===b)&&x[U]--:E&(e|o)&&(P===p||P===b)&&x[U]--,P=x[N]=T,E=J,U=N,G>65535&&N++)}return x}function v(h,x){const E=[];for(let U=0;U<x.length;U++){const N=x.codePointAt(U);N>65535&&U++,E.push(c.U.codeToGlyph(h,N))}const P=h.GSUB;if(P){const{lookupList:U,featureList:N}=P;let G;const J=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,T=[];N.forEach(k=>{if(J.test(k.tag))for(let D=0;D<k.tab.length;D++){if(T[k.tab[D]])continue;T[k.tab[D]]=!0;const $=U[k.tab[D]],Y=/^(isol|init|fina|medi)$/.test(k.tag);Y&&!G&&(G=m(x));for(let fe=0;fe<E.length;fe++)(!G||!Y||S[G[fe]]===k.tag)&&c.U._applySubs(E,fe,$,U)}})}return E}function y(h){const x=Object.create(null),E={unitsPerEm:h.head.unitsPerEm,ascender:h.hhea.ascender,descender:h.hhea.descender,forEachGlyph(P,U,N,G){let J=0;const T=1/E.unitsPerEm*U,k=v(h,P);let D=0,$=-1;return k.forEach((Y,fe)=>{if(Y!==-1){let ue=x[Y];if(!ue){const{cmds:O,crds:W}=c.U.glyphToPath(h,Y);let _="",M=0;for(let A=0,R=O.length;A<R;A++){const H=d[O[A]];_+=O[A];for(let le=1;le<=H;le++)_+=(le>1?",":"")+W[M++]}let j,I,L,z;if(W.length){j=I=1/0,L=z=-1/0;for(let A=0,R=W.length;A<R;A+=2){let H=W[A],le=W[A+1];H<j&&(j=H),le<I&&(I=le),H>L&&(L=H),le>z&&(z=le)}}else j=L=I=z=0;ue=x[Y]={index:Y,advanceWidth:h.hmtx.aWidth[Y],xMin:j,yMin:I,xMax:L,yMax:z,path:_,pathCommandCount:O.length}}$!==-1&&(J+=c.U.getPairAdjustment(h,$,Y)*T),G.call(null,ue,J,D),ue.advanceWidth&&(J+=ue.advanceWidth*T),N&&(J+=N*U),$=Y}D+=P.codePointAt(D)>65535?2:1}),J}};return E}return function(x){const E=new Uint8Array(x,0,4),P=c._bin.readASCII(E,0,4);if(P==="wOFF")x=n(x);else if(P==="wOF2")throw new Error("woff2 fonts not supported");return y(c.parse(x)[0])}}const ro=Tt({name:"Typr Font Parser",dependencies:[eo,to,no],init(c,n,d){const s=c(),t=n();return d(s,t)}}),xt={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},ao=new _t;function St(){return(self.performance||Date).now()}const Lr=Object.create(null);function Hr(c,n){c=so({},c);const d=St();if(c.font=lo(c.font||xt.defaultFontURL),c.text=""+c.text,c.sdfGlyphSize=c.sdfGlyphSize||xt.sdfGlyphSize,c.colorRanges!=null){let f={};for(let u in c.colorRanges)if(c.colorRanges.hasOwnProperty(u)){let p=c.colorRanges[u];typeof p!="number"&&(p=ao.set(p).getHex()),f[u]=p}c.colorRanges=f}Object.freeze(c);const{textureWidth:s,sdfExponent:t}=xt,{sdfGlyphSize:e}=c,i=s/e*4;let a=Lr[e];if(!a){const f=document.createElement("canvas");f.width=s,f.height=e*256/i,a=Lr[e]={glyphCount:0,sdfGlyphSize:e,sdfCanvas:f,sdfTexture:new pa(f,void 0,void 0,void 0,yr,yr),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,oo(a)}const{sdfTexture:r,sdfCanvas:o}=a;let l=a.glyphsByFont.get(c.font);l||a.glyphsByFont.set(c.font,l=new Map),co(c).then(f=>{const{glyphIds:u,glyphPositions:p,fontSize:w,unitsPerEm:b,timings:S}=f,m=[],v=new Float32Array(u.length*4),y=w/b;let h=0,x=0;const E=St();u.forEach((J,T)=>{let k=l.get(J);if(!k){const{path:fe,pathBounds:ue}=f.glyphData[J],O=Math.max(ue[2]-ue[0],ue[3]-ue[1])/e*(xt.sdfMargin*e+.5),W=a.glyphCount++,_=[ue[0]-O,ue[1]-O,ue[2]+O,ue[3]+O];l.set(J,k={path:fe,atlasIndex:W,sdfViewBox:_}),m.push(k)}const{sdfViewBox:D}=k,$=p[x++],Y=p[x++];v[h++]=$+D[0]*y,v[h++]=Y+D[1]*y,v[h++]=$+D[2]*y,v[h++]=Y+D[3]*y,u[T]=k.atlasIndex}),S.quads=(S.quads||0)+(St()-E);const P=St();S.sdf={};const U=o.height,N=Math.ceil(a.glyphCount/i),G=Math.pow(2,Math.ceil(Math.log2(N*e)));G>U&&(console.info(`Increasing SDF texture size ${U}->${G}`),$a(o,s,G),r.dispose()),rt.all(m.map(J=>Yr(J,a,c.gpuAccelerateSDF).then(({timing:T})=>{S.sdf[J.atlasIndex]=T}))).then(()=>{m.length&&!a.contextLost&&(Xr(a),r.needsUpdate=!0),S.sdfTotal=St()-P,S.total=St()-d,n(Object.freeze({parameters:c,sdfTexture:r,sdfGlyphSize:e,sdfExponent:t,glyphBounds:v,glyphAtlasIndices:u,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),f.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[J,T,k,D]=f.blockBounds;return[k-J,D-T]}}))})}),rt.all([]).then(()=>{a.contextLost||qa(o)})}function Yr({path:c,atlasIndex:n,sdfViewBox:d},{sdfGlyphSize:s,sdfCanvas:t,contextLost:e},i){if(e)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:r}=xt,o=Math.max(d[2]-d[0],d[3]-d[1]),l=Math.floor(n/4),f=l%(a/s)*s,u=Math.floor(l/(a/s))*s,p=n%4;return Ja(s,s,c,d,o,r,t,f,u,p,i)}function oo(c){const n=c.sdfCanvas;n.addEventListener("webglcontextlost",d=>{console.log("Context Lost",d),d.preventDefault(),c.contextLost=!0}),n.addEventListener("webglcontextrestored",d=>{console.log("Context Restored",d),c.contextLost=!1;const s=[];c.glyphsByFont.forEach(t=>{t.forEach(e=>{s.push(Yr(e,c,!0))})}),rt.all(s).then(()=>{Xr(c),c.sdfTexture.needsUpdate=!0})})}function io({font:c,characters:n,sdfGlyphSize:d},s){let t=Array.isArray(n)?n.join(`
`):""+n;Hr({font:c,sdfGlyphSize:d,text:t},s)}function so(c,n){for(let d in n)n.hasOwnProperty(d)&&(c[d]=n[d]);return c}let en;function lo(c){return en||(en=typeof document>"u"?{}:document.createElement("a")),en.href=c,en.href}function Xr(c){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:d}=c,{width:s,height:t}=n,e=c.sdfCanvas.getContext("webgl");let i=d.image.data;(!i||i.length!==s*t*4)&&(i=new Uint8Array(s*t*4),d.image={width:s,height:t,data:i},d.flipY=!1,d.isDataTexture=!0),e.readPixels(0,0,s,t,e.RGBA,e.UNSIGNED_BYTE,i)}}const fo=Tt({name:"Typesetter",dependencies:[xt,ro,Za,Na],init(c,n,d,s){const{defaultFontURL:t}=c;return d(n,s(),{defaultFontURL:t})}}),co=Tt({name:"Typesetter",dependencies:[fo,ja],init(c,n){return function(d){const s=new n;return c.typeset(d,s.resolve),s}},getTransferables(c){const n=[c.glyphPositions.buffer,c.glyphIds.buffer];return c.caretPositions&&n.push(c.caretPositions.buffer),c.glyphColors&&n.push(c.glyphColors.buffer),n}}),uo=(()=>{const c={};function n(r){let o=c[r];if(!o){const l=new jn(1,1,r,r),f=l.clone(),u=l.attributes,p=f.attributes,w=new ga,b=u.uv.count;for(let S=0;S<b;S++)p.position.array[S*3]*=-1,p.normal.array[S*3+2]*=-1;["position","normal","uv"].forEach(S=>{w.setAttribute(S,new Bn([...u[S].array,...p[S].array],u[S].itemSize))}),w.setIndex([...l.index.array,...f.index.array.map(S=>S+b)]),w.translate(.5,.5,0),o=c[r]=w}return o}const d="aTroikaGlyphBounds",s="aTroikaGlyphIndex",t="aTroikaGlyphColor";class e extends Or{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Vn,this.boundingBox=new on}computeBoundingSphere(){}computeBoundingBox(){}setSide(o){const l=this.getIndex().count;this.setDrawRange(o===ma?l/2:0,o===Hn?l:l/2)}set detail(o){if(o!==this._detail){this._detail=o,(typeof o!="number"||o<1)&&(o=1);let l=n(o);["position","normal","uv"].forEach(f=>{this.attributes[f]=l.attributes[f].clone()}),this.setIndex(l.getIndex().clone())}}get detail(){return this._detail}set curveRadius(o){o!==this._curveRadius&&(this._curveRadius=o,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(o,l,f,u,p){i(this,d,o,4),i(this,s,l,1),i(this,t,p,3),this._blockBounds=f,this._chunkedBounds=u,a(this,l.length),this._updateBounds()}_updateBounds(){const o=this._blockBounds;if(o){const{curveRadius:l,boundingBox:f}=this;if(l){const{PI:u,floor:p,min:w,max:b,sin:S,cos:m}=Math,v=u/2,y=u*2,h=Math.abs(l),x=o[0]/h,E=o[2]/h,P=p((x+v)/y)!==p((E+v)/y)?-h:w(S(x)*h,S(E)*h),U=p((x-v)/y)!==p((E-v)/y)?h:b(S(x)*h,S(E)*h),N=p((x+u)/y)!==p((E+u)/y)?h*2:b(h-m(x)*h,h-m(E)*h);f.min.set(P,o[1],l<0?-N:0),f.max.set(U,o[3],l<0?0:N)}else f.min.set(o[0],o[1],0),f.max.set(o[2],o[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(o){let l=this.getAttribute(s).count,f=this._chunkedBounds;if(f)for(let u=f.length;u--;){l=f[u].end;let p=f[u].rect;if(p[1]<o.w&&p[3]>o.y&&p[0]<o.z&&p[2]>o.x)break}a(this,l)}}e.prototype.setAttribute||(e.prototype.setAttribute=function(r,o){return this.attributes[r]=o,this});function i(r,o,l,f){const u=r.getAttribute(o);l?u&&u.array.length===l.length?(u.array.set(l),u.needsUpdate=!0):(r.setAttribute(o,new ya(l,f)),delete r._maxInstanceCount,r.dispose()):u&&r.deleteAttribute(o)}function a(r,o){r[r.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=o}return e})(),ho=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,po=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,vo=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,mo=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function go(c){const n=Wn(c,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ze},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new dt(0,0,0,0)},uTroikaClipRect:{value:new dt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ze},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new _t},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new va},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:ho,vertexTransform:po,fragmentDefs:vo,fragmentColorTransform:mo,customRewriter({vertexShader:d,fragmentShader:s}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(s)&&(s=s.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(d)||(d=d.replace(Vr,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:d,fragmentShader:s}}});return n.transparent=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const yo=(()=>{const c=new da({color:16777215,side:Hn,transparent:!0}),n=8421504,d=new Rr,s=new ke,t=new ke,e=[],i=new ke,a="+x+y";function r(m){return Array.isArray(m)?m[0]:m}let o=()=>{const m=new nn(new jn(1,1),c);return o=()=>m,m},l=()=>{const m=new nn(new jn(1,1,32,1),c);return l=()=>m,m};const f={type:"syncstart"},u={type:"synccomplete"},p=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],w=p.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class b extends nn{constructor(){const v=new uo;super(v,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=n,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=a,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(v){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(v):(this._isSyncing=!0,this.dispatchEvent(f),Hr({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},y=>{this._isSyncing=!1,this._textRenderInfo=y,this.geometry.updateGlyphs(y.glyphBounds,y.glyphAtlasIndices,y.blockBounds,y.chunkedBounds,y.glyphColors);const h=this._queuedSyncs;h&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{h.forEach(x=>x&&x())})),this.dispatchEvent(u),v&&v()})))}onBeforeRender(v,y,h,x,E,P){this.sync(),E.isTroikaTextMaterial&&this._prepareForRender(E),E._hadOwnSide=E.hasOwnProperty("side"),this.geometry.setSide(E._actualSide=E.side),E.side=ha}onAfterRender(v,y,h,x,E,P){E._hadOwnSide?E.side=E._actualSide:delete E.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let v=this._derivedMaterial;const y=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=c.clone());if((!v||v.baseMaterial!==y)&&(v=this._derivedMaterial=go(y),y.addEventListener("dispose",function h(){y.removeEventListener("dispose",h),v.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let h=v._outlineMtl;return h||(h=v._outlineMtl=Object.create(v,{id:{value:v.id+.1}}),h.isTextOutlineMaterial=!0,h.depthWrite=!1,h.map=null,v.addEventListener("dispose",function x(){v.removeEventListener("dispose",x),h.dispose()})),[h,v]}else return v}set material(v){v&&v.isTroikaTextMaterial?(this._derivedMaterial=v,this._baseMaterial=v.baseMaterial):this._baseMaterial=v}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(v){this.geometry.detail=v}get curveRadius(){return this.geometry.curveRadius}set curveRadius(v){this.geometry.curveRadius=v}get customDepthMaterial(){return r(this.material).getDepthMaterial()}get customDistanceMaterial(){return r(this.material).getDistanceMaterial()}_prepareForRender(v){const y=v.isTextOutlineMaterial,h=v.uniforms,x=this.textRenderInfo;if(x){const{sdfTexture:U,blockBounds:N}=x;h.uTroikaSDFTexture.value=U,h.uTroikaSDFTextureSize.value.set(U.image.width,U.image.height),h.uTroikaSDFGlyphSize.value=x.sdfGlyphSize,h.uTroikaSDFExponent.value=x.sdfExponent,h.uTroikaTotalBounds.value.fromArray(N),h.uTroikaUseGlyphColors.value=!y&&!!x.glyphColors;let G=0,J=0,T=0,k,D,$,Y=0,fe=0;if(y){let{outlineWidth:O,outlineOffsetX:W,outlineOffsetY:_,outlineBlur:M,outlineOpacity:j}=this;G=this._parsePercent(O)||0,J=Math.max(0,this._parsePercent(M)||0),k=j,Y=this._parsePercent(W)||0,fe=this._parsePercent(_)||0}else T=Math.max(0,this._parsePercent(this.strokeWidth)||0),T&&($=this.strokeColor,h.uTroikaStrokeColor.value.set($??n),D=this.strokeOpacity,D==null&&(D=1)),k=this.fillOpacity;h.uTroikaDistanceOffset.value=G,h.uTroikaPositionOffset.value.set(Y,fe),h.uTroikaBlurRadius.value=J,h.uTroikaStrokeWidth.value=T,h.uTroikaStrokeOpacity.value=D,h.uTroikaFillOpacity.value=k??1,h.uTroikaCurveRadius.value=this.curveRadius||0;let ue=this.clipRect;if(ue&&Array.isArray(ue)&&ue.length===4)h.uTroikaClipRect.value.fromArray(ue);else{const O=(this.fontSize||.1)*100;h.uTroikaClipRect.value.set(N[0]-O,N[1]-O,N[2]+O,N[3]+O)}this.geometry.applyClipRect(h.uTroikaClipRect.value)}h.uTroikaSDFDebug.value=!!this.debugSDF,v.polygonOffset=!!this.depthOffset,v.polygonOffsetFactor=v.polygonOffsetUnits=this.depthOffset||0;const E=y?this.outlineColor||0:this.color;if(E==null)delete v.color;else{const U=v.hasOwnProperty("color")?v.color:v.color=new _t;(E!==U._input||typeof E=="object")&&U.set(U._input=E)}let P=this.orientation||a;if(P!==v._orientation){let U=h.uTroikaOrient.value;P=P.replace(/[^-+xyz]/g,"");let N=P!==a&&P.match(/^([-+])([xyz])([-+])([xyz])$/);if(N){let[,G,J,T,k]=N;s.set(0,0,0)[J]=G==="-"?1:-1,t.set(0,0,0)[k]=T==="-"?-1:1,d.lookAt(i,s.cross(t),t),U.setFromMatrix4(d)}else U.identity();v._orientation=P}}_parsePercent(v){if(typeof v=="string"){let y=v.match(/^(-?[\d.]+)%$/),h=y?parseFloat(y[1]):NaN;v=(isNaN(h)?0:h/100)*this.fontSize}return v}localPositionToTextCoords(v,y=new ze){y.copy(v);const h=this.curveRadius;return h&&(y.x=Math.atan2(v.x,Math.abs(h)-Math.abs(v.z))*Math.abs(h)),y}worldPositionToTextCoords(v,y=new ze){return s.copy(v),this.localPositionToTextCoords(this.worldToLocal(s),y)}raycast(v,y){const{textRenderInfo:h,curveRadius:x}=this;if(h){const E=h.blockBounds,P=x?l():o(),U=P.geometry,{position:N,uv:G}=U.attributes;for(let J=0;J<G.count;J++){let T=E[0]+G.getX(J)*(E[2]-E[0]);const k=E[1]+G.getY(J)*(E[3]-E[1]);let D=0;x&&(D=x-Math.cos(T/x)*x,T=Math.sin(T/x)*x),N.setXYZ(J,T,k,D)}U.boundingSphere=this.geometry.boundingSphere,U.boundingBox=this.geometry.boundingBox,P.matrixWorld=this.matrixWorld,P.material.side=this.material.side,e.length=0,P.raycast(v,e);for(let J=0;J<e.length;J++)e[J].object=this,y.push(e[J])}}copy(v){const y=this.geometry;return super.copy(v),this.geometry=y,w.forEach(h=>{this[h]=v[h]}),this}clone(){return new this.constructor().copy(this)}}p.forEach(m=>{const v="_private_"+m;Object.defineProperty(b.prototype,m,{get(){return this[v]},set(y){y!==this[v]&&(this[v]=y,this._needsSync=!0)}})});let S=!1;return Object.defineProperty(b.prototype,"anchor",{get(){return this._deprecated_anchor},set(m){this._deprecated_anchor=m,S||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),S=!0),Array.isArray(m)?(this.anchorX=`${(+m[0]||0)*100}%`,this.anchorY=`${(+m[1]||0)*100}%`):this.anchorX=this.anchorY=0}}),b})();function bo(c,n,d=(s,t)=>s===t){if(c===n)return!0;if(!c||!n)return!1;const s=c.length;if(n.length!==s)return!1;for(let t=0;t<s;t++)if(!d(c[t],n[t]))return!1;return!0}const tn=[];function So(c,n,d=!1,s={}){for(const e of tn)if(bo(n,e.keys,e.equal)){if(d)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return e.response;if(!d)throw e.promise}const t={keys:n,equal:s.equal,promise:c(...n).then(e=>t.response=e).then(()=>{s.lifespan&&s.lifespan>0&&setTimeout(()=>{const e=tn.indexOf(t);e!==-1&&tn.splice(e,1)},s.lifespan)}).catch(e=>t.error=e)};if(tn.push(t),!d)throw t.promise}const wo=(c,n,d)=>So(c,n,!1,d),Kr=ge.forwardRef(({anchorX:c="center",anchorY:n="middle",font:d,children:s,characters:t,onSync:e,...i},a)=>{const r=nt(({invalidate:u})=>u),[o]=ge.useState(()=>new yo),[l,f]=ge.useMemo(()=>{const u=[];let p="";return ge.Children.forEach(s,w=>{typeof w=="string"||typeof w=="number"?p+=w:u.push(w)}),[u,p]},[s]);return wo(()=>new Promise(u=>io({font:d,characters:t},u)),["troika-text",d,t]),ge.useLayoutEffect(()=>{o.sync(()=>{r(),e&&e(o)})}),ge.useEffect(()=>()=>o.dispose(),[o]),ge.createElement("primitive",an({object:o,ref:a,font:d,text:f,anchorX:c,anchorY:n},i),l)}),xo=ge.forwardRef(({makeDefault:c,camera:n,regress:d,domElement:s,enableDamping:t=!0,onChange:e,onStart:i,onEnd:a,...r},o)=>{const l=nt(h=>h.invalidate),f=nt(h=>h.camera),u=nt(h=>h.gl),p=nt(h=>h.events),w=nt(h=>h.set),b=nt(h=>h.get),S=nt(h=>h.performance),m=n||f,v=s||p.connected||u.domElement,y=ge.useMemo(()=>new ka(m),[m]);return sn(()=>{y.enabled&&y.update()}),ge.useEffect(()=>(y.connect(v),()=>{y.dispose()}),[v,d,y,l]),ge.useEffect(()=>{const h=x=>{l(),d&&S.regress(),e&&e(x)};return y.addEventListener("change",h),i&&y.addEventListener("start",i),a&&y.addEventListener("end",a),()=>{i&&y.removeEventListener("start",i),a&&y.removeEventListener("end",a),y.removeEventListener("change",h)}},[e,i,a]),ge.useEffect(()=>{if(c){const h=b().controls;return w({controls:y}),()=>w({controls:h})}},[c,y]),ge.createElement("primitive",an({ref:o,object:y,enableDamping:t},r))});class _o extends Fr{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const To=c=>new ke().setFromSpherical(new Rn(c,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Eo=ge.forwardRef(({radius:c=100,depth:n=50,count:d=5e3,saturation:s=0,factor:t=4,fade:e=!1},i)=>{const a=ge.useRef(),[r,o,l]=ge.useMemo(()=>{const u=[],p=[],w=Array.from({length:d},()=>(.5+.5*Math.random())*t),b=new _t;let S=c+n;const m=n/d;for(let v=0;v<d;v++)S-=m*Math.random(),u.push(...To(S).toArray()),b.setHSL(v/d,s,.9),p.push(b.r,b.g,b.b);return[new Float32Array(u),new Float32Array(p),new Float32Array(w)]},[d,n,t,c,s]);sn(u=>a.current&&(a.current.uniforms.time.value=u.clock.getElapsedTime()));const[f]=ge.useState(()=>new _o);return ge.createElement("points",{ref:i},ge.createElement("bufferGeometry",{attach:"geometry"},ge.createElement("bufferAttribute",{attachObject:["attributes","position"],args:[r,3]}),ge.createElement("bufferAttribute",{attachObject:["attributes","color"],args:[o,3]}),ge.createElement("bufferAttribute",{attachObject:["attributes","size"],args:[l,1]})),ge.createElement("primitive",{dispose:void 0,ref:a,object:f,attach:"material",blending:ba,"uniforms-fade-value":e,transparent:!0,vertexColors:!0}))}),Uo={id:"root",name:"Ancient Progenitor",year:1960,type:"Ruderalis",children:[{id:"thai",name:"Thai (Landrace)",year:1970,type:"Sativa",children:[{id:"haze",name:"Original Haze",year:1975,type:"Sativa",children:[{id:"jack",name:"Jack Herer",year:1990,type:"Sativa",children:[]},{id:"silver-haze",name:"Super Silver Haze",year:1995,type:"Sativa",children:[]}]}]},{id:"afghani",name:"Afghani (Landrace)",year:1970,type:"Indica",children:[{id:"nl",name:"Northern Lights",year:1985,type:"Indica",children:[{id:"shiva",name:"Shiva Skunk",year:1987,type:"Indica",children:[]}]},{id:"skunk1",name:"Skunk #1",year:1978,type:"Hybrid",children:[{id:"cheese",name:"UK Cheese",year:1995,type:"Hybrid",children:[]},{id:"sour-diesel",name:"Sour Diesel",year:1992,type:"Sativa",children:[]}]}]},{id:"kush-line",name:"Hindu Kush",year:1970,type:"Indica",children:[{id:"og-kush",name:"OG Kush",year:1992,type:"Hybrid",children:[{id:"gsc",name:"Girl Scout Cookies",year:2010,type:"Hybrid",children:[{id:"sherbert",name:"Sunset Sherbert",year:2014,type:"Hybrid",children:[{id:"gelato",name:"Gelato",year:2016,type:"Hybrid",children:[]}]}]},{id:"bubba",name:"Bubba Kush",year:1996,type:"Indica",children:[]}]}]}]},Zr=(c,n=0,d=0,s=Math.PI*2,t)=>{const e=[],o=(c.year-1960)*.5,l=d+s/2,f=n*1.5,u=Math.cos(l)*f,p=Math.sin(l)*f,w=new ke(u,o,p);if(e.push({...c,position:w,parentPosition:t}),c.children&&c.children.length>0){const b=s/c.children.length;c.children.forEach((S,m)=>{const v=Zr(S,n+1,d+b*m,b,w);e.push(...v)})}return e},Ao=({targetNode:c})=>{const{camera:n,controls:d}=nt();return sn((s,t)=>{if(c){const{x:e,y:i,z:a}=c.position,r=new ke(0,0,25),o=new ke(e,i-5,a),l=o.clone().add(r);s.camera.position.lerp(l,4*t);const f=d;f&&(f.target.lerp(o,4*t),f.update())}}),null},ko=({node:c,searchQuery:n,isFocused:d,onSelect:s})=>{const[t,e]=ge.useState(!1),i=ge.useRef(null),a=n===""||c.name.toLowerCase().includes(n.toLowerCase()),r=!a;sn(f=>{if(i.current)if(i.current.rotation.y+=.01,d){const u=1.5+Math.sin(f.clock.elapsedTime*8)*.2;i.current.scale.setScalar(u)}else if(a&&n!==""){const u=1+Math.sin(f.clock.elapsedTime*4)*.1;i.current.scale.setScalar(u)}else t?i.current.scale.setScalar(1.3):i.current.scale.setScalar(1)});const l=(f=>{switch(f){case"Sativa":return"#ff6b6b";case"Indica":return"#4ecdc4";case"Hybrid":return"#ffe66d";default:return"#f7fff7"}})(c.type);return de.jsxs("group",{position:c.position,children:[c.parentPosition&&de.jsx(La,{points:[new ke(c.parentPosition.x-c.position.x,c.parentPosition.y-c.position.y,c.parentPosition.z-c.position.z),new ke(0,0,0)],color:r?"#444":"white",lineWidth:r?.5:1,opacity:r?.1:.3,transparent:!0}),de.jsxs("mesh",{ref:i,onClick:f=>{f.stopPropagation(),s(c)},onPointerOver:f=>{f.stopPropagation(),e(!0)},onPointerOut:()=>e(!1),children:[de.jsx("icosahedronGeometry",{args:[.4,1]}),de.jsx("meshStandardMaterial",{color:d?"#fff":l,emissive:new _t(l),emissiveIntensity:d?1:t?.6:.2,transparent:!0,opacity:r?.1:1,wireframe:!t&&!d})]}),de.jsx(Kr,{position:[0,.7,0],fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",fillOpacity:r?.1:1,children:c.name})]})},Co=()=>{const c=[];for(let i=1960;i<=2020;i+=10){const a=(i-1960)*.5;c.push(de.jsxs("group",{position:[0,a,0],children:[de.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[de.jsx("ringGeometry",{args:[5,5.05,32]}),de.jsx("meshBasicMaterial",{color:"white",opacity:.05,transparent:!0,side:Hn})]}),de.jsx(Kr,{position:[5.5,0,0],fontSize:.5,color:"#666",anchorX:"left",anchorY:"middle",children:i})]},i))}return de.jsx("group",{children:c})};function Oo(){const c=ge.useMemo(()=>Zr(Uo),[]),[n,d]=ge.useState(""),[s,t]=ge.useState(null);ge.useEffect(()=>{const o=l=>{l.key==="Escape"&&(t(null),d(""))};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[]);const e=ge.useMemo(()=>n?c.filter(o=>o.name.toLowerCase().includes(n.toLowerCase())):[],[n,c]),i=o=>{t(o),d(o.name)},a=()=>{t(null),d("")},r=window.innerHeight-76;return de.jsxs("div",{className:"explorer-container",style:{height:r},children:[de.jsxs("div",{className:"info-panel",onClick:o=>o.stopPropagation(),children:[de.jsx("h3",{children:"Phylogenetic Tree"}),de.jsx("p",{children:"Explore the historical evolution of genetic strains with the 3D phylogenetic tree."}),de.jsxs("div",{className:"search-container",children:[de.jsxs("div",{className:"chatgpt-input-wrapper",children:[de.jsx("input",{type:"text",placeholder:"Search strains...",value:n,onChange:o=>{d(o.target.value),o.target.value===""&&t(null)},className:"search-input"}),de.jsx("button",{className:"microphone-button",children:de.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:de.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3C10.3431 3 9 4.34315 9 6V11C9 12.6569 10.3431 14 12 14C13.6569 14 15 12.6569 15 11V6C15 4.34315 13.6569 3 12 3ZM7 11C7 13.7614 9.23858 16 12 16C14.7614 16 17 13.7614 17 11H19C19 14.4183 16.2091 17.2091 13 17.7231V21H11V17.7231C7.79086 17.2091 5 14.4183 5 11H7Z",fill:"currentColor"})})})]}),n&&de.jsx("button",{className:"clear-search",onClick:a,children:""})]}),e.length>0&&n!==s?.name&&de.jsx("div",{className:"search-results",children:e.map(o=>de.jsxs("div",{onClick:l=>{l.stopPropagation(),i(o)},className:"result-item",children:[de.jsx("span",{children:o.name}),de.jsx("span",{className:"result-item-year",children:o.year})]},o.id))}),de.jsxs("div",{className:"legend",children:[de.jsxs("div",{className:"legend-item",children:[de.jsx("div",{className:"legend-color-box",style:{background:"#ff6b6b"}})," Sativa"]}),de.jsxs("div",{className:"legend-item",children:[de.jsx("div",{className:"legend-color-box",style:{background:"#4ecdc4"}})," Indica"]}),de.jsxs("div",{className:"legend-item",children:[de.jsx("div",{className:"legend-color-box",style:{background:"#ffe66d"}})," Hybrid"]})]})]}),de.jsxs(Sa,{camera:{position:[15,20,25],fov:45},onPointerMissed:a,children:[de.jsx("color",{attach:"background",args:["#050505"]}),de.jsx(Ao,{targetNode:s}),de.jsx("ambientLight",{intensity:.4}),de.jsx("pointLight",{position:[10,10,10],intensity:1}),de.jsx("spotLight",{position:[0,50,0],angle:.5,penumbra:1,intensity:2}),de.jsx(Eo,{radius:100,depth:50,count:3e3,factor:4,saturation:0,fade:!0}),de.jsx(Co,{}),de.jsxs("group",{position:[0,-5,0],children:[de.jsxs("mesh",{position:[0,15,0],children:[de.jsx("cylinderGeometry",{args:[.02,.02,40,8]}),de.jsx("meshBasicMaterial",{color:"#222",transparent:!0,opacity:.5})]}),c.map(o=>de.jsx(ko,{node:o,searchQuery:n,isFocused:s?.id===o.id,onSelect:i},o.id))]}),de.jsx(xo,{makeDefault:!0,enablePan:!0,enableZoom:!0,maxPolarAngle:Math.PI/1.5,autoRotate:!s&&n==="",autoRotateSpeed:.5})]})]})}export{Oo as default};
