import{_ as cn,j as ge,h as $t}from"./mantine-vendor-DFEgyK1l.js";import{r as be}from"./react-vendor-B2JW2VNT.js";import{R as Yr,V as Le,S as jn,Q as wr,O as Fn,a as We,P as Ln,M as bt,T as xt,b as wa,c as Sa,I as Xr,F as Sr,d as Nn,e as St,W as _a,B as Bt,f as Kn,g as Kr,U as zn,h as _r,i as fn,j as lt,L as Ua,k as Zr,l as Ta,u as Ke,C as ct,m as Ea,n as Aa,o as ka,p as Ca,q as Da,s as Ma,t as Fa,v as Ur,w as La,D as Jr,x as Zn,y as Pa,z as Gt,A as Oa,E as Ra}from"./three-vendor-tR95i9su.js";import{c as Ia}from"./index-BPeE29mg.js";import"./index-C7uzTQKX.js";const Qr=parseInt(Yr.replace(/\D+/g,"")),qr=Qr>=125?"uv1":"uv2";var Ba=Object.defineProperty,Ga=(d,n,f)=>n in d?Ba(d,n,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[n]=f,ja=(d,n,f)=>(Ga(d,n+"",f),f);class Na{constructor(){ja(this,"_listeners")}addEventListener(n,f){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[n]===void 0&&(s[n]=[]),s[n].indexOf(f)===-1&&s[n].push(f)}hasEventListener(n,f){if(this._listeners===void 0)return!1;const s=this._listeners;return s[n]!==void 0&&s[n].indexOf(f)!==-1}removeEventListener(n,f){if(this._listeners===void 0)return;const t=this._listeners[n];if(t!==void 0){const e=t.indexOf(f);e!==-1&&t.splice(e,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const s=this._listeners[n.type];if(s!==void 0){n.target=this;const t=s.slice(0);for(let e=0,o=t.length;e<o;e++)t[e].call(this,n);n.target=null}}}var za=Object.defineProperty,Wa=(d,n,f)=>n in d?za(d,n,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[n]=f,ve=(d,n,f)=>(Wa(d,typeof n!="symbol"?n+"":n,f),f);const en=new wa,Tr=new Sa,Ha=Math.cos(70*(Math.PI/180)),Er=(d,n)=>(d%n+n)%n;let Va=class extends Na{constructor(n,f){super(),ve(this,"object"),ve(this,"domElement"),ve(this,"enabled",!0),ve(this,"target",new Le),ve(this,"minDistance",0),ve(this,"maxDistance",1/0),ve(this,"minZoom",0),ve(this,"maxZoom",1/0),ve(this,"minPolarAngle",0),ve(this,"maxPolarAngle",Math.PI),ve(this,"minAzimuthAngle",-1/0),ve(this,"maxAzimuthAngle",1/0),ve(this,"enableDamping",!1),ve(this,"dampingFactor",.05),ve(this,"enableZoom",!0),ve(this,"zoomSpeed",1),ve(this,"enableRotate",!0),ve(this,"rotateSpeed",1),ve(this,"enablePan",!0),ve(this,"panSpeed",1),ve(this,"screenSpacePanning",!0),ve(this,"keyPanSpeed",7),ve(this,"zoomToCursor",!1),ve(this,"autoRotate",!1),ve(this,"autoRotateSpeed",2),ve(this,"reverseOrbit",!1),ve(this,"reverseHorizontalOrbit",!1),ve(this,"reverseVerticalOrbit",!1),ve(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ve(this,"mouseButtons",{LEFT:bt.ROTATE,MIDDLE:bt.DOLLY,RIGHT:bt.PAN}),ve(this,"touches",{ONE:xt.ROTATE,TWO:xt.DOLLY_PAN}),ve(this,"target0"),ve(this,"position0"),ve(this,"zoom0"),ve(this,"_domElementKeyEvents",null),ve(this,"getPolarAngle"),ve(this,"getAzimuthalAngle"),ve(this,"setPolarAngle"),ve(this,"setAzimuthalAngle"),ve(this,"getDistance"),ve(this,"getZoomScale"),ve(this,"listenToKeyEvents"),ve(this,"stopListenToKeyEvents"),ve(this,"saveState"),ve(this,"reset"),ve(this,"update"),ve(this,"connect"),ve(this,"dispose"),ve(this,"dollyIn"),ve(this,"dollyOut"),ve(this,"getScale"),ve(this,"setScale"),this.object=n,this.domElement=f,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>l.phi,this.getAzimuthalAngle=()=>l.theta,this.setPolarAngle=y=>{let G=Er(y,2*Math.PI),ae=l.phi;ae<0&&(ae+=2*Math.PI),G<0&&(G+=2*Math.PI);let fe=Math.abs(G-ae);2*Math.PI-fe<fe&&(G<ae?G+=2*Math.PI:ae+=2*Math.PI),c.phi=G-ae,s.update()},this.setAzimuthalAngle=y=>{let G=Er(y,2*Math.PI),ae=l.theta;ae<0&&(ae+=2*Math.PI),G<0&&(G+=2*Math.PI);let fe=Math.abs(G-ae);2*Math.PI-fe<fe&&(G<ae?G+=2*Math.PI:ae+=2*Math.PI),c.theta=G-ae,s.update()},this.getDistance=()=>s.object.position.distanceTo(s.target),this.listenToKeyEvents=y=>{y.addEventListener("keydown",ce),this._domElementKeyEvents=y},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ce),this._domElementKeyEvents=null},this.saveState=()=>{s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=()=>{s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(t),s.update(),r=a.NONE},this.update=(()=>{const y=new Le,G=new Le(0,1,0),ae=new wr().setFromUnitVectors(n.up,G),fe=ae.clone().invert(),$=new Le,Te=new wr,Be=2*Math.PI;return function(){const Ee=s.object.position;ae.setFromUnitVectors(n.up,G),fe.copy(ae).invert(),y.copy(Ee).sub(s.target),y.applyQuaternion(ae),l.setFromVector3(y),s.autoRotate&&r===a.NONE&&D(S()),s.enableDamping?(l.theta+=c.theta*s.dampingFactor,l.phi+=c.phi*s.dampingFactor):(l.theta+=c.theta,l.phi+=c.phi);let Ce=s.minAzimuthAngle,Ae=s.maxAzimuthAngle;isFinite(Ce)&&isFinite(Ae)&&(Ce<-Math.PI?Ce+=Be:Ce>Math.PI&&(Ce-=Be),Ae<-Math.PI?Ae+=Be:Ae>Math.PI&&(Ae-=Be),Ce<=Ae?l.theta=Math.max(Ce,Math.min(Ae,l.theta)):l.theta=l.theta>(Ce+Ae)/2?Math.max(Ce,l.theta):Math.min(Ae,l.theta)),l.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,l.phi)),l.makeSafe(),s.enableDamping===!0?s.target.addScaledVector(h,s.dampingFactor):s.target.add(h),s.zoomToCursor&&I||s.object.isOrthographicCamera?l.radius=M(l.radius):l.radius=M(l.radius*u),y.setFromSpherical(l),y.applyQuaternion(fe),Ee.copy(s.target).add(y),s.object.matrixAutoUpdate||s.object.updateMatrix(),s.object.lookAt(s.target),s.enableDamping===!0?(c.theta*=1-s.dampingFactor,c.phi*=1-s.dampingFactor,h.multiplyScalar(1-s.dampingFactor)):(c.set(0,0,0),h.set(0,0,0));let ye=!1;if(s.zoomToCursor&&I){let De=null;if(s.object instanceof Ln&&s.object.isPerspectiveCamera){const Oe=y.length();De=M(Oe*u);const Re=Oe-De;s.object.position.addScaledVector(A,Re),s.object.updateMatrixWorld()}else if(s.object.isOrthographicCamera){const Oe=new Le(k.x,k.y,0);Oe.unproject(s.object),s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/u)),s.object.updateProjectionMatrix(),ye=!0;const Re=new Le(k.x,k.y,0);Re.unproject(s.object),s.object.position.sub(Re).add(Oe),s.object.updateMatrixWorld(),De=y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;De!==null&&(s.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(De).add(s.object.position):(en.origin.copy(s.object.position),en.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(en.direction))<Ha?n.lookAt(s.target):(Tr.setFromNormalAndCoplanarPoint(s.object.up,s.target),en.intersectPlane(Tr,s.target))))}else s.object instanceof Fn&&s.object.isOrthographicCamera&&(ye=u!==1,ye&&(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/u)),s.object.updateProjectionMatrix()));return u=1,I=!1,ye||$.distanceToSquared(s.object.position)>i||8*(1-Te.dot(s.object.quaternion))>i?(s.dispatchEvent(t),$.copy(s.object.position),Te.copy(s.object.quaternion),ye=!1,!0):!1}})(),this.connect=y=>{s.domElement=y,s.domElement.style.touchAction="none",s.domElement.addEventListener("contextmenu",Me),s.domElement.addEventListener("pointerdown",xe),s.domElement.addEventListener("pointercancel",re),s.domElement.addEventListener("wheel",le)},this.dispose=()=>{var y,G,ae,fe,$,Te;s.domElement&&(s.domElement.style.touchAction="auto"),(y=s.domElement)==null||y.removeEventListener("contextmenu",Me),(G=s.domElement)==null||G.removeEventListener("pointerdown",xe),(ae=s.domElement)==null||ae.removeEventListener("pointercancel",re),(fe=s.domElement)==null||fe.removeEventListener("wheel",le),($=s.domElement)==null||$.ownerDocument.removeEventListener("pointermove",Q),(Te=s.domElement)==null||Te.ownerDocument.removeEventListener("pointerup",re),s._domElementKeyEvents!==null&&s._domElementKeyEvents.removeEventListener("keydown",ce)};const s=this,t={type:"change"},e={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=a.NONE;const i=1e-6,l=new jn,c=new jn;let u=1;const h=new Le,v=new We,b=new We,m=new We,L=new We,_=new We,x=new We,p=new We,w=new We,E=new We,A=new Le,k=new We;let I=!1;const T=[],K={};function S(){return 2*Math.PI/60/60*s.autoRotateSpeed}function F(){return Math.pow(.95,s.zoomSpeed)}function D(y){s.reverseOrbit||s.reverseHorizontalOrbit?c.theta+=y:c.theta-=y}function Y(y){s.reverseOrbit||s.reverseVerticalOrbit?c.phi+=y:c.phi-=y}const H=(()=>{const y=new Le;return function(ae,fe){y.setFromMatrixColumn(fe,0),y.multiplyScalar(-ae),h.add(y)}})(),ee=(()=>{const y=new Le;return function(ae,fe){s.screenSpacePanning===!0?y.setFromMatrixColumn(fe,1):(y.setFromMatrixColumn(fe,0),y.crossVectors(s.object.up,y)),y.multiplyScalar(ae),h.add(y)}})(),te=(()=>{const y=new Le;return function(ae,fe){const $=s.domElement;if($&&s.object instanceof Ln&&s.object.isPerspectiveCamera){const Te=s.object.position;y.copy(Te).sub(s.target);let Be=y.length();Be*=Math.tan(s.object.fov/2*Math.PI/180),H(2*ae*Be/$.clientHeight,s.object.matrix),ee(2*fe*Be/$.clientHeight,s.object.matrix)}else $&&s.object instanceof Fn&&s.object.isOrthographicCamera?(H(ae*(s.object.right-s.object.left)/s.object.zoom/$.clientWidth,s.object.matrix),ee(fe*(s.object.top-s.object.bottom)/s.object.zoom/$.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}})();function j(y){s.object instanceof Ln&&s.object.isPerspectiveCamera||s.object instanceof Fn&&s.object.isOrthographicCamera?u=y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function R(y){j(u/y)}function g(y){j(u*y)}function U(y){if(!s.zoomToCursor||!s.domElement)return;I=!0;const G=s.domElement.getBoundingClientRect(),ae=y.clientX-G.left,fe=y.clientY-G.top,$=G.width,Te=G.height;k.x=ae/$*2-1,k.y=-(fe/Te)*2+1,A.set(k.x,k.y,1).unproject(s.object).sub(s.object.position).normalize()}function M(y){return Math.max(s.minDistance,Math.min(s.maxDistance,y))}function P(y){v.set(y.clientX,y.clientY)}function C(y){U(y),p.set(y.clientX,y.clientY)}function z(y){L.set(y.clientX,y.clientY)}function O(y){b.set(y.clientX,y.clientY),m.subVectors(b,v).multiplyScalar(s.rotateSpeed);const G=s.domElement;G&&(D(2*Math.PI*m.x/G.clientHeight),Y(2*Math.PI*m.y/G.clientHeight)),v.copy(b),s.update()}function N(y){w.set(y.clientX,y.clientY),E.subVectors(w,p),E.y>0?R(F()):E.y<0&&g(F()),p.copy(w),s.update()}function Z(y){_.set(y.clientX,y.clientY),x.subVectors(_,L).multiplyScalar(s.panSpeed),te(x.x,x.y),L.copy(_),s.update()}function oe(y){U(y),y.deltaY<0?g(F()):y.deltaY>0&&R(F()),s.update()}function X(y){let G=!1;switch(y.code){case s.keys.UP:te(0,s.keyPanSpeed),G=!0;break;case s.keys.BOTTOM:te(0,-s.keyPanSpeed),G=!0;break;case s.keys.LEFT:te(s.keyPanSpeed,0),G=!0;break;case s.keys.RIGHT:te(-s.keyPanSpeed,0),G=!0;break}G&&(y.preventDefault(),s.update())}function W(){if(T.length==1)v.set(T[0].pageX,T[0].pageY);else{const y=.5*(T[0].pageX+T[1].pageX),G=.5*(T[0].pageY+T[1].pageY);v.set(y,G)}}function we(){if(T.length==1)L.set(T[0].pageX,T[0].pageY);else{const y=.5*(T[0].pageX+T[1].pageX),G=.5*(T[0].pageY+T[1].pageY);L.set(y,G)}}function me(){const y=T[0].pageX-T[1].pageX,G=T[0].pageY-T[1].pageY,ae=Math.sqrt(y*y+G*G);p.set(0,ae)}function q(){s.enableZoom&&me(),s.enablePan&&we()}function se(){s.enableZoom&&me(),s.enableRotate&&W()}function de(y){if(T.length==1)b.set(y.pageX,y.pageY);else{const ae=ue(y),fe=.5*(y.pageX+ae.x),$=.5*(y.pageY+ae.y);b.set(fe,$)}m.subVectors(b,v).multiplyScalar(s.rotateSpeed);const G=s.domElement;G&&(D(2*Math.PI*m.x/G.clientHeight),Y(2*Math.PI*m.y/G.clientHeight)),v.copy(b)}function V(y){if(T.length==1)_.set(y.pageX,y.pageY);else{const G=ue(y),ae=.5*(y.pageX+G.x),fe=.5*(y.pageY+G.y);_.set(ae,fe)}x.subVectors(_,L).multiplyScalar(s.panSpeed),te(x.x,x.y),L.copy(_)}function ie(y){const G=ue(y),ae=y.pageX-G.x,fe=y.pageY-G.y,$=Math.sqrt(ae*ae+fe*fe);w.set(0,$),E.set(0,Math.pow(w.y/p.y,s.zoomSpeed)),R(E.y),p.copy(w)}function ne(y){s.enableZoom&&ie(y),s.enablePan&&V(y)}function B(y){s.enableZoom&&ie(y),s.enableRotate&&de(y)}function xe(y){var G,ae;s.enabled!==!1&&(T.length===0&&((G=s.domElement)==null||G.ownerDocument.addEventListener("pointermove",Q),(ae=s.domElement)==null||ae.ownerDocument.addEventListener("pointerup",re)),Pe(y),y.pointerType==="touch"?pe(y):J(y))}function Q(y){s.enabled!==!1&&(y.pointerType==="touch"?Se(y):ke(y))}function re(y){var G,ae,fe;Ue(y),T.length===0&&((G=s.domElement)==null||G.releasePointerCapture(y.pointerId),(ae=s.domElement)==null||ae.ownerDocument.removeEventListener("pointermove",Q),(fe=s.domElement)==null||fe.ownerDocument.removeEventListener("pointerup",re)),s.dispatchEvent(o),r=a.NONE}function J(y){let G;switch(y.button){case 0:G=s.mouseButtons.LEFT;break;case 1:G=s.mouseButtons.MIDDLE;break;case 2:G=s.mouseButtons.RIGHT;break;default:G=-1}switch(G){case bt.DOLLY:if(s.enableZoom===!1)return;C(y),r=a.DOLLY;break;case bt.ROTATE:if(y.ctrlKey||y.metaKey||y.shiftKey){if(s.enablePan===!1)return;z(y),r=a.PAN}else{if(s.enableRotate===!1)return;P(y),r=a.ROTATE}break;case bt.PAN:if(y.ctrlKey||y.metaKey||y.shiftKey){if(s.enableRotate===!1)return;P(y),r=a.ROTATE}else{if(s.enablePan===!1)return;z(y),r=a.PAN}break;default:r=a.NONE}r!==a.NONE&&s.dispatchEvent(e)}function ke(y){if(s.enabled!==!1)switch(r){case a.ROTATE:if(s.enableRotate===!1)return;O(y);break;case a.DOLLY:if(s.enableZoom===!1)return;N(y);break;case a.PAN:if(s.enablePan===!1)return;Z(y);break}}function le(y){s.enabled===!1||s.enableZoom===!1||r!==a.NONE&&r!==a.ROTATE||(y.preventDefault(),s.dispatchEvent(e),oe(y),s.dispatchEvent(o))}function ce(y){s.enabled===!1||s.enablePan===!1||X(y)}function pe(y){switch(_e(y),T.length){case 1:switch(s.touches.ONE){case xt.ROTATE:if(s.enableRotate===!1)return;W(),r=a.TOUCH_ROTATE;break;case xt.PAN:if(s.enablePan===!1)return;we(),r=a.TOUCH_PAN;break;default:r=a.NONE}break;case 2:switch(s.touches.TWO){case xt.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;q(),r=a.TOUCH_DOLLY_PAN;break;case xt.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;se(),r=a.TOUCH_DOLLY_ROTATE;break;default:r=a.NONE}break;default:r=a.NONE}r!==a.NONE&&s.dispatchEvent(e)}function Se(y){switch(_e(y),r){case a.TOUCH_ROTATE:if(s.enableRotate===!1)return;de(y),s.update();break;case a.TOUCH_PAN:if(s.enablePan===!1)return;V(y),s.update();break;case a.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;ne(y),s.update();break;case a.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;B(y),s.update();break;default:r=a.NONE}}function Me(y){s.enabled!==!1&&y.preventDefault()}function Pe(y){T.push(y)}function Ue(y){delete K[y.pointerId];for(let G=0;G<T.length;G++)if(T[G].pointerId==y.pointerId){T.splice(G,1);return}}function _e(y){let G=K[y.pointerId];G===void 0&&(G=new We,K[y.pointerId]=G),G.set(y.pageX,y.pageY)}function ue(y){const G=y.pointerId===T[0].pointerId?T[1]:T[0];return K[G.pointerId]}this.dollyIn=(y=F())=>{g(y),s.update()},this.dollyOut=(y=F())=>{R(y),s.update()},this.getScale=()=>u,this.setScale=y=>{j(y),s.update()},this.getZoomScale=()=>F(),f!==void 0&&this.connect(f),this.update()}};const Ar=new Bt,tn=new Le;class Jn extends Xr{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const n=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],f=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],s=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(s),this.setAttribute("position",new Sr(n,3)),this.setAttribute("uv",new Sr(f,2))}applyMatrix4(n){const f=this.attributes.instanceStart,s=this.attributes.instanceEnd;return f!==void 0&&(f.applyMatrix4(n),s.applyMatrix4(n),f.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(n){let f;n instanceof Float32Array?f=n:Array.isArray(n)&&(f=new Float32Array(n));const s=new Nn(f,6,1);return this.setAttribute("instanceStart",new St(s,3,0)),this.setAttribute("instanceEnd",new St(s,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(n,f=3){let s;n instanceof Float32Array?s=n:Array.isArray(n)&&(s=new Float32Array(n));const t=new Nn(s,f*2,1);return this.setAttribute("instanceColorStart",new St(t,f,0)),this.setAttribute("instanceColorEnd",new St(t,f,f)),this}fromWireframeGeometry(n){return this.setPositions(n.attributes.position.array),this}fromEdgesGeometry(n){return this.setPositions(n.attributes.position.array),this}fromMesh(n){return this.fromWireframeGeometry(new _a(n.geometry)),this}fromLineSegments(n){const f=n.geometry;return this.setPositions(f.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bt);const n=this.attributes.instanceStart,f=this.attributes.instanceEnd;n!==void 0&&f!==void 0&&(this.boundingBox.setFromBufferAttribute(n),Ar.setFromBufferAttribute(f),this.boundingBox.union(Ar))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kn),this.boundingBox===null&&this.computeBoundingBox();const n=this.attributes.instanceStart,f=this.attributes.instanceEnd;if(n!==void 0&&f!==void 0){const s=this.boundingSphere.center;this.boundingBox.getCenter(s);let t=0;for(let e=0,o=n.count;e<o;e++)tn.fromBufferAttribute(n,e),t=Math.max(t,s.distanceToSquared(tn)),tn.fromBufferAttribute(f,e),t=Math.max(t,s.distanceToSquared(tn));this.boundingSphere.radius=Math.sqrt(t),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(n){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(n)}}class $r extends Jn{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(n){const f=n.length-3,s=new Float32Array(2*f);for(let t=0;t<f;t+=3)s[2*t]=n[t],s[2*t+1]=n[t+1],s[2*t+2]=n[t+2],s[2*t+3]=n[t+3],s[2*t+4]=n[t+4],s[2*t+5]=n[t+5];return super.setPositions(s),this}setColors(n,f=3){const s=n.length-f,t=new Float32Array(2*s);if(f===3)for(let e=0;e<s;e+=f)t[2*e]=n[e],t[2*e+1]=n[e+1],t[2*e+2]=n[e+2],t[2*e+3]=n[e+3],t[2*e+4]=n[e+4],t[2*e+5]=n[e+5];else for(let e=0;e<s;e+=f)t[2*e]=n[e],t[2*e+1]=n[e+1],t[2*e+2]=n[e+2],t[2*e+3]=n[e+3],t[2*e+4]=n[e+4],t[2*e+5]=n[e+5],t[2*e+6]=n[e+6],t[2*e+7]=n[e+7];return super.setColors(t,f),this}fromLine(n){const f=n.geometry;return this.setPositions(f.attributes.position.array),this}}class Qn extends Kr{constructor(n){super({type:"LineMaterial",uniforms:zn.clone(zn.merge([_r.common,_r.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new We(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${Qr>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(f){this.uniforms.diffuse.value=f}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(f){f===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(f){this.uniforms.linewidth.value=f}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(f){!!f!="USE_DASH"in this.defines&&(this.needsUpdate=!0),f===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(f){this.uniforms.dashScale.value=f}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(f){this.uniforms.dashSize.value=f}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(f){this.uniforms.dashOffset.value=f}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(f){this.uniforms.gapSize.value=f}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(f){this.uniforms.opacity.value=f}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(f){this.uniforms.resolution.value.copy(f)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(f){!!f!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),f===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(n)}}const Pn=new lt,kr=new Le,Cr=new Le,Ge=new lt,je=new lt,$e=new lt,On=new Le,Rn=new Zr,ze=new Ua,Dr=new Le,nn=new Bt,rn=new Kn,et=new lt;let tt,ht;function Mr(d,n,f){return et.set(0,0,-n,1).applyMatrix4(d.projectionMatrix),et.multiplyScalar(1/et.w),et.x=ht/f.width,et.y=ht/f.height,et.applyMatrix4(d.projectionMatrixInverse),et.multiplyScalar(1/et.w),Math.abs(Math.max(et.x,et.y))}function Ya(d,n){const f=d.matrixWorld,s=d.geometry,t=s.attributes.instanceStart,e=s.attributes.instanceEnd,o=Math.min(s.instanceCount,t.count);for(let a=0,r=o;a<r;a++){ze.start.fromBufferAttribute(t,a),ze.end.fromBufferAttribute(e,a),ze.applyMatrix4(f);const i=new Le,l=new Le;tt.distanceSqToSegment(ze.start,ze.end,l,i),l.distanceTo(i)<ht*.5&&n.push({point:l,pointOnLine:i,distance:tt.origin.distanceTo(l),object:d,face:null,faceIndex:a,uv:null,[qr]:null})}}function Xa(d,n,f){const s=n.projectionMatrix,e=d.material.resolution,o=d.matrixWorld,a=d.geometry,r=a.attributes.instanceStart,i=a.attributes.instanceEnd,l=Math.min(a.instanceCount,r.count),c=-n.near;tt.at(1,$e),$e.w=1,$e.applyMatrix4(n.matrixWorldInverse),$e.applyMatrix4(s),$e.multiplyScalar(1/$e.w),$e.x*=e.x/2,$e.y*=e.y/2,$e.z=0,On.copy($e),Rn.multiplyMatrices(n.matrixWorldInverse,o);for(let u=0,h=l;u<h;u++){if(Ge.fromBufferAttribute(r,u),je.fromBufferAttribute(i,u),Ge.w=1,je.w=1,Ge.applyMatrix4(Rn),je.applyMatrix4(Rn),Ge.z>c&&je.z>c)continue;if(Ge.z>c){const x=Ge.z-je.z,p=(Ge.z-c)/x;Ge.lerp(je,p)}else if(je.z>c){const x=je.z-Ge.z,p=(je.z-c)/x;je.lerp(Ge,p)}Ge.applyMatrix4(s),je.applyMatrix4(s),Ge.multiplyScalar(1/Ge.w),je.multiplyScalar(1/je.w),Ge.x*=e.x/2,Ge.y*=e.y/2,je.x*=e.x/2,je.y*=e.y/2,ze.start.copy(Ge),ze.start.z=0,ze.end.copy(je),ze.end.z=0;const b=ze.closestPointToPointParameter(On,!0);ze.at(b,Dr);const m=Ta.lerp(Ge.z,je.z,b),L=m>=-1&&m<=1,_=On.distanceTo(Dr)<ht*.5;if(L&&_){ze.start.fromBufferAttribute(r,u),ze.end.fromBufferAttribute(i,u),ze.start.applyMatrix4(o),ze.end.applyMatrix4(o);const x=new Le,p=new Le;tt.distanceSqToSegment(ze.start,ze.end,p,x),f.push({point:p,pointOnLine:x,distance:tt.origin.distanceTo(p),object:d,face:null,faceIndex:u,uv:null,[qr]:null})}}}class ea extends fn{constructor(n=new Jn,f=new Qn({color:Math.random()*16777215})){super(n,f),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const n=this.geometry,f=n.attributes.instanceStart,s=n.attributes.instanceEnd,t=new Float32Array(2*f.count);for(let o=0,a=0,r=f.count;o<r;o++,a+=2)kr.fromBufferAttribute(f,o),Cr.fromBufferAttribute(s,o),t[a]=a===0?0:t[a-1],t[a+1]=t[a]+kr.distanceTo(Cr);const e=new Nn(t,2,1);return n.setAttribute("instanceDistanceStart",new St(e,1,0)),n.setAttribute("instanceDistanceEnd",new St(e,1,1)),this}raycast(n,f){const s=this.material.worldUnits,t=n.camera;t===null&&!s&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const e=n.params.Line2!==void 0&&n.params.Line2.threshold||0;tt=n.ray;const o=this.matrixWorld,a=this.geometry,r=this.material;ht=r.linewidth+e,a.boundingSphere===null&&a.computeBoundingSphere(),rn.copy(a.boundingSphere).applyMatrix4(o);let i;if(s)i=ht*.5;else{const c=Math.max(t.near,rn.distanceToPoint(tt.origin));i=Mr(t,c,r.resolution)}if(rn.radius+=i,tt.intersectsSphere(rn)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),nn.copy(a.boundingBox).applyMatrix4(o);let l;if(s)l=ht*.5;else{const c=Math.max(t.near,nn.distanceToPoint(tt.origin));l=Mr(t,c,r.resolution)}nn.expandByScalar(l),tt.intersectsBox(nn)!==!1&&(s?Ya(this,f):Xa(this,t,f))}onBeforeRender(n){const f=this.material.uniforms;f&&f.resolution&&(n.getViewport(Pn),this.material.uniforms.resolution.value.set(Pn.z,Pn.w))}}class Ka extends ea{constructor(n=new $r,f=new Qn({color:Math.random()*16777215})){super(n,f),this.isLine2=!0,this.type="Line2"}}const Za=be.forwardRef(function({points:n,color:f=16777215,vertexColors:s,linewidth:t,lineWidth:e,segments:o,dashed:a,...r},i){var l,c;const u=Ke(L=>L.size),h=be.useMemo(()=>o?new ea:new Ka,[o]),[v]=be.useState(()=>new Qn),b=(s==null||(l=s[0])==null?void 0:l.length)===4?4:3,m=be.useMemo(()=>{const L=o?new Jn:new $r,_=n.map(x=>{const p=Array.isArray(x);return x instanceof Le||x instanceof lt?[x.x,x.y,x.z]:x instanceof We?[x.x,x.y,0]:p&&x.length===3?[x[0],x[1],x[2]]:p&&x.length===2?[x[0],x[1],0]:x});if(L.setPositions(_.flat()),s){f=16777215;const x=s.map(p=>p instanceof ct?p.toArray():p);L.setColors(x.flat(),b)}return L},[n,o,s,b]);return be.useLayoutEffect(()=>{h.computeLineDistances()},[n,h]),be.useLayoutEffect(()=>{a?v.defines.USE_DASH="":delete v.defines.USE_DASH,v.needsUpdate=!0},[a,v]),be.useEffect(()=>()=>{m.dispose(),v.dispose()},[m]),be.createElement("primitive",cn({object:h,ref:i},r),be.createElement("primitive",{object:m,attach:"geometry"}),be.createElement("primitive",cn({object:v,attach:"material",color:f,vertexColors:!!s,resolution:[u.width,u.height],linewidth:(c=t??e)!==null&&c!==void 0?c:1,dashed:a,transparent:b===4},r)))});function Ja(){var d=Object.create(null);function n(t,e){var o=t.id,a=t.name,r=t.dependencies;r===void 0&&(r=[]);var i=t.init;i===void 0&&(i=function(){});var l=t.getTransferables;if(l===void 0&&(l=null),!d[o])try{r=r.map(function(u){return u&&u.isWorkerModule&&(n(u,function(h){if(h instanceof Error)throw h}),u=d[u.id].value),u}),i=s("<"+a+">.init",i),l&&(l=s("<"+a+">.getTransferables",l));var c=null;typeof i=="function"?c=i.apply(void 0,r):console.error("worker module init function failed to rehydrate"),d[o]={id:o,value:c,getTransferables:l},e(c)}catch(u){u&&u.noLog||console.error(u),e(u)}}function f(t,e){var o,a=t.id,r=t.args;(!d[a]||typeof d[a].value!="function")&&e(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var i=(o=d[a]).value.apply(o,r);i&&typeof i.then=="function"?i.then(l,function(c){return e(c instanceof Error?c:new Error(""+c))}):l(i)}catch(c){e(c)}function l(c){try{var u=d[a].getTransferables&&d[a].getTransferables(c);(!u||!Array.isArray(u)||!u.length)&&(u=void 0),e(c,u)}catch(h){console.error(h),e(h)}}}function s(t,e){var o=void 0;self.troikaDefine=function(r){return o=r};var a=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(r){console.error(r)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(t){var e=t.data,o=e.messageId,a=e.action,r=e.data;try{a==="registerModule"&&n(r,function(i){i instanceof Error?postMessage({messageId:o,success:!1,error:i.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof i=="function"}})}),a==="callModule"&&f(r,function(i,l){i instanceof Error?postMessage({messageId:o,success:!1,error:i.message}):postMessage({messageId:o,success:!0,result:i},l||void 0)})}catch(i){postMessage({messageId:o,success:!1,error:i.stack})}})}function Qa(d){var n=function(){for(var f=[],s=arguments.length;s--;)f[s]=arguments[s];return n._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,f);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var f=d.dependencies,s=d.init;f=Array.isArray(f)?f.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var t=Promise.all(f).then(function(e){return s.apply(null,e)});return n._getInitResult=function(){return t},t},n}var ta=function(){var d=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),d=!0}catch(f){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+f.message+"]")}return ta=function(){return d},d},qa=0,$a=0,In=!1,Rt=Object.create(null),It=Object.create(null),Wn=Object.create(null);function _t(d){if((!d||typeof d.init!="function")&&!In)throw new Error("requires `options.init` function");var n=d.dependencies,f=d.init,s=d.getTransferables,t=d.workerId,e=Qa(d);t==null&&(t="#default");var o="workerModule"+ ++qa,a=d.name||o,r=null;n=n&&n.map(function(l){return typeof l=="function"&&!l.workerModuleData&&(In=!0,l=_t({workerId:t,name:"<"+a+"> function dependency: "+l.name,init:`function(){return (
`+sn(l)+`
)}`}),In=!1),l&&l.workerModuleData&&(l=l.workerModuleData),l});function i(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];if(!ta())return e.apply(void 0,l);if(!r){r=Fr(t,"registerModule",i.workerModuleData);var u=function(){r=null,It[t].delete(u)};(It[t]||(It[t]=new Set)).add(u)}return r.then(function(h){var v=h.isCallable;if(v)return Fr(t,"callModule",{id:o,args:l});throw new Error("Worker module function was called but `init` did not return a callable function")})}return i.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:n,init:sn(f),getTransferables:s&&sn(s)},i.onMainThread=e,i}function eo(d){It[d]&&It[d].forEach(function(n){n()}),Rt[d]&&(Rt[d].terminate(),delete Rt[d])}function sn(d){var n=d.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function to(d){var n=Rt[d];if(!n){var f=sn(Ja);n=Rt[d]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+d.replace(/\*/g,"")+` **/

;(`+f+")()"],{type:"application/javascript"}))),n.onmessage=function(s){var t=s.data,e=t.messageId,o=Wn[e];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete Wn[e],o(t)}}return n}function Fr(d,n,f){return new Promise(function(s,t){var e=++$a;Wn[e]=function(o){o.success?s(o.result):t(new Error("Error in worker "+n+" call: "+o.error))},to(d).postMessage({messageId:e,action:n,data:f})})}function na(){var d=(function(n){function f(j,R,g,U,M,P,C,z){var O=1-C;z.x=O*O*j+2*O*C*g+C*C*M,z.y=O*O*R+2*O*C*U+C*C*P}function s(j,R,g,U,M,P,C,z,O,N){var Z=1-O;N.x=Z*Z*Z*j+3*Z*Z*O*g+3*Z*O*O*M+O*O*O*C,N.y=Z*Z*Z*R+3*Z*Z*O*U+3*Z*O*O*P+O*O*O*z}function t(j,R){for(var g=/([MLQCZ])([^MLQCZ]*)/g,U,M,P,C,z;U=g.exec(j);){var O=U[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(N){return parseFloat(N)});switch(U[1]){case"M":C=M=O[0],z=P=O[1];break;case"L":(O[0]!==C||O[1]!==z)&&R("L",C,z,C=O[0],z=O[1]);break;case"Q":{R("Q",C,z,C=O[2],z=O[3],O[0],O[1]);break}case"C":{R("C",C,z,C=O[4],z=O[5],O[0],O[1],O[2],O[3]);break}case"Z":(C!==M||z!==P)&&R("L",C,z,M,P);break}}}function e(j,R,g){g===void 0&&(g=16);var U={x:0,y:0};t(j,function(M,P,C,z,O,N,Z,oe,X){switch(M){case"L":R(P,C,z,O);break;case"Q":{for(var W=P,we=C,me=1;me<g;me++)f(P,C,N,Z,z,O,me/(g-1),U),R(W,we,U.x,U.y),W=U.x,we=U.y;break}case"C":{for(var q=P,se=C,de=1;de<g;de++)s(P,C,N,Z,oe,X,z,O,de/(g-1),U),R(q,se,U.x,U.y),q=U.x,se=U.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",r=new WeakMap,i={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(j,R){var g=j.getContext?j.getContext("webgl",i):j,U=r.get(g);if(!U){let Z=function(q){var se=P[q];if(!se&&(se=P[q]=g.getExtension(q),!se))throw new Error(q+" not supported");return se},oe=function(q,se){var de=g.createShader(se);return g.shaderSource(de,q),g.compileShader(de),de},X=function(q,se,de,V){if(!C[q]){var ie={},ne={},B=g.createProgram();g.attachShader(B,oe(se,g.VERTEX_SHADER)),g.attachShader(B,oe(de,g.FRAGMENT_SHADER)),g.linkProgram(B),C[q]={program:B,transaction:function(Q){g.useProgram(B),Q({setUniform:function(J,ke){for(var le=[],ce=arguments.length-2;ce-- >0;)le[ce]=arguments[ce+2];var pe=ne[ke]||(ne[ke]=g.getUniformLocation(B,ke));g["uniform"+J].apply(g,[pe].concat(le))},setAttribute:function(J,ke,le,ce,pe){var Se=ie[J];Se||(Se=ie[J]={buf:g.createBuffer(),loc:g.getAttribLocation(B,J),data:null}),g.bindBuffer(g.ARRAY_BUFFER,Se.buf),g.vertexAttribPointer(Se.loc,ke,g.FLOAT,!1,0,0),g.enableVertexAttribArray(Se.loc),M?g.vertexAttribDivisor(Se.loc,ce):Z("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Se.loc,ce),pe!==Se.data&&(g.bufferData(g.ARRAY_BUFFER,pe,le),Se.data=pe)}})}}}C[q].transaction(V)},W=function(q,se){O++;try{g.activeTexture(g.TEXTURE0+O);var de=z[q];de||(de=z[q]=g.createTexture(),g.bindTexture(g.TEXTURE_2D,de),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)),g.bindTexture(g.TEXTURE_2D,de),se(de,O)}finally{O--}},we=function(q,se,de){var V=g.createFramebuffer();N.push(V),g.bindFramebuffer(g.FRAMEBUFFER,V),g.activeTexture(g.TEXTURE0+se),g.bindTexture(g.TEXTURE_2D,q),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,q,0);try{de(V)}finally{g.deleteFramebuffer(V),g.bindFramebuffer(g.FRAMEBUFFER,N[--N.length-1]||null)}},me=function(){P={},C={},z={},O=-1,N.length=0};var M=typeof WebGL2RenderingContext<"u"&&g instanceof WebGL2RenderingContext,P={},C={},z={},O=-1,N=[];g.canvas.addEventListener("webglcontextlost",function(q){me(),q.preventDefault()},!1),r.set(g,U={gl:g,isWebGL2:M,getExtension:Z,withProgram:X,withTexture:W,withTextureFramebuffer:we,handleContextLoss:me})}R(U)}function c(j,R,g,U,M,P,C,z){C===void 0&&(C=15),z===void 0&&(z=null),l(j,function(O){var N=O.gl,Z=O.withProgram,oe=O.withTexture;oe("copy",function(X,W){N.texImage2D(N.TEXTURE_2D,0,N.RGBA,M,P,0,N.RGBA,N.UNSIGNED_BYTE,R),Z("copy",o,a,function(we){var me=we.setUniform,q=we.setAttribute;q("aUV",2,N.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),me("1i","image",W),N.bindFramebuffer(N.FRAMEBUFFER,z||null),N.disable(N.BLEND),N.colorMask(C&8,C&4,C&2,C&1),N.viewport(g,U,M,P),N.scissor(g,U,M,P),N.drawArrays(N.TRIANGLES,0,3)})})})}function u(j,R,g){var U=j.width,M=j.height;l(j,function(P){var C=P.gl,z=new Uint8Array(U*M*4);C.readPixels(0,0,U,M,C.RGBA,C.UNSIGNED_BYTE,z),j.width=R,j.height=g,c(C,z,0,0,U,M)})}var h=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:u});function v(j,R,g,U,M,P){P===void 0&&(P=1);var C=new Uint8Array(j*R),z=U[2]-U[0],O=U[3]-U[1],N=[];e(g,function(q,se,de,V){N.push({x1:q,y1:se,x2:de,y2:V,minX:Math.min(q,de),minY:Math.min(se,V),maxX:Math.max(q,de),maxY:Math.max(se,V)})}),N.sort(function(q,se){return q.maxX-se.maxX});for(var Z=0;Z<j;Z++)for(var oe=0;oe<R;oe++){var X=we(U[0]+z*(Z+.5)/j,U[1]+O*(oe+.5)/R),W=Math.pow(1-Math.abs(X)/M,P)/2;X<0&&(W=1-W),W=Math.max(0,Math.min(255,Math.round(W*255))),C[oe*j+Z]=W}return C;function we(q,se){for(var de=1/0,V=1/0,ie=N.length;ie--;){var ne=N[ie];if(ne.maxX+V<=q)break;if(q+V>ne.minX&&se-V<ne.maxY&&se+V>ne.minY){var B=L(q,se,ne.x1,ne.y1,ne.x2,ne.y2);B<de&&(de=B,V=Math.sqrt(de))}}return me(q,se)&&(V=-V),V}function me(q,se){for(var de=0,V=N.length;V--;){var ie=N[V];if(ie.maxX<=q)break;var ne=ie.y1>se!=ie.y2>se&&q<(ie.x2-ie.x1)*(se-ie.y1)/(ie.y2-ie.y1)+ie.x1;ne&&(de+=ie.y1<ie.y2?1:-1)}return de!==0}}function b(j,R,g,U,M,P,C,z,O,N){P===void 0&&(P=1),z===void 0&&(z=0),O===void 0&&(O=0),N===void 0&&(N=0),m(j,R,g,U,M,P,C,null,z,O,N)}function m(j,R,g,U,M,P,C,z,O,N,Z){P===void 0&&(P=1),O===void 0&&(O=0),N===void 0&&(N=0),Z===void 0&&(Z=0);for(var oe=v(j,R,g,U,M,P),X=new Uint8Array(oe.length*4),W=0;W<oe.length;W++)X[W*4+Z]=oe[W];c(C,X,O,N,j,R,1<<3-Z,z)}function L(j,R,g,U,M,P){var C=M-g,z=P-U,O=C*C+z*z,N=O?Math.max(0,Math.min(1,((j-g)*C+(R-U)*z)/O)):0,Z=j-(g+N*C),oe=R-(U+N*z);return Z*Z+oe*oe}var _=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:b,generateIntoFramebuffer:m}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",p="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",w="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",E=new Float32Array([0,0,2,0,0,2]),A=null,k=!1,I={},T=new WeakMap;function K(j){if(!k&&!Y(j))throw new Error("WebGL generation not supported")}function S(j,R,g,U,M,P,C){if(P===void 0&&(P=1),C===void 0&&(C=null),!C&&(C=A,!C)){var z=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!z)throw new Error("OffscreenCanvas or DOM canvas not supported");C=A=z.getContext("webgl",{depth:!1})}K(C);var O=new Uint8Array(j*R*4);l(C,function(X){var W=X.gl,we=X.withTexture,me=X.withTextureFramebuffer;we("readable",function(q,se){W.texImage2D(W.TEXTURE_2D,0,W.RGBA,j,R,0,W.RGBA,W.UNSIGNED_BYTE,null),me(q,se,function(de){D(j,R,g,U,M,P,W,de,0,0,0),W.readPixels(0,0,j,R,W.RGBA,W.UNSIGNED_BYTE,O)})})});for(var N=new Uint8Array(j*R),Z=0,oe=0;Z<O.length;Z+=4)N[oe++]=O[Z];return N}function F(j,R,g,U,M,P,C,z,O,N){P===void 0&&(P=1),z===void 0&&(z=0),O===void 0&&(O=0),N===void 0&&(N=0),D(j,R,g,U,M,P,C,null,z,O,N)}function D(j,R,g,U,M,P,C,z,O,N,Z){P===void 0&&(P=1),O===void 0&&(O=0),N===void 0&&(N=0),Z===void 0&&(Z=0),K(C);var oe=[];e(g,function(X,W,we,me){oe.push(X,W,we,me)}),oe=new Float32Array(oe),l(C,function(X){var W=X.gl,we=X.isWebGL2,me=X.getExtension,q=X.withProgram,se=X.withTexture,de=X.withTextureFramebuffer,V=X.handleContextLoss;if(se("rawDistances",function(ie,ne){(j!==ie._lastWidth||R!==ie._lastHeight)&&W.texImage2D(W.TEXTURE_2D,0,W.RGBA,ie._lastWidth=j,ie._lastHeight=R,0,W.RGBA,W.UNSIGNED_BYTE,null),q("main",x,p,function(B){var xe=B.setAttribute,Q=B.setUniform,re=!we&&me("ANGLE_instanced_arrays"),J=!we&&me("EXT_blend_minmax");xe("aUV",2,W.STATIC_DRAW,0,E),xe("aLineSegment",4,W.DYNAMIC_DRAW,1,oe),Q.apply(void 0,["4f","uGlyphBounds"].concat(U)),Q("1f","uMaxDistance",M),Q("1f","uExponent",P),de(ie,ne,function(ke){W.enable(W.BLEND),W.colorMask(!0,!0,!0,!0),W.viewport(0,0,j,R),W.scissor(0,0,j,R),W.blendFunc(W.ONE,W.ONE),W.blendEquationSeparate(W.FUNC_ADD,we?W.MAX:J.MAX_EXT),W.clear(W.COLOR_BUFFER_BIT),we?W.drawArraysInstanced(W.TRIANGLES,0,3,oe.length/4):re.drawArraysInstancedANGLE(W.TRIANGLES,0,3,oe.length/4)})}),q("post",o,w,function(B){B.setAttribute("aUV",2,W.STATIC_DRAW,0,E),B.setUniform("1i","tex",ne),W.bindFramebuffer(W.FRAMEBUFFER,z),W.disable(W.BLEND),W.colorMask(Z===0,Z===1,Z===2,Z===3),W.viewport(O,N,j,R),W.scissor(O,N,j,R),W.drawArrays(W.TRIANGLES,0,3)})}),W.isContextLost())throw V(),new Error("webgl context lost")})}function Y(j){var R=!j||j===A?I:j.canvas||j,g=T.get(R);if(g===void 0){k=!0;var U=null;try{var M=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],P=S(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,j);g=P&&M.length===P.length&&P.every(function(C,z){return C===M[z]}),g||(U="bad trial run results",console.info(M,P))}catch(C){g=!1,U=C.message}U&&console.warn("WebGL SDF generation not supported:",U),k=!1,T.set(R,g)}return g}var H=Object.freeze({__proto__:null,generate:S,generateIntoCanvas:F,generateIntoFramebuffer:D,isSupported:Y});function ee(j,R,g,U,M,P){M===void 0&&(M=Math.max(U[2]-U[0],U[3]-U[1])/2),P===void 0&&(P=1);try{return S.apply(H,arguments)}catch(C){return console.info("WebGL SDF generation failed, falling back to JS",C),v.apply(_,arguments)}}function te(j,R,g,U,M,P,C,z,O,N){M===void 0&&(M=Math.max(U[2]-U[0],U[3]-U[1])/2),P===void 0&&(P=1),z===void 0&&(z=0),O===void 0&&(O=0),N===void 0&&(N=0);try{return F.apply(H,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),b.apply(_,arguments)}}return n.forEachPathCommand=t,n.generate=ee,n.generateIntoCanvas=te,n.javascript=_,n.pathToLineSegments=e,n.webgl=H,n.webglUtils=h,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return d}function no(){var d=(function(n){var f={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},s={},t={};s.L=1,t[1]="L",Object.keys(f).forEach(function(V,ie){s[V]=1<<ie+1,t[s[V]]=V}),Object.freeze(s);var e=s.LRI|s.RLI|s.FSI,o=s.L|s.R|s.AL,a=s.B|s.S|s.WS|s.ON|s.FSI|s.LRI|s.RLI|s.PDI,r=s.BN|s.RLE|s.LRE|s.RLO|s.LRO|s.PDF,i=s.S|s.WS|s.B|e|s.PDI|r,l=null;function c(){if(!l){l=new Map;var V=function(ne){if(f.hasOwnProperty(ne)){var B=0;f[ne].split(",").forEach(function(xe){var Q=xe.split("+"),re=Q[0],J=Q[1];re=parseInt(re,36),J=J?parseInt(J,36):0,l.set(B+=re,s[ne]);for(var ke=0;ke<J;ke++)l.set(++B,s[ne])})}};for(var ie in f)V(ie)}}function u(V){return c(),l.get(V.codePointAt(0))||s.L}function h(V){return t[u(V)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function b(V,ie){var ne=36,B=0,xe=new Map,Q=ie&&new Map,re;return V.split(",").forEach(function J(ke){if(ke.indexOf("+")!==-1)for(var le=+ke;le--;)J(re);else{re=ke;var ce=ke.split(">"),pe=ce[0],Se=ce[1];pe=String.fromCodePoint(B+=parseInt(pe,ne)),Se=String.fromCodePoint(B+=parseInt(Se,ne)),xe.set(pe,Se),ie&&Q.set(Se,pe)}}),{map:xe,reverseMap:Q}}var m,L,_;function x(){if(!m){var V=b(v.pairs,!0),ie=V.map,ne=V.reverseMap;m=ie,L=ne,_=b(v.canonical,!1).map}}function p(V){return x(),m.get(V)||null}function w(V){return x(),L.get(V)||null}function E(V){return x(),_.get(V)||null}var A=s.L,k=s.R,I=s.EN,T=s.ES,K=s.ET,S=s.AN,F=s.CS,D=s.B,Y=s.S,H=s.ON,ee=s.BN,te=s.NSM,j=s.AL,R=s.LRO,g=s.RLO,U=s.LRE,M=s.RLE,P=s.PDF,C=s.LRI,z=s.RLI,O=s.FSI,N=s.PDI;function Z(V,ie){for(var ne=125,B=new Uint32Array(V.length),xe=0;xe<V.length;xe++)B[xe]=u(V[xe]);var Q=new Map;function re(Ve,Qe){var Ye=B[Ve];B[Ve]=Qe,Q.set(Ye,Q.get(Ye)-1),Ye&a&&Q.set(a,Q.get(a)-1),Q.set(Qe,(Q.get(Qe)||0)+1),Qe&a&&Q.set(a,(Q.get(a)||0)+1)}for(var J=new Uint8Array(V.length),ke=new Map,le=[],ce=null,pe=0;pe<V.length;pe++)ce||le.push(ce={start:pe,end:V.length-1,level:ie==="rtl"?1:ie==="ltr"?0:br(pe,!1)}),B[pe]&D&&(ce.end=pe,ce=null);for(var Se=M|U|g|R|e|N|P|D,Me=function(Ve){return Ve+(Ve&1?1:2)},Pe=function(Ve){return Ve+(Ve&1?2:1)},Ue=0;Ue<le.length;Ue++){ce=le[Ue];var _e=[{_level:ce.level,_override:0,_isolate:0}],ue=void 0,y=0,G=0,ae=0;Q.clear();for(var fe=ce.start;fe<=ce.end;fe++){var $=B[fe];if(ue=_e[_e.length-1],Q.set($,(Q.get($)||0)+1),$&a&&Q.set(a,(Q.get(a)||0)+1),$&Se)if($&(M|U)){J[fe]=ue._level;var Te=($===M?Pe:Me)(ue._level);Te<=ne&&!y&&!G?_e.push({_level:Te,_override:0,_isolate:0}):y||G++}else if($&(g|R)){J[fe]=ue._level;var Be=($===g?Pe:Me)(ue._level);Be<=ne&&!y&&!G?_e.push({_level:Be,_override:$&g?k:A,_isolate:0}):y||G++}else if($&e){$&O&&($=br(fe+1,!0)===1?z:C),J[fe]=ue._level,ue._override&&re(fe,ue._override);var Fe=($===z?Pe:Me)(ue._level);Fe<=ne&&y===0&&G===0?(ae++,_e.push({_level:Fe,_override:0,_isolate:1,_isolInitIndex:fe})):y++}else if($&N){if(y>0)y--;else if(ae>0){for(G=0;!_e[_e.length-1]._isolate;)_e.pop();var Ee=_e[_e.length-1]._isolInitIndex;Ee!=null&&(ke.set(Ee,fe),ke.set(fe,Ee)),_e.pop(),ae--}ue=_e[_e.length-1],J[fe]=ue._level,ue._override&&re(fe,ue._override)}else $&P?(y===0&&(G>0?G--:!ue._isolate&&_e.length>1&&(_e.pop(),ue=_e[_e.length-1])),J[fe]=ue._level):$&D&&(J[fe]=ce.level);else J[fe]=ue._level,ue._override&&$!==ee&&re(fe,ue._override)}for(var Ce=[],Ae=null,ye=ce.start;ye<=ce.end;ye++){var De=B[ye];if(!(De&r)){var Oe=J[ye],Re=De&e,Ie=De===N;Ae&&Oe===Ae._level?(Ae._end=ye,Ae._endsWithIsolInit=Re):Ce.push(Ae={_start:ye,_end:ye,_level:Oe,_startsWithPDI:Ie,_endsWithIsolInit:Re})}}for(var Ze=[],at=0;at<Ce.length;at++){var nt=Ce[at];if(!nt._startsWithPDI||nt._startsWithPDI&&!ke.has(nt._start)){for(var ot=[Ae=nt],ft=void 0;Ae&&Ae._endsWithIsolInit&&(ft=ke.get(Ae._end))!=null;)for(var rt=at+1;rt<Ce.length;rt++)if(Ce[rt]._start===ft){ot.push(Ae=Ce[rt]);break}for(var He=[],ut=0;ut<ot.length;ut++)for(var $n=ot[ut],dn=$n._start;dn<=$n._end;dn++)He.push(dn);for(var va=J[He[0]],er=ce.level,jt=He[0]-1;jt>=0;jt--)if(!(B[jt]&r)){er=J[jt];break}var hn=He[He.length-1],ma=J[hn],tr=ce.level;if(!(B[hn]&e)){for(var Nt=hn+1;Nt<=ce.end;Nt++)if(!(B[Nt]&r)){tr=J[Nt];break}}Ze.push({_seqIndices:He,_sosType:Math.max(er,va)%2?k:A,_eosType:Math.max(tr,ma)%2?k:A})}}for(var pn=0;pn<Ze.length;pn++){var vn=Ze[pn],he=vn._seqIndices,Ut=vn._sosType,ga=vn._eosType,vt=J[he[0]]&1?k:A;if(Q.get(te))for(var zt=0;zt<he.length;zt++){var nr=he[zt];if(B[nr]&te){for(var mn=Ut,Wt=zt-1;Wt>=0;Wt--)if(!(B[he[Wt]]&r)){mn=B[he[Wt]];break}re(nr,mn&(e|N)?H:mn)}}if(Q.get(I))for(var Ht=0;Ht<he.length;Ht++){var rr=he[Ht];if(B[rr]&I)for(var Vt=Ht-1;Vt>=-1;Vt--){var ar=Vt===-1?Ut:B[he[Vt]];if(ar&o){ar===j&&re(rr,S);break}}}if(Q.get(j))for(var gn=0;gn<he.length;gn++){var or=he[gn];B[or]&j&&re(or,k)}if(Q.get(T)||Q.get(F))for(var Tt=1;Tt<he.length-1;Tt++){var yn=he[Tt];if(B[yn]&(T|F)){for(var mt=0,bn=0,xn=Tt-1;xn>=0&&(mt=B[he[xn]],!!(mt&r));xn--);for(var wn=Tt+1;wn<he.length&&(bn=B[he[wn]],!!(bn&r));wn++);mt===bn&&(B[yn]===T?mt===I:mt&(I|S))&&re(yn,mt)}}if(Q.get(I))for(var qe=0;qe<he.length;qe++){var ya=he[qe];if(B[ya]&I){for(var Yt=qe-1;Yt>=0&&B[he[Yt]]&(K|r);Yt--)re(he[Yt],I);for(qe++;qe<he.length&&B[he[qe]]&(K|r|I);qe++)B[he[qe]]!==I&&re(he[qe],I)}}if(Q.get(K)||Q.get(T)||Q.get(F))for(var Et=0;Et<he.length;Et++){var ir=he[Et];if(B[ir]&(K|T|F)){re(ir,H);for(var Xt=Et-1;Xt>=0&&B[he[Xt]]&r;Xt--)re(he[Xt],H);for(var Kt=Et+1;Kt<he.length&&B[he[Kt]]&r;Kt++)re(he[Kt],H)}}if(Q.get(I))for(var Sn=0,sr=Ut;Sn<he.length;Sn++){var lr=he[Sn],_n=B[lr];_n&I?sr===A&&re(lr,A):_n&o&&(sr=_n)}if(Q.get(a)){var At=k|I|S,cr=At|A,Zt=[];{for(var gt=[],yt=0;yt<he.length;yt++)if(B[he[yt]]&a){var kt=V[he[yt]],fr=void 0;if(p(kt)!==null)if(gt.length<63)gt.push({char:kt,seqIndex:yt});else break;else if((fr=w(kt))!==null)for(var Ct=gt.length-1;Ct>=0;Ct--){var Un=gt[Ct].char;if(Un===fr||Un===w(E(kt))||p(E(Un))===kt){Zt.push([gt[Ct].seqIndex,yt]),gt.length=Ct;break}}}Zt.sort(function(Ve,Qe){return Ve[0]-Qe[0]})}for(var Tn=0;Tn<Zt.length;Tn++){for(var ur=Zt[Tn],Jt=ur[0],En=ur[1],dr=!1,Je=0,An=Jt+1;An<En;An++){var hr=he[An];if(B[hr]&cr){dr=!0;var pr=B[hr]&At?k:A;if(pr===vt){Je=pr;break}}}if(dr&&!Je){Je=Ut;for(var kn=Jt-1;kn>=0;kn--){var vr=he[kn];if(B[vr]&cr){var mr=B[vr]&At?k:A;mr!==vt?Je=mr:Je=vt;break}}}if(Je){if(B[he[Jt]]=B[he[En]]=Je,Je!==vt){for(var Dt=Jt+1;Dt<he.length;Dt++)if(!(B[he[Dt]]&r)){u(V[he[Dt]])&te&&(B[he[Dt]]=Je);break}}if(Je!==vt){for(var Mt=En+1;Mt<he.length;Mt++)if(!(B[he[Mt]]&r)){u(V[he[Mt]])&te&&(B[he[Mt]]=Je);break}}}}for(var it=0;it<he.length;it++)if(B[he[it]]&a){for(var gr=it,Cn=it,Dn=Ut,Ft=it-1;Ft>=0;Ft--)if(B[he[Ft]]&r)gr=Ft;else{Dn=B[he[Ft]]&At?k:A;break}for(var yr=ga,Lt=it+1;Lt<he.length;Lt++)if(B[he[Lt]]&(a|r))Cn=Lt;else{yr=B[he[Lt]]&At?k:A;break}for(var Mn=gr;Mn<=Cn;Mn++)B[he[Mn]]=Dn===yr?Dn:vt;it=Cn}}}for(var Xe=ce.start;Xe<=ce.end;Xe++){var ba=J[Xe],Qt=B[Xe];if(ba&1?Qt&(A|I|S)&&J[Xe]++:Qt&k?J[Xe]++:Qt&(S|I)&&(J[Xe]+=2),Qt&r&&(J[Xe]=Xe===0?ce.level:J[Xe-1]),Xe===ce.end||u(V[Xe])&(Y|D))for(var qt=Xe;qt>=0&&u(V[qt])&i;qt--)J[qt]=ce.level}}return{levels:J,paragraphs:le};function br(Ve,Qe){for(var Ye=Ve;Ye<V.length;Ye++){var st=B[Ye];if(st&(k|j))return 1;if(st&(D|A)||Qe&&st===N)return 0;if(st&e){var xr=xa(Ye);Ye=xr===-1?V.length:xr}}return 0}function xa(Ve){for(var Qe=1,Ye=Ve+1;Ye<V.length;Ye++){var st=B[Ye];if(st&D)break;if(st&N){if(--Qe===0)return Ye}else st&e&&Qe++}return-1}}var oe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",X;function W(){if(!X){var V=b(oe,!0),ie=V.map,ne=V.reverseMap;ne.forEach(function(B,xe){ie.set(xe,B)}),X=ie}}function we(V){return W(),X.get(V)||null}function me(V,ie,ne,B){var xe=V.length;ne=Math.max(0,ne==null?0:+ne),B=Math.min(xe-1,B==null?xe-1:+B);for(var Q=new Map,re=ne;re<=B;re++)if(ie[re]&1){var J=we(V[re]);J!==null&&Q.set(re,J)}return Q}function q(V,ie,ne,B){var xe=V.length;ne=Math.max(0,ne==null?0:+ne),B=Math.min(xe-1,B==null?xe-1:+B);var Q=[];return ie.paragraphs.forEach(function(re){var J=Math.max(ne,re.start),ke=Math.min(B,re.end);if(J<ke){for(var le=ie.levels.slice(J,ke+1),ce=ke;ce>=J&&u(V[ce])&i;ce--)le[ce]=re.level;for(var pe=re.level,Se=1/0,Me=0;Me<le.length;Me++){var Pe=le[Me];Pe>pe&&(pe=Pe),Pe<Se&&(Se=Pe|1)}for(var Ue=pe;Ue>=Se;Ue--)for(var _e=0;_e<le.length;_e++)if(le[_e]>=Ue){for(var ue=_e;_e+1<le.length&&le[_e+1]>=Ue;)_e++;_e>ue&&Q.push([ue+J,_e+J])}}}),Q}function se(V,ie,ne,B){var xe=de(V,ie,ne,B),Q=[].concat(V);return xe.forEach(function(re,J){Q[J]=(ie.levels[re]&1?we(V[re]):null)||V[re]}),Q.join("")}function de(V,ie,ne,B){for(var xe=q(V,ie,ne,B),Q=[],re=0;re<V.length;re++)Q[re]=re;return xe.forEach(function(J){for(var ke=J[0],le=J[1],ce=Q.slice(ke,le+1),pe=ce.length;pe--;)Q[le-pe]=ce[pe]}),Q}return n.closingToOpeningBracket=w,n.getBidiCharType=u,n.getBidiCharTypeName=h,n.getCanonicalBracket=E,n.getEmbeddingLevels=Z,n.getMirroredCharacter=we,n.getMirroredCharactersMap=me,n.getReorderSegments=q,n.getReorderedIndices=de,n.getReorderedString=se,n.openingToClosingBracket=p,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return d}const ra=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Hn(d){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function f(s,t){let e=Ca[t];return e?Hn(e):s}return d.replace(n,f)}const Ne=[];for(let d=0;d<256;d++)Ne[d]=(d<16?"0":"")+d.toString(16);function ro(){const d=Math.random()*4294967295|0,n=Math.random()*4294967295|0,f=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(Ne[d&255]+Ne[d>>8&255]+Ne[d>>16&255]+Ne[d>>24&255]+"-"+Ne[n&255]+Ne[n>>8&255]+"-"+Ne[n>>16&15|64]+Ne[n>>24&255]+"-"+Ne[f&63|128]+Ne[f>>8&255]+"-"+Ne[f>>16&255]+Ne[f>>24&255]+Ne[s&255]+Ne[s>>8&255]+Ne[s>>16&255]+Ne[s>>24&255]).toUpperCase()}const dt=Object.assign||function(){let d=arguments[0];for(let n=1,f=arguments.length;n<f;n++){let s=arguments[n];if(s)for(let t in s)Object.prototype.hasOwnProperty.call(s,t)&&(d[t]=s[t])}return d},ao=Date.now(),Lr=new WeakMap,Pr=new Map;let oo=1e10;function Vn(d,n){const f=co(n);let s=Lr.get(d);if(s||Lr.set(d,s=Object.create(null)),s[f])return new s[f];const t=`_onBeforeCompile${f}`,e=function(i,l){d.onBeforeCompile.call(this,i,l);const c=this.customProgramCacheKey()+"|"+i.vertexShader+"|"+i.fragmentShader;let u=Pr[c];if(!u){const h=io(this,i,n,f);u=Pr[c]=h}i.vertexShader=u.vertexShader,i.fragmentShader=u.fragmentShader,dt(i.uniforms,this.uniforms),n.timeUniform&&(i.uniforms[n.timeUniform]={get value(){return Date.now()-ao}}),this[t]&&this[t](i)},o=function(){return a(n.chained?d:d.clone())},a=function(i){const l=Object.create(i,r);return Object.defineProperty(l,"baseMaterial",{value:d}),Object.defineProperty(l,"id",{value:oo++}),l.uuid=ro(),l.uniforms=dt({},i.uniforms,n.uniforms),l.defines=dt({},i.defines,n.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${f}`]="",l.extensions=dt({},i.extensions,n.extensions),l._listeners=void 0,l},r={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>d.type,set:i=>{d.type=i}},isDerivedFrom:{writable:!0,configurable:!0,value:function(i){const l=this.baseMaterial;return i===l||l.isDerivedMaterial&&l.isDerivedFrom(i)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return d.customProgramCacheKey()+"|"+f}},onBeforeCompile:{get(){return e},set(i){this[t]=i}},copy:{writable:!0,configurable:!0,value:function(i){return d.copy.call(this,i),!d.isShaderMaterial&&!d.isDerivedMaterial&&(dt(this.extensions,i.extensions),dt(this.defines,i.defines),dt(this.uniforms,zn.clone(i.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const i=new d.constructor;return a(i).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let i=this._depthMaterial;return i||(i=this._depthMaterial=Vn(d.isDerivedMaterial?d.getDepthMaterial():new Aa({depthPacking:ka}),n),i.defines.IS_DEPTH_MATERIAL="",i.uniforms=this.uniforms),i}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let i=this._distanceMaterial;return i||(i=this._distanceMaterial=Vn(d.isDerivedMaterial?d.getDistanceMaterial():new Ea,n),i.defines.IS_DISTANCE_MATERIAL="",i.uniforms=this.uniforms),i}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:i,_distanceMaterial:l}=this;i&&i.dispose(),l&&l.dispose(),d.dispose.call(this)}}};return s[f]=o,new o}function io(d,{vertexShader:n,fragmentShader:f},s,t){let{vertexDefs:e,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:r,fragmentDefs:i,fragmentMainIntro:l,fragmentMainOutro:c,fragmentColorTransform:u,customRewriter:h,timeUniform:v}=s;if(e=e||"",o=o||"",a=a||"",i=i||"",l=l||"",c=c||"",(r||h)&&(n=Hn(n)),(u||h)&&(f=f.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),f=Hn(f)),h){let b=h({vertexShader:n,fragmentShader:f});n=b.vertexShader,f=b.fragmentShader}if(u){let b=[];f=f.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,m=>(b.push(m),"")),c=`${u}
${b.join(`
`)}
${c}`}if(v){const b=`
uniform float ${v};
`;e=b+e,i=b+i}return r&&(n=`vec3 troika_position_${t};
vec3 troika_normal_${t};
vec2 troika_uv_${t};
${n}
`,e=`${e}
void troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${r}
}
`,o=`
troika_position_${t} = vec3(position);
troika_normal_${t} = vec3(normal);
troika_uv_${t} = vec2(uv);
troikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(b,m,L,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,L))?m:`troika_${m}_${t}`),d.map&&d.map.channel>0||(n=n.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),n=Or(n,t,e,o,a),f=Or(f,t,i,l,c),{vertexShader:n,fragmentShader:f}}function Or(d,n,f,s,t){return(s||t||f)&&(d=d.replace(ra,`
${f}
void troikaOrigMain${n}() {`),d+=`
void main() {
  ${s}
  troikaOrigMain${n}();
  ${t}
}`),d}function so(d,n){return d==="uniforms"?void 0:typeof n=="function"?n.toString():n}let lo=0;const Rr=new Map;function co(d){const n=JSON.stringify(d,so);let f=Rr.get(n);return f==null&&Rr.set(n,f=++lo),f}function fo(){return typeof window>"u"&&(self.window=self),(function(d){var n={parse:function(t){var e=n._bin,o=new Uint8Array(t);if(e.readASCII(o,0,4)=="ttcf"){var a=4;e.readUshort(o,a),a+=2,e.readUshort(o,a),a+=2;var r=e.readUint(o,a);a+=4;for(var i=[],l=0;l<r;l++){var c=e.readUint(o,a);a+=4,i.push(n._readFont(o,c))}return i}return[n._readFont(o,0)]},_readFont:function(t,e){var o=n._bin,a=e;o.readFixed(t,e),e+=4;var r=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],l={_data:t,_offset:a},c={},u=0;u<r;u++){var h=o.readASCII(t,e,4);e+=4,o.readUint(t,e),e+=4;var v=o.readUint(t,e);e+=4;var b=o.readUint(t,e);e+=4,c[h]={offset:v,length:b}}for(u=0;u<i.length;u++){var m=i[u];c[m]&&(l[m.trim()]=n[m.trim()].parse(t,c[m].offset,c[m].length,l))}return l},_tabOffset:function(t,e,o){for(var a=n._bin,r=a.readUshort(t,o+4),i=o+12,l=0;l<r;l++){var c=a.readASCII(t,i,4);i+=4,a.readUint(t,i),i+=4;var u=a.readUint(t,i);if(i+=4,a.readUint(t,i),i+=4,c==e)return u}return 0}};n._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return n._bin.readShort(t,e)/16384},readInt:function(t,e){return n._bin._view(t).getInt32(e)},readInt8:function(t,e){return n._bin._view(t).getInt8(e)},readShort:function(t,e){return n._bin._view(t).getInt16(e)},readUshort:function(t,e){return n._bin._view(t).getUint16(e)},readUshorts:function(t,e,o){for(var a=[],r=0;r<o;r++)a.push(n._bin.readUshort(t,e+2*r));return a},readUint:function(t,e){return n._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*n._bin.readUint(t,e)+n._bin.readUint(t,e+4)},readASCII:function(t,e,o){for(var a="",r=0;r<o;r++)a+=String.fromCharCode(t[e+r]);return a},readUnicode:function(t,e,o){for(var a="",r=0;r<o;r++){var i=t[e++]<<8|t[e++];a+=String.fromCharCode(i)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,o){var a=n._bin._tdec;return a&&e==0&&o==t.length?a.decode(t):n._bin.readASCII(t,e,o)},readBytes:function(t,e,o){for(var a=[],r=0;r<o;r++)a.push(t[e+r]);return a},readASCIIArray:function(t,e,o){for(var a=[],r=0;r<o;r++)a.push(String.fromCharCode(t[e+r]));return a},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},n._lctf={},n._lctf.parse=function(t,e,o,a,r){var i=n._bin,l={},c=e;i.readFixed(t,e),e+=4;var u=i.readUshort(t,e);e+=2;var h=i.readUshort(t,e);e+=2;var v=i.readUshort(t,e);return e+=2,l.scriptList=n._lctf.readScriptList(t,c+u),l.featureList=n._lctf.readFeatureList(t,c+h),l.lookupList=n._lctf.readLookupList(t,c+v,r),l},n._lctf.readLookupList=function(t,e,o){var a=n._bin,r=e,i=[],l=a.readUshort(t,e);e+=2;for(var c=0;c<l;c++){var u=a.readUshort(t,e);e+=2;var h=n._lctf.readLookupTable(t,r+u,o);i.push(h)}return i},n._lctf.readLookupTable=function(t,e,o){var a=n._bin,r=e,i={tabs:[]};i.ltype=a.readUshort(t,e),e+=2,i.flag=a.readUshort(t,e),e+=2;var l=a.readUshort(t,e);e+=2;for(var c=i.ltype,u=0;u<l;u++){var h=a.readUshort(t,e);e+=2;var v=o(t,c,r+h,i);i.tabs.push(v)}return i},n._lctf.numOfOnes=function(t){for(var e=0,o=0;o<32;o++)(t>>>o&1)!=0&&e++;return e},n._lctf.readClassDef=function(t,e){var o=n._bin,a=[],r=o.readUshort(t,e);if(e+=2,r==1){var i=o.readUshort(t,e);e+=2;var l=o.readUshort(t,e);e+=2;for(var c=0;c<l;c++)a.push(i+c),a.push(i+c),a.push(o.readUshort(t,e)),e+=2}if(r==2){var u=o.readUshort(t,e);for(e+=2,c=0;c<u;c++)a.push(o.readUshort(t,e)),e+=2,a.push(o.readUshort(t,e)),e+=2,a.push(o.readUshort(t,e)),e+=2}return a},n._lctf.getInterval=function(t,e){for(var o=0;o<t.length;o+=3){var a=t[o],r=t[o+1];if(t[o+2],a<=e&&e<=r)return o}return-1},n._lctf.readCoverage=function(t,e){var o=n._bin,a={};a.fmt=o.readUshort(t,e),e+=2;var r=o.readUshort(t,e);return e+=2,a.fmt==1&&(a.tab=o.readUshorts(t,e,r)),a.fmt==2&&(a.tab=o.readUshorts(t,e,3*r)),a},n._lctf.coverageIndex=function(t,e){var o=t.tab;if(t.fmt==1)return o.indexOf(e);if(t.fmt==2){var a=n._lctf.getInterval(o,e);if(a!=-1)return o[a+2]+(e-o[a])}return-1},n._lctf.readFeatureList=function(t,e){var o=n._bin,a=e,r=[],i=o.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var c=o.readASCII(t,e,4);e+=4;var u=o.readUshort(t,e);e+=2;var h=n._lctf.readFeatureTable(t,a+u);h.tag=c.trim(),r.push(h)}return r},n._lctf.readFeatureTable=function(t,e){var o=n._bin,a=e,r={},i=o.readUshort(t,e);e+=2,i>0&&(r.featureParams=a+i);var l=o.readUshort(t,e);e+=2,r.tab=[];for(var c=0;c<l;c++)r.tab.push(o.readUshort(t,e+2*c));return r},n._lctf.readScriptList=function(t,e){var o=n._bin,a=e,r={},i=o.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var c=o.readASCII(t,e,4);e+=4;var u=o.readUshort(t,e);e+=2,r[c.trim()]=n._lctf.readScriptTable(t,a+u)}return r},n._lctf.readScriptTable=function(t,e){var o=n._bin,a=e,r={},i=o.readUshort(t,e);e+=2,i>0&&(r.default=n._lctf.readLangSysTable(t,a+i));var l=o.readUshort(t,e);e+=2;for(var c=0;c<l;c++){var u=o.readASCII(t,e,4);e+=4;var h=o.readUshort(t,e);e+=2,r[u.trim()]=n._lctf.readLangSysTable(t,a+h)}return r},n._lctf.readLangSysTable=function(t,e){var o=n._bin,a={};o.readUshort(t,e),e+=2,a.reqFeature=o.readUshort(t,e),e+=2;var r=o.readUshort(t,e);return e+=2,a.features=o.readUshorts(t,e,r),a},n.CFF={},n.CFF.parse=function(t,e,o){var a=n._bin;(t=new Uint8Array(t.buffer,e,o))[e=0],t[++e],t[++e],t[++e],e++;var r=[];e=n.CFF.readIndex(t,e,r);for(var i=[],l=0;l<r.length-1;l++)i.push(a.readASCII(t,e+r[l],r[l+1]-r[l]));e+=r[r.length-1];var c=[];e=n.CFF.readIndex(t,e,c);var u=[];for(l=0;l<c.length-1;l++)u.push(n.CFF.readDict(t,e+c[l],e+c[l+1]));e+=c[c.length-1];var h=u[0],v=[];e=n.CFF.readIndex(t,e,v);var b=[];for(l=0;l<v.length-1;l++)b.push(a.readASCII(t,e+v[l],v[l+1]-v[l]));if(e+=v[v.length-1],n.CFF.readSubrs(t,e,h),h.CharStrings){e=h.CharStrings,v=[],e=n.CFF.readIndex(t,e,v);var m=[];for(l=0;l<v.length-1;l++)m.push(a.readBytes(t,e+v[l],v[l+1]-v[l]));h.CharStrings=m}if(h.ROS){e=h.FDArray;var L=[];for(e=n.CFF.readIndex(t,e,L),h.FDArray=[],l=0;l<L.length-1;l++){var _=n.CFF.readDict(t,e+L[l],e+L[l+1]);n.CFF._readFDict(t,_,b),h.FDArray.push(_)}e+=L[L.length-1],e=h.FDSelect,h.FDSelect=[];var x=t[e];if(e++,x!=3)throw x;var p=a.readUshort(t,e);for(e+=2,l=0;l<p+1;l++)h.FDSelect.push(a.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=n.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=n.CFF.readCharset(t,h.charset,h.CharStrings.length)),n.CFF._readFDict(t,h,b),h},n.CFF._readFDict=function(t,e,o){var a;for(var r in e.Private&&(a=e.Private[1],e.Private=n.CFF.readDict(t,a,a+e.Private[0]),e.Private.Subrs&&n.CFF.readSubrs(t,a+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(r)!=-1&&(e[r]=o[e[r]-426+35])},n.CFF.readSubrs=function(t,e,o){var a=n._bin,r=[];e=n.CFF.readIndex(t,e,r);var i,l=r.length;i=l<1240?107:l<33900?1131:32768,o.Bias=i,o.Subrs=[];for(var c=0;c<r.length-1;c++)o.Subrs.push(a.readBytes(t,e+r[c],r[c+1]-r[c]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(t,e){for(var o=0;o<t.charset.length;o++)if(t.charset[o]==e)return o;return-1},n.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:n.CFF.glyphByUnicode(t,n.CFF.tableSE[e])},n.CFF.readEncoding=function(t,e,o){n._bin;var a=[".notdef"],r=t[e];if(e++,r!=0)throw"error: unknown encoding format: "+r;var i=t[e];e++;for(var l=0;l<i;l++)a.push(t[e+l]);return a},n.CFF.readCharset=function(t,e,o){var a=n._bin,r=[".notdef"],i=t[e];if(e++,i==0)for(var l=0;l<o;l++){var c=a.readUshort(t,e);e+=2,r.push(c)}else{if(i!=1&&i!=2)throw"error: format: "+i;for(;r.length<o;){c=a.readUshort(t,e),e+=2;var u=0;for(i==1?(u=t[e],e++):(u=a.readUshort(t,e),e+=2),l=0;l<=u;l++)r.push(c),c++}}return r},n.CFF.readIndex=function(t,e,o){var a=n._bin,r=a.readUshort(t,e)+1,i=t[e+=2];if(e++,i==1)for(var l=0;l<r;l++)o.push(t[e+l]);else if(i==2)for(l=0;l<r;l++)o.push(a.readUshort(t,e+2*l));else if(i==3)for(l=0;l<r;l++)o.push(16777215&a.readUint(t,e+3*l-1));else if(r!=1)throw"unsupported offset size: "+i+", count: "+r;return(e+=r*i)-1},n.CFF.getCharString=function(t,e,o){var a=n._bin,r=t[e],i=t[e+1];t[e+2],t[e+3],t[e+4];var l=1,c=null,u=null;r<=20&&(c=r,l=1),r==12&&(c=100*r+i,l=2),21<=r&&r<=27&&(c=r,l=1),r==28&&(u=a.readShort(t,e+1),l=3),29<=r&&r<=31&&(c=r,l=1),32<=r&&r<=246&&(u=r-139,l=1),247<=r&&r<=250&&(u=256*(r-247)+i+108,l=2),251<=r&&r<=254&&(u=256*-(r-251)-i-108,l=2),r==255&&(u=a.readInt(t,e+1)/65535,l=5),o.val=u??"o"+c,o.size=l},n.CFF.readCharString=function(t,e,o){for(var a=e+o,r=n._bin,i=[];e<a;){var l=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var u=1,h=null,v=null;l<=20&&(h=l,u=1),l==12&&(h=100*l+c,u=2),l!=19&&l!=20||(h=l,u=2),21<=l&&l<=27&&(h=l,u=1),l==28&&(v=r.readShort(t,e+1),u=3),29<=l&&l<=31&&(h=l,u=1),32<=l&&l<=246&&(v=l-139,u=1),247<=l&&l<=250&&(v=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(v=256*-(l-251)-c-108,u=2),l==255&&(v=r.readInt(t,e+1)/65535,u=5),i.push(v??"o"+h),e+=u}return i},n.CFF.readDict=function(t,e,o){for(var a=n._bin,r={},i=[];e<o;){var l=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var u=1,h=null,v=null;if(l==28&&(v=a.readShort(t,e+1),u=3),l==29&&(v=a.readInt(t,e+1),u=5),32<=l&&l<=246&&(v=l-139,u=1),247<=l&&l<=250&&(v=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(v=256*-(l-251)-c-108,u=2),l==255)throw v=a.readInt(t,e+1)/65535,u=5,"unknown number";if(l==30){var b=[];for(u=1;;){var m=t[e+u];u++;var L=m>>4,_=15&m;if(L!=15&&b.push(L),_!=15&&b.push(_),_==15)break}for(var x="",p=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],w=0;w<b.length;w++)x+=p[b[w]];v=parseFloat(x)}l<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][l],u=1,l==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],u=2)),h!=null?(r[h]=i.length==1?i[0]:i,i=[]):i.push(v),e+=u}return r},n.cmap={},n.cmap.parse=function(t,e,o){t=new Uint8Array(t.buffer,e,o),e=0;var a=n._bin,r={};a.readUshort(t,e),e+=2;var i=a.readUshort(t,e);e+=2;var l=[];r.tables=[];for(var c=0;c<i;c++){var u=a.readUshort(t,e);e+=2;var h=a.readUshort(t,e);e+=2;var v=a.readUint(t,e);e+=4;var b="p"+u+"e"+h,m=l.indexOf(v);if(m==-1){var L;m=r.tables.length,l.push(v);var _=a.readUshort(t,v);_==0?L=n.cmap.parse0(t,v):_==4?L=n.cmap.parse4(t,v):_==6?L=n.cmap.parse6(t,v):_==12?L=n.cmap.parse12(t,v):console.debug("unknown format: "+_,u,h,v),r.tables.push(L)}if(r[b]!=null)throw"multiple tables for one platform+encoding";r[b]=m}return r},n.cmap.parse0=function(t,e){var o=n._bin,a={};a.format=o.readUshort(t,e),e+=2;var r=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2,a.map=[];for(var i=0;i<r-6;i++)a.map.push(t[e+i]);return a},n.cmap.parse4=function(t,e){var o=n._bin,a=e,r={};r.format=o.readUshort(t,e),e+=2;var i=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2;var l=o.readUshort(t,e);e+=2;var c=l/2;r.searchRange=o.readUshort(t,e),e+=2,r.entrySelector=o.readUshort(t,e),e+=2,r.rangeShift=o.readUshort(t,e),e+=2,r.endCount=o.readUshorts(t,e,c),e+=2*c,e+=2,r.startCount=o.readUshorts(t,e,c),e+=2*c,r.idDelta=[];for(var u=0;u<c;u++)r.idDelta.push(o.readShort(t,e)),e+=2;for(r.idRangeOffset=o.readUshorts(t,e,c),e+=2*c,r.glyphIdArray=[];e<a+i;)r.glyphIdArray.push(o.readUshort(t,e)),e+=2;return r},n.cmap.parse6=function(t,e){var o=n._bin,a={};a.format=o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2,a.firstCode=o.readUshort(t,e),e+=2;var r=o.readUshort(t,e);e+=2,a.glyphIdArray=[];for(var i=0;i<r;i++)a.glyphIdArray.push(o.readUshort(t,e)),e+=2;return a},n.cmap.parse12=function(t,e){var o=n._bin,a={};a.format=o.readUshort(t,e),e+=2,e+=2,o.readUint(t,e),e+=4,o.readUint(t,e),e+=4;var r=o.readUint(t,e);e+=4,a.groups=[];for(var i=0;i<r;i++){var l=e+12*i,c=o.readUint(t,l+0),u=o.readUint(t,l+4),h=o.readUint(t,l+8);a.groups.push([c,u,h])}return a},n.glyf={},n.glyf.parse=function(t,e,o,a){for(var r=[],i=0;i<a.maxp.numGlyphs;i++)r.push(null);return r},n.glyf._parseGlyf=function(t,e){var o=n._bin,a=t._data,r=n._tabOffset(a,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var i={};if(i.noc=o.readShort(a,r),r+=2,i.xMin=o.readShort(a,r),r+=2,i.yMin=o.readShort(a,r),r+=2,i.xMax=o.readShort(a,r),r+=2,i.yMax=o.readShort(a,r),r+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var l=0;l<i.noc;l++)i.endPts.push(o.readUshort(a,r)),r+=2;var c=o.readUshort(a,r);if(r+=2,a.length-r<c)return null;i.instructions=o.readBytes(a,r,c),r+=c;var u=i.endPts[i.noc-1]+1;for(i.flags=[],l=0;l<u;l++){var h=a[r];if(r++,i.flags.push(h),(8&h)!=0){var v=a[r];r++;for(var b=0;b<v;b++)i.flags.push(h),l++}}for(i.xs=[],l=0;l<u;l++){var m=(2&i.flags[l])!=0,L=(16&i.flags[l])!=0;m?(i.xs.push(L?a[r]:-a[r]),r++):L?i.xs.push(0):(i.xs.push(o.readShort(a,r)),r+=2)}for(i.ys=[],l=0;l<u;l++)m=(4&i.flags[l])!=0,L=(32&i.flags[l])!=0,m?(i.ys.push(L?a[r]:-a[r]),r++):L?i.ys.push(0):(i.ys.push(o.readShort(a,r)),r+=2);var _=0,x=0;for(l=0;l<u;l++)_+=i.xs[l],x+=i.ys[l],i.xs[l]=_,i.ys[l]=x}else{var p;i.parts=[];do{p=o.readUshort(a,r),r+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(w),w.glyphIndex=o.readUshort(a,r),r+=2,1&p){var E=o.readShort(a,r);r+=2;var A=o.readShort(a,r);r+=2}else E=o.readInt8(a,r),r++,A=o.readInt8(a,r),r++;2&p?(w.m.tx=E,w.m.ty=A):(w.p1=E,w.p2=A),8&p?(w.m.a=w.m.d=o.readF2dot14(a,r),r+=2):64&p?(w.m.a=o.readF2dot14(a,r),r+=2,w.m.d=o.readF2dot14(a,r),r+=2):128&p&&(w.m.a=o.readF2dot14(a,r),r+=2,w.m.b=o.readF2dot14(a,r),r+=2,w.m.c=o.readF2dot14(a,r),r+=2,w.m.d=o.readF2dot14(a,r),r+=2)}while(32&p);if(256&p){var k=o.readUshort(a,r);for(r+=2,i.instr=[],l=0;l<k;l++)i.instr.push(a[r]),r++}}return i},n.GDEF={},n.GDEF.parse=function(t,e,o,a){var r=e;e+=4;var i=n._bin.readUshort(t,e);return{glyphClassDef:i===0?null:n._lctf.readClassDef(t,r+i)}},n.GPOS={},n.GPOS.parse=function(t,e,o,a){return n._lctf.parse(t,e,o,a,n.GPOS.subt)},n.GPOS.subt=function(t,e,o,a){var r=n._bin,i=o,l={};if(l.fmt=r.readUshort(t,o),o+=2,e==1||e==2||e==3||e==7||e==8&&l.fmt<=2){var c=r.readUshort(t,o);o+=2,l.coverage=n._lctf.readCoverage(t,c+i)}if(e==1&&l.fmt==1){var u=r.readUshort(t,o);o+=2,u!=0&&(l.pos=n.GPOS.readValueRecord(t,o,u))}else if(e==2&&l.fmt>=1&&l.fmt<=2){u=r.readUshort(t,o),o+=2;var h=r.readUshort(t,o);o+=2;var v=n._lctf.numOfOnes(u),b=n._lctf.numOfOnes(h);if(l.fmt==1){l.pairsets=[];var m=r.readUshort(t,o);o+=2;for(var L=0;L<m;L++){var _=i+r.readUshort(t,o);o+=2;var x=r.readUshort(t,_);_+=2;for(var p=[],w=0;w<x;w++){var E=r.readUshort(t,_);_+=2,u!=0&&(S=n.GPOS.readValueRecord(t,_,u),_+=2*v),h!=0&&(F=n.GPOS.readValueRecord(t,_,h),_+=2*b),p.push({gid2:E,val1:S,val2:F})}l.pairsets.push(p)}}if(l.fmt==2){var A=r.readUshort(t,o);o+=2;var k=r.readUshort(t,o);o+=2;var I=r.readUshort(t,o);o+=2;var T=r.readUshort(t,o);for(o+=2,l.classDef1=n._lctf.readClassDef(t,i+A),l.classDef2=n._lctf.readClassDef(t,i+k),l.matrix=[],L=0;L<I;L++){var K=[];for(w=0;w<T;w++){var S=null,F=null;u!=0&&(S=n.GPOS.readValueRecord(t,o,u),o+=2*v),h!=0&&(F=n.GPOS.readValueRecord(t,o,h),o+=2*b),K.push({val1:S,val2:F})}l.matrix.push(K)}}}else if(e==4&&l.fmt==1)l.markCoverage=n._lctf.readCoverage(t,r.readUshort(t,o)+i),l.baseCoverage=n._lctf.readCoverage(t,r.readUshort(t,o+2)+i),l.markClassCount=r.readUshort(t,o+4),l.markArray=n.GPOS.readMarkArray(t,r.readUshort(t,o+6)+i),l.baseArray=n.GPOS.readBaseArray(t,r.readUshort(t,o+8)+i,l.markClassCount);else if(e==6&&l.fmt==1)l.mark1Coverage=n._lctf.readCoverage(t,r.readUshort(t,o)+i),l.mark2Coverage=n._lctf.readCoverage(t,r.readUshort(t,o+2)+i),l.markClassCount=r.readUshort(t,o+4),l.mark1Array=n.GPOS.readMarkArray(t,r.readUshort(t,o+6)+i),l.mark2Array=n.GPOS.readBaseArray(t,r.readUshort(t,o+8)+i,l.markClassCount);else{if(e==9&&l.fmt==1){var D=r.readUshort(t,o);o+=2;var Y=r.readUint(t,o);if(o+=4,a.ltype==9)a.ltype=D;else if(a.ltype!=D)throw"invalid extension substitution";return n.GPOS.subt(t,a.ltype,i+Y)}console.debug("unsupported GPOS table LookupType",e,"format",l.fmt)}return l},n.GPOS.readValueRecord=function(t,e,o){var a=n._bin,r=[];return r.push(1&o?a.readShort(t,e):0),e+=1&o?2:0,r.push(2&o?a.readShort(t,e):0),e+=2&o?2:0,r.push(4&o?a.readShort(t,e):0),e+=4&o?2:0,r.push(8&o?a.readShort(t,e):0),e+=8&o?2:0,r},n.GPOS.readBaseArray=function(t,e,o){var a=n._bin,r=[],i=e,l=a.readUshort(t,e);e+=2;for(var c=0;c<l;c++){for(var u=[],h=0;h<o;h++)u.push(n.GPOS.readAnchorRecord(t,i+a.readUshort(t,e))),e+=2;r.push(u)}return r},n.GPOS.readMarkArray=function(t,e){var o=n._bin,a=[],r=e,i=o.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var c=n.GPOS.readAnchorRecord(t,o.readUshort(t,e+2)+r);c.markClass=o.readUshort(t,e),a.push(c),e+=4}return a},n.GPOS.readAnchorRecord=function(t,e){var o=n._bin,a={};return a.fmt=o.readUshort(t,e),a.x=o.readShort(t,e+2),a.y=o.readShort(t,e+4),a},n.GSUB={},n.GSUB.parse=function(t,e,o,a){return n._lctf.parse(t,e,o,a,n.GSUB.subt)},n.GSUB.subt=function(t,e,o,a){var r=n._bin,i=o,l={};if(l.fmt=r.readUshort(t,o),o+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&l.fmt<=2||e==6&&l.fmt<=2){var c=r.readUshort(t,o);o+=2,l.coverage=n._lctf.readCoverage(t,i+c)}if(e==1&&l.fmt>=1&&l.fmt<=2){if(l.fmt==1)l.delta=r.readShort(t,o),o+=2;else if(l.fmt==2){var u=r.readUshort(t,o);o+=2,l.newg=r.readUshorts(t,o,u),o+=2*l.newg.length}}else if(e==2&&l.fmt==1){u=r.readUshort(t,o),o+=2,l.seqs=[];for(var h=0;h<u;h++){var v=r.readUshort(t,o)+i;o+=2;var b=r.readUshort(t,v);l.seqs.push(r.readUshorts(t,v+2,b))}}else if(e==4)for(l.vals=[],u=r.readUshort(t,o),o+=2,h=0;h<u;h++){var m=r.readUshort(t,o);o+=2,l.vals.push(n.GSUB.readLigatureSet(t,i+m))}else if(e==5&&l.fmt==2){if(l.fmt==2){var L=r.readUshort(t,o);o+=2,l.cDef=n._lctf.readClassDef(t,i+L),l.scset=[];var _=r.readUshort(t,o);for(o+=2,h=0;h<_;h++){var x=r.readUshort(t,o);o+=2,l.scset.push(x==0?null:n.GSUB.readSubClassSet(t,i+x))}}}else if(e==6&&l.fmt==3){if(l.fmt==3){for(h=0;h<3;h++){u=r.readUshort(t,o),o+=2;for(var p=[],w=0;w<u;w++)p.push(n._lctf.readCoverage(t,i+r.readUshort(t,o+2*w)));o+=2*u,h==0&&(l.backCvg=p),h==1&&(l.inptCvg=p),h==2&&(l.ahedCvg=p)}u=r.readUshort(t,o),o+=2,l.lookupRec=n.GSUB.readSubstLookupRecords(t,o,u)}}else{if(e==7&&l.fmt==1){var E=r.readUshort(t,o);o+=2;var A=r.readUint(t,o);if(o+=4,a.ltype==9)a.ltype=E;else if(a.ltype!=E)throw"invalid extension substitution";return n.GSUB.subt(t,a.ltype,i+A)}console.debug("unsupported GSUB table LookupType",e,"format",l.fmt)}return l},n.GSUB.readSubClassSet=function(t,e){var o=n._bin.readUshort,a=e,r=[],i=o(t,e);e+=2;for(var l=0;l<i;l++){var c=o(t,e);e+=2,r.push(n.GSUB.readSubClassRule(t,a+c))}return r},n.GSUB.readSubClassRule=function(t,e){var o=n._bin.readUshort,a={},r=o(t,e),i=o(t,e+=2);e+=2,a.input=[];for(var l=0;l<r-1;l++)a.input.push(o(t,e)),e+=2;return a.substLookupRecords=n.GSUB.readSubstLookupRecords(t,e,i),a},n.GSUB.readSubstLookupRecords=function(t,e,o){for(var a=n._bin.readUshort,r=[],i=0;i<o;i++)r.push(a(t,e),a(t,e+2)),e+=4;return r},n.GSUB.readChainSubClassSet=function(t,e){var o=n._bin,a=e,r=[],i=o.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var c=o.readUshort(t,e);e+=2,r.push(n.GSUB.readChainSubClassRule(t,a+c))}return r},n.GSUB.readChainSubClassRule=function(t,e){for(var o=n._bin,a={},r=["backtrack","input","lookahead"],i=0;i<r.length;i++){var l=o.readUshort(t,e);e+=2,i==1&&l--,a[r[i]]=o.readUshorts(t,e,l),e+=2*a[r[i]].length}return l=o.readUshort(t,e),e+=2,a.subst=o.readUshorts(t,e,2*l),e+=2*a.subst.length,a},n.GSUB.readLigatureSet=function(t,e){var o=n._bin,a=e,r=[],i=o.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var c=o.readUshort(t,e);e+=2,r.push(n.GSUB.readLigature(t,a+c))}return r},n.GSUB.readLigature=function(t,e){var o=n._bin,a={chain:[]};a.nglyph=o.readUshort(t,e),e+=2;var r=o.readUshort(t,e);e+=2;for(var i=0;i<r-1;i++)a.chain.push(o.readUshort(t,e)),e+=2;return a},n.head={},n.head.parse=function(t,e,o){var a=n._bin,r={};return a.readFixed(t,e),e+=4,r.fontRevision=a.readFixed(t,e),e+=4,a.readUint(t,e),e+=4,a.readUint(t,e),e+=4,r.flags=a.readUshort(t,e),e+=2,r.unitsPerEm=a.readUshort(t,e),e+=2,r.created=a.readUint64(t,e),e+=8,r.modified=a.readUint64(t,e),e+=8,r.xMin=a.readShort(t,e),e+=2,r.yMin=a.readShort(t,e),e+=2,r.xMax=a.readShort(t,e),e+=2,r.yMax=a.readShort(t,e),e+=2,r.macStyle=a.readUshort(t,e),e+=2,r.lowestRecPPEM=a.readUshort(t,e),e+=2,r.fontDirectionHint=a.readShort(t,e),e+=2,r.indexToLocFormat=a.readShort(t,e),e+=2,r.glyphDataFormat=a.readShort(t,e),e+=2,r},n.hhea={},n.hhea.parse=function(t,e,o){var a=n._bin,r={};return a.readFixed(t,e),e+=4,r.ascender=a.readShort(t,e),e+=2,r.descender=a.readShort(t,e),e+=2,r.lineGap=a.readShort(t,e),e+=2,r.advanceWidthMax=a.readUshort(t,e),e+=2,r.minLeftSideBearing=a.readShort(t,e),e+=2,r.minRightSideBearing=a.readShort(t,e),e+=2,r.xMaxExtent=a.readShort(t,e),e+=2,r.caretSlopeRise=a.readShort(t,e),e+=2,r.caretSlopeRun=a.readShort(t,e),e+=2,r.caretOffset=a.readShort(t,e),e+=2,e+=8,r.metricDataFormat=a.readShort(t,e),e+=2,r.numberOfHMetrics=a.readUshort(t,e),e+=2,r},n.hmtx={},n.hmtx.parse=function(t,e,o,a){for(var r=n._bin,i={aWidth:[],lsBearing:[]},l=0,c=0,u=0;u<a.maxp.numGlyphs;u++)u<a.hhea.numberOfHMetrics&&(l=r.readUshort(t,e),e+=2,c=r.readShort(t,e),e+=2),i.aWidth.push(l),i.lsBearing.push(c);return i},n.kern={},n.kern.parse=function(t,e,o,a){var r=n._bin,i=r.readUshort(t,e);if(e+=2,i==1)return n.kern.parseV1(t,e-2,o,a);var l=r.readUshort(t,e);e+=2;for(var c={glyph1:[],rval:[]},u=0;u<l;u++){e+=2,o=r.readUshort(t,e),e+=2;var h=r.readUshort(t,e);e+=2;var v=h>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;e=n.kern.readFormat0(t,e,c)}return c},n.kern.parseV1=function(t,e,o,a){var r=n._bin;r.readFixed(t,e),e+=4;var i=r.readUint(t,e);e+=4;for(var l={glyph1:[],rval:[]},c=0;c<i;c++){r.readUint(t,e),e+=4;var u=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2;var h=u>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;e=n.kern.readFormat0(t,e,l)}return l},n.kern.readFormat0=function(t,e,o){var a=n._bin,r=-1,i=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2;for(var l=0;l<i;l++){var c=a.readUshort(t,e);e+=2;var u=a.readUshort(t,e);e+=2;var h=a.readShort(t,e);e+=2,c!=r&&(o.glyph1.push(c),o.rval.push({glyph2:[],vals:[]}));var v=o.rval[o.rval.length-1];v.glyph2.push(u),v.vals.push(h),r=c}return e},n.loca={},n.loca.parse=function(t,e,o,a){var r=n._bin,i=[],l=a.head.indexToLocFormat,c=a.maxp.numGlyphs+1;if(l==0)for(var u=0;u<c;u++)i.push(r.readUshort(t,e+(u<<1))<<1);if(l==1)for(u=0;u<c;u++)i.push(r.readUint(t,e+(u<<2)));return i},n.maxp={},n.maxp.parse=function(t,e,o){var a=n._bin,r={},i=a.readUint(t,e);return e+=4,r.numGlyphs=a.readUshort(t,e),e+=2,i==65536&&(r.maxPoints=a.readUshort(t,e),e+=2,r.maxContours=a.readUshort(t,e),e+=2,r.maxCompositePoints=a.readUshort(t,e),e+=2,r.maxCompositeContours=a.readUshort(t,e),e+=2,r.maxZones=a.readUshort(t,e),e+=2,r.maxTwilightPoints=a.readUshort(t,e),e+=2,r.maxStorage=a.readUshort(t,e),e+=2,r.maxFunctionDefs=a.readUshort(t,e),e+=2,r.maxInstructionDefs=a.readUshort(t,e),e+=2,r.maxStackElements=a.readUshort(t,e),e+=2,r.maxSizeOfInstructions=a.readUshort(t,e),e+=2,r.maxComponentElements=a.readUshort(t,e),e+=2,r.maxComponentDepth=a.readUshort(t,e),e+=2),r},n.name={},n.name.parse=function(t,e,o){var a=n._bin,r={};a.readUshort(t,e),e+=2;var i=a.readUshort(t,e);e+=2,a.readUshort(t,e);for(var l,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=e+=2,h=0;h<i;h++){var v=a.readUshort(t,e);e+=2;var b=a.readUshort(t,e);e+=2;var m=a.readUshort(t,e);e+=2;var L=a.readUshort(t,e);e+=2;var _=a.readUshort(t,e);e+=2;var x=a.readUshort(t,e);e+=2;var p,w=c[L],E=u+12*i+x;if(v==0)p=a.readUnicode(t,E,_/2);else if(v==3&&b==0)p=a.readUnicode(t,E,_/2);else if(b==0)p=a.readASCII(t,E,_);else if(b==1)p=a.readUnicode(t,E,_/2);else if(b==3)p=a.readUnicode(t,E,_/2);else{if(v!=1)throw"unknown encoding "+b+", platformID: "+v;p=a.readASCII(t,E,_),console.debug("reading unknown MAC encoding "+b+" as ASCII")}var A="p"+v+","+m.toString(16);r[A]==null&&(r[A]={}),r[A][w!==void 0?w:L]=p,r[A]._lang=m}for(var k in r)if(r[k].postScriptName!=null&&r[k]._lang==1033)return r[k];for(var k in r)if(r[k].postScriptName!=null&&r[k]._lang==0)return r[k];for(var k in r)if(r[k].postScriptName!=null&&r[k]._lang==3084)return r[k];for(var k in r)if(r[k].postScriptName!=null)return r[k];for(var k in r){l=k;break}return console.debug("returning name table with languageID "+r[l]._lang),r[l]},n["OS/2"]={},n["OS/2"].parse=function(t,e,o){var a=n._bin.readUshort(t,e);e+=2;var r={};if(a==0)n["OS/2"].version0(t,e,r);else if(a==1)n["OS/2"].version1(t,e,r);else if(a==2||a==3||a==4)n["OS/2"].version2(t,e,r);else{if(a!=5)throw"unknown OS/2 table version: "+a;n["OS/2"].version5(t,e,r)}return r},n["OS/2"].version0=function(t,e,o){var a=n._bin;return o.xAvgCharWidth=a.readShort(t,e),e+=2,o.usWeightClass=a.readUshort(t,e),e+=2,o.usWidthClass=a.readUshort(t,e),e+=2,o.fsType=a.readUshort(t,e),e+=2,o.ySubscriptXSize=a.readShort(t,e),e+=2,o.ySubscriptYSize=a.readShort(t,e),e+=2,o.ySubscriptXOffset=a.readShort(t,e),e+=2,o.ySubscriptYOffset=a.readShort(t,e),e+=2,o.ySuperscriptXSize=a.readShort(t,e),e+=2,o.ySuperscriptYSize=a.readShort(t,e),e+=2,o.ySuperscriptXOffset=a.readShort(t,e),e+=2,o.ySuperscriptYOffset=a.readShort(t,e),e+=2,o.yStrikeoutSize=a.readShort(t,e),e+=2,o.yStrikeoutPosition=a.readShort(t,e),e+=2,o.sFamilyClass=a.readShort(t,e),e+=2,o.panose=a.readBytes(t,e,10),e+=10,o.ulUnicodeRange1=a.readUint(t,e),e+=4,o.ulUnicodeRange2=a.readUint(t,e),e+=4,o.ulUnicodeRange3=a.readUint(t,e),e+=4,o.ulUnicodeRange4=a.readUint(t,e),e+=4,o.achVendID=[a.readInt8(t,e),a.readInt8(t,e+1),a.readInt8(t,e+2),a.readInt8(t,e+3)],e+=4,o.fsSelection=a.readUshort(t,e),e+=2,o.usFirstCharIndex=a.readUshort(t,e),e+=2,o.usLastCharIndex=a.readUshort(t,e),e+=2,o.sTypoAscender=a.readShort(t,e),e+=2,o.sTypoDescender=a.readShort(t,e),e+=2,o.sTypoLineGap=a.readShort(t,e),e+=2,o.usWinAscent=a.readUshort(t,e),e+=2,o.usWinDescent=a.readUshort(t,e),e+=2},n["OS/2"].version1=function(t,e,o){var a=n._bin;return e=n["OS/2"].version0(t,e,o),o.ulCodePageRange1=a.readUint(t,e),e+=4,o.ulCodePageRange2=a.readUint(t,e),e+=4},n["OS/2"].version2=function(t,e,o){var a=n._bin;return e=n["OS/2"].version1(t,e,o),o.sxHeight=a.readShort(t,e),e+=2,o.sCapHeight=a.readShort(t,e),e+=2,o.usDefault=a.readUshort(t,e),e+=2,o.usBreak=a.readUshort(t,e),e+=2,o.usMaxContext=a.readUshort(t,e),e+=2},n["OS/2"].version5=function(t,e,o){var a=n._bin;return e=n["OS/2"].version2(t,e,o),o.usLowerOpticalPointSize=a.readUshort(t,e),e+=2,o.usUpperOpticalPointSize=a.readUshort(t,e),e+=2},n.post={},n.post.parse=function(t,e,o){var a=n._bin,r={};return r.version=a.readFixed(t,e),e+=4,r.italicAngle=a.readFixed(t,e),e+=4,r.underlinePosition=a.readShort(t,e),e+=2,r.underlineThickness=a.readShort(t,e),e+=2,r},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(t,e){var o=t.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var r=o.tables[a];if(r.format==0)return e>=r.map.length?0:r.map[e];if(r.format==4){for(var i=-1,l=0;l<r.endCount.length;l++)if(e<=r.endCount[l]){i=l;break}return i==-1||r.startCount[i]>e?0:65535&(r.idRangeOffset[i]!=0?r.glyphIdArray[e-r.startCount[i]+(r.idRangeOffset[i]>>1)-(r.idRangeOffset.length-i)]:e+r.idDelta[i])}if(r.format==12){if(e>r.groups[r.groups.length-1][1])return 0;for(l=0;l<r.groups.length;l++){var c=r.groups[l];if(c[0]<=e&&e<=c[1])return c[2]+(e-c[0])}return 0}throw"unknown cmap table format "+r.format},n.U.glyphToPath=function(t,e){var o={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var a=t.SVG.entries[e];return a==null?o:(typeof a=="string"&&(a=n.SVG.toPath(a),t.SVG.entries[e]=a),a)}if(t.CFF){var r={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},i=t.CFF,l=t.CFF.Private;if(i.ROS){for(var c=0;i.FDSelect[c+2]<=e;)c+=2;l=i.FDArray[i.FDSelect[c+1]].Private}n.U._drawCFF(t.CFF.CharStrings[e],r,i,l,o)}else t.glyf&&n.U._drawGlyf(e,t,o);return o},n.U._drawGlyf=function(t,e,o){var a=e.glyf[t];a==null&&(a=e.glyf[t]=n.glyf._parseGlyf(e,t)),a!=null&&(a.noc>-1?n.U._simpleGlyph(a,o):n.U._compoGlyph(a,e,o))},n.U._simpleGlyph=function(t,e){for(var o=0;o<t.noc;o++){for(var a=o==0?0:t.endPts[o-1]+1,r=t.endPts[o],i=a;i<=r;i++){var l=i==a?r:i-1,c=i==r?a:i+1,u=1&t.flags[i],h=1&t.flags[l],v=1&t.flags[c],b=t.xs[i],m=t.ys[i];if(i==a)if(u){if(!h){n.U.P.moveTo(e,b,m);continue}n.U.P.moveTo(e,t.xs[l],t.ys[l])}else h?n.U.P.moveTo(e,t.xs[l],t.ys[l]):n.U.P.moveTo(e,(t.xs[l]+b)/2,(t.ys[l]+m)/2);u?h&&n.U.P.lineTo(e,b,m):v?n.U.P.qcurveTo(e,b,m,t.xs[c],t.ys[c]):n.U.P.qcurveTo(e,b,m,(b+t.xs[c])/2,(m+t.ys[c])/2)}n.U.P.closePath(e)}},n.U._compoGlyph=function(t,e,o){for(var a=0;a<t.parts.length;a++){var r={cmds:[],crds:[]},i=t.parts[a];n.U._drawGlyf(i.glyphIndex,e,r);for(var l=i.m,c=0;c<r.crds.length;c+=2){var u=r.crds[c],h=r.crds[c+1];o.crds.push(u*l.a+h*l.b+l.tx),o.crds.push(u*l.c+h*l.d+l.ty)}for(c=0;c<r.cmds.length;c++)o.cmds.push(r.cmds[c])}},n.U._getGlyphClass=function(t,e){var o=n._lctf.getInterval(e,t);return o==-1?0:e[o+2]},n.U._applySubs=function(t,e,o,a){for(var r=t.length-e-1,i=0;i<o.tabs.length;i++)if(o.tabs[i]!=null){var l,c=o.tabs[i];if(!c.coverage||(l=n._lctf.coverageIndex(c.coverage,t[e]))!=-1){if(o.ltype==1)t[e],c.fmt==1?t[e]=t[e]+c.delta:t[e]=c.newg[l];else if(o.ltype==4)for(var u=c.vals[l],h=0;h<u.length;h++){var v=u[h],b=v.chain.length;if(!(b>r)){for(var m=!0,L=0,_=0;_<b;_++){for(;t[e+L+(1+_)]==-1;)L++;v.chain[_]!=t[e+L+(1+_)]&&(m=!1)}if(m){for(t[e]=v.nglyph,_=0;_<b+L;_++)t[e+_+1]=-1;break}}}else if(o.ltype==5&&c.fmt==2)for(var x=n._lctf.getInterval(c.cDef,t[e]),p=c.cDef[x+2],w=c.scset[p],E=0;E<w.length;E++){var A=w[E],k=A.input;if(!(k.length>r)){for(m=!0,_=0;_<k.length;_++){var I=n._lctf.getInterval(c.cDef,t[e+1+_]);if(x==-1&&c.cDef[I+2]!=k[_]){m=!1;break}}if(m){var T=A.substLookupRecords;for(h=0;h<T.length;h+=2)T[h],T[h+1]}}}else if(o.ltype==6&&c.fmt==3){if(!n.U._glsCovered(t,c.backCvg,e-c.backCvg.length)||!n.U._glsCovered(t,c.inptCvg,e)||!n.U._glsCovered(t,c.ahedCvg,e+c.inptCvg.length))continue;var K=c.lookupRec;for(E=0;E<K.length;E+=2){x=K[E];var S=a[K[E+1]];n.U._applySubs(t,e+x,S,a)}}}}},n.U._glsCovered=function(t,e,o){for(var a=0;a<e.length;a++)if(n._lctf.coverageIndex(e[a],t[o+a])==-1)return!1;return!0},n.U.glyphsToPath=function(t,e,o){for(var a={cmds:[],crds:[]},r=0,i=0;i<e.length;i++){var l=e[i];if(l!=-1){for(var c=i<e.length-1&&e[i+1]!=-1?e[i+1]:0,u=n.U.glyphToPath(t,l),h=0;h<u.crds.length;h+=2)a.crds.push(u.crds[h]+r),a.crds.push(u.crds[h+1]);for(o&&a.cmds.push(o),h=0;h<u.cmds.length;h++)a.cmds.push(u.cmds[h]);o&&a.cmds.push("X"),r+=t.hmtx.aWidth[l],i<e.length-1&&(r+=n.U.getPairAdjustment(t,l,c))}}return a},n.U.P={},n.U.P.moveTo=function(t,e,o){t.cmds.push("M"),t.crds.push(e,o)},n.U.P.lineTo=function(t,e,o){t.cmds.push("L"),t.crds.push(e,o)},n.U.P.curveTo=function(t,e,o,a,r,i,l){t.cmds.push("C"),t.crds.push(e,o,a,r,i,l)},n.U.P.qcurveTo=function(t,e,o,a,r){t.cmds.push("Q"),t.crds.push(e,o,a,r)},n.U.P.closePath=function(t){t.cmds.push("Z")},n.U._drawCFF=function(t,e,o,a,r){for(var i=e.stack,l=e.nStems,c=e.haveWidth,u=e.width,h=e.open,v=0,b=e.x,m=e.y,L=0,_=0,x=0,p=0,w=0,E=0,A=0,k=0,I=0,T=0,K={val:0,size:0};v<t.length;){n.CFF.getCharString(t,v,K);var S=K.val;if(v+=K.size,S=="o1"||S=="o18")i.length%2!=0&&!c&&(u=i.shift()+a.nominalWidthX),l+=i.length>>1,i.length=0,c=!0;else if(S=="o3"||S=="o23")i.length%2!=0&&!c&&(u=i.shift()+a.nominalWidthX),l+=i.length>>1,i.length=0,c=!0;else if(S=="o4")i.length>1&&!c&&(u=i.shift()+a.nominalWidthX,c=!0),h&&n.U.P.closePath(r),m+=i.pop(),n.U.P.moveTo(r,b,m),h=!0;else if(S=="o5")for(;i.length>0;)b+=i.shift(),m+=i.shift(),n.U.P.lineTo(r,b,m);else if(S=="o6"||S=="o7")for(var F=i.length,D=S=="o6",Y=0;Y<F;Y++){var H=i.shift();D?b+=H:m+=H,D=!D,n.U.P.lineTo(r,b,m)}else if(S=="o8"||S=="o24"){F=i.length;for(var ee=0;ee+6<=F;)L=b+i.shift(),_=m+i.shift(),x=L+i.shift(),p=_+i.shift(),b=x+i.shift(),m=p+i.shift(),n.U.P.curveTo(r,L,_,x,p,b,m),ee+=6;S=="o24"&&(b+=i.shift(),m+=i.shift(),n.U.P.lineTo(r,b,m))}else{if(S=="o11")break;if(S=="o1234"||S=="o1235"||S=="o1236"||S=="o1237")S=="o1234"&&(_=m,x=(L=b+i.shift())+i.shift(),T=p=_+i.shift(),E=p,k=m,b=(A=(w=(I=x+i.shift())+i.shift())+i.shift())+i.shift(),n.U.P.curveTo(r,L,_,x,p,I,T),n.U.P.curveTo(r,w,E,A,k,b,m)),S=="o1235"&&(L=b+i.shift(),_=m+i.shift(),x=L+i.shift(),p=_+i.shift(),I=x+i.shift(),T=p+i.shift(),w=I+i.shift(),E=T+i.shift(),A=w+i.shift(),k=E+i.shift(),b=A+i.shift(),m=k+i.shift(),i.shift(),n.U.P.curveTo(r,L,_,x,p,I,T),n.U.P.curveTo(r,w,E,A,k,b,m)),S=="o1236"&&(L=b+i.shift(),_=m+i.shift(),x=L+i.shift(),T=p=_+i.shift(),E=p,A=(w=(I=x+i.shift())+i.shift())+i.shift(),k=E+i.shift(),b=A+i.shift(),n.U.P.curveTo(r,L,_,x,p,I,T),n.U.P.curveTo(r,w,E,A,k,b,m)),S=="o1237"&&(L=b+i.shift(),_=m+i.shift(),x=L+i.shift(),p=_+i.shift(),I=x+i.shift(),T=p+i.shift(),w=I+i.shift(),E=T+i.shift(),A=w+i.shift(),k=E+i.shift(),Math.abs(A-b)>Math.abs(k-m)?b=A+i.shift():m=k+i.shift(),n.U.P.curveTo(r,L,_,x,p,I,T),n.U.P.curveTo(r,w,E,A,k,b,m));else if(S=="o14"){if(i.length>0&&!c&&(u=i.shift()+o.nominalWidthX,c=!0),i.length==4){var te=i.shift(),j=i.shift(),R=i.shift(),g=i.shift(),U=n.CFF.glyphBySE(o,R),M=n.CFF.glyphBySE(o,g);n.U._drawCFF(o.CharStrings[U],e,o,a,r),e.x=te,e.y=j,n.U._drawCFF(o.CharStrings[M],e,o,a,r)}h&&(n.U.P.closePath(r),h=!1)}else if(S=="o19"||S=="o20")i.length%2!=0&&!c&&(u=i.shift()+a.nominalWidthX),l+=i.length>>1,i.length=0,c=!0,v+=l+7>>3;else if(S=="o21")i.length>2&&!c&&(u=i.shift()+a.nominalWidthX,c=!0),m+=i.pop(),b+=i.pop(),h&&n.U.P.closePath(r),n.U.P.moveTo(r,b,m),h=!0;else if(S=="o22")i.length>1&&!c&&(u=i.shift()+a.nominalWidthX,c=!0),b+=i.pop(),h&&n.U.P.closePath(r),n.U.P.moveTo(r,b,m),h=!0;else if(S=="o25"){for(;i.length>6;)b+=i.shift(),m+=i.shift(),n.U.P.lineTo(r,b,m);L=b+i.shift(),_=m+i.shift(),x=L+i.shift(),p=_+i.shift(),b=x+i.shift(),m=p+i.shift(),n.U.P.curveTo(r,L,_,x,p,b,m)}else if(S=="o26")for(i.length%2&&(b+=i.shift());i.length>0;)L=b,_=m+i.shift(),b=x=L+i.shift(),m=(p=_+i.shift())+i.shift(),n.U.P.curveTo(r,L,_,x,p,b,m);else if(S=="o27")for(i.length%2&&(m+=i.shift());i.length>0;)_=m,x=(L=b+i.shift())+i.shift(),p=_+i.shift(),b=x+i.shift(),m=p,n.U.P.curveTo(r,L,_,x,p,b,m);else if(S=="o10"||S=="o29"){var P=S=="o10"?a:o;if(i.length==0)console.debug("error: empty stack");else{var C=i.pop(),z=P.Subrs[C+P.Bias];e.x=b,e.y=m,e.nStems=l,e.haveWidth=c,e.width=u,e.open=h,n.U._drawCFF(z,e,o,a,r),b=e.x,m=e.y,l=e.nStems,c=e.haveWidth,u=e.width,h=e.open}}else if(S=="o30"||S=="o31"){var O=i.length,N=(ee=0,S=="o31");for(ee+=O-(F=-3&O);ee<F;)N?(_=m,x=(L=b+i.shift())+i.shift(),m=(p=_+i.shift())+i.shift(),F-ee==5?(b=x+i.shift(),ee++):b=x,N=!1):(L=b,_=m+i.shift(),x=L+i.shift(),p=_+i.shift(),b=x+i.shift(),F-ee==5?(m=p+i.shift(),ee++):m=p,N=!0),n.U.P.curveTo(r,L,_,x,p,b,m),ee+=4}else{if((S+"").charAt(0)=="o")throw console.debug("Unknown operation: "+S,t),S;i.push(S)}}}e.x=b,e.y=m,e.nStems=l,e.haveWidth=c,e.width=u,e.open=h};var f=n,s={Typr:f};return d.Typr=f,d.default=s,Object.defineProperty(d,"__esModule",{value:!0}),d})({}).Typr}function uo(){return(function(d){var n=Uint8Array,f=Uint16Array,s=Uint32Array,t=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(S,F){for(var D=new f(31),Y=0;Y<31;++Y)D[Y]=F+=1<<S[Y-1];var H=new s(D[30]);for(Y=1;Y<30;++Y)for(var ee=D[Y];ee<D[Y+1];++ee)H[ee]=ee-D[Y]<<5|Y;return[D,H]},r=a(t,2),i=r[0],l=r[1];i[28]=258,l[258]=28;for(var c=a(e,0)[0],u=new f(32768),h=0;h<32768;++h){var v=(43690&h)>>>1|(21845&h)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,u[h]=((65280&v)>>>8|(255&v)<<8)>>>1}var b=function(S,F,D){for(var Y=S.length,H=0,ee=new f(F);H<Y;++H)++ee[S[H]-1];var te,j=new f(F);for(H=0;H<F;++H)j[H]=j[H-1]+ee[H-1]<<1;{te=new f(1<<F);var R=15-F;for(H=0;H<Y;++H)if(S[H])for(var g=H<<4|S[H],U=F-S[H],M=j[S[H]-1]++<<U,P=M|(1<<U)-1;M<=P;++M)te[u[M]>>>R]=g}return te},m=new n(288);for(h=0;h<144;++h)m[h]=8;for(h=144;h<256;++h)m[h]=9;for(h=256;h<280;++h)m[h]=7;for(h=280;h<288;++h)m[h]=8;var L=new n(32);for(h=0;h<32;++h)L[h]=5;var _=b(m,9),x=b(L,5),p=function(S){for(var F=S[0],D=1;D<S.length;++D)S[D]>F&&(F=S[D]);return F},w=function(S,F,D){var Y=F/8|0;return(S[Y]|S[Y+1]<<8)>>(7&F)&D},E=function(S,F){var D=F/8|0;return(S[D]|S[D+1]<<8|S[D+2]<<16)>>(7&F)},A=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],k=function(S,F,D){var Y=new Error(F||A[S]);if(Y.code=S,Error.captureStackTrace&&Error.captureStackTrace(Y,k),!D)throw Y;return Y},I=function(S,F,D){var Y=S.length;if(!Y||D&&!D.l&&Y<5)return F||new n(0);var H=!F||D,ee=!D||D.i;D||(D={}),F||(F=new n(3*Y));var te,j=function(ue){var y=F.length;if(ue>y){var G=new n(Math.max(2*y,ue));G.set(F),F=G}},R=D.f||0,g=D.p||0,U=D.b||0,M=D.l,P=D.d,C=D.m,z=D.n,O=8*Y;do{if(!M){D.f=R=w(S,g,1);var N=w(S,g+1,3);if(g+=3,!N){var Z=S[(ne=((te=g)/8|0)+(7&te&&1)+4)-4]|S[ne-3]<<8,oe=ne+Z;if(oe>Y){ee&&k(0);break}H&&j(U+Z),F.set(S.subarray(ne,oe),U),D.b=U+=Z,D.p=g=8*oe;continue}if(N==1)M=_,P=x,C=9,z=5;else if(N==2){var X=w(S,g,31)+257,W=w(S,g+10,15)+4,we=X+w(S,g+5,31)+1;g+=14;for(var me=new n(we),q=new n(19),se=0;se<W;++se)q[o[se]]=w(S,g+3*se,7);g+=3*W;var de=p(q),V=(1<<de)-1,ie=b(q,de);for(se=0;se<we;){var ne,B=ie[w(S,g,V)];if(g+=15&B,(ne=B>>>4)<16)me[se++]=ne;else{var xe=0,Q=0;for(ne==16?(Q=3+w(S,g,3),g+=2,xe=me[se-1]):ne==17?(Q=3+w(S,g,7),g+=3):ne==18&&(Q=11+w(S,g,127),g+=7);Q--;)me[se++]=xe}}var re=me.subarray(0,X),J=me.subarray(X);C=p(re),z=p(J),M=b(re,C),P=b(J,z)}else k(1);if(g>O){ee&&k(0);break}}H&&j(U+131072);for(var ke=(1<<C)-1,le=(1<<z)-1,ce=g;;ce=g){var pe=(xe=M[E(S,g)&ke])>>>4;if((g+=15&xe)>O){ee&&k(0);break}if(xe||k(2),pe<256)F[U++]=pe;else{if(pe==256){ce=g,M=null;break}var Se=pe-254;if(pe>264){var Me=t[se=pe-257];Se=w(S,g,(1<<Me)-1)+i[se],g+=Me}var Pe=P[E(S,g)&le],Ue=Pe>>>4;if(Pe||k(3),g+=15&Pe,J=c[Ue],Ue>3&&(Me=e[Ue],J+=E(S,g)&(1<<Me)-1,g+=Me),g>O){ee&&k(0);break}H&&j(U+131072);for(var _e=U+Se;U<_e;U+=4)F[U]=F[U-J],F[U+1]=F[U+1-J],F[U+2]=F[U+2-J],F[U+3]=F[U+3-J];U=_e}}D.l=M,D.p=ce,D.b=U,M&&(R=1,D.m=C,D.d=P,D.n=z)}while(!R);return U==F.length?F:(function(ue,y,G){(G==null||G>ue.length)&&(G=ue.length);var ae=new(ue instanceof f?f:ue instanceof s?s:n)(G-y);return ae.set(ue.subarray(y,G)),ae})(F,0,U)},T=new n(0),K=typeof TextDecoder<"u"&&new TextDecoder;try{K.decode(T,{stream:!0})}catch{}return d.convert_streams=function(S){var F=new DataView(S),D=0;function Y(){var X=F.getUint16(D);return D+=2,X}function H(){var X=F.getUint32(D);return D+=4,X}function ee(X){Z.setUint16(oe,X),oe+=2}function te(X){Z.setUint32(oe,X),oe+=4}for(var j={signature:H(),flavor:H(),length:H(),numTables:Y(),reserved:Y(),totalSfntSize:H(),majorVersion:Y(),minorVersion:Y(),metaOffset:H(),metaLength:H(),metaOrigLength:H(),privOffset:H(),privLength:H()},R=0;Math.pow(2,R)<=j.numTables;)R++;R--;for(var g=16*Math.pow(2,R),U=16*j.numTables-g,M=12,P=[],C=0;C<j.numTables;C++)P.push({tag:H(),offset:H(),compLength:H(),origLength:H(),origChecksum:H()}),M+=16;var z,O=new Uint8Array(12+16*P.length+P.reduce((function(X,W){return X+W.origLength+4}),0)),N=O.buffer,Z=new DataView(N),oe=0;return te(j.flavor),ee(j.numTables),ee(g),ee(R),ee(U),P.forEach((function(X){te(X.tag),te(X.origChecksum),te(M),te(X.origLength),X.outOffset=M,(M+=X.origLength)%4!=0&&(M+=4-M%4)})),P.forEach((function(X){var W,we=S.slice(X.offset,X.offset+X.compLength);if(X.compLength!=X.origLength){var me=new Uint8Array(X.origLength);W=new Uint8Array(we,2),I(W,me)}else me=new Uint8Array(we);O.set(me,X.outOffset);var q=0;(M=X.outOffset+X.origLength)%4!=0&&(q=4-M%4),O.set(new Uint8Array(q).buffer,X.outOffset+X.origLength),z=M+q})),N.slice(0,z)},Object.defineProperty(d,"__esModule",{value:!0}),d})({}).convert_streams}function ho(d,n){const f={M:2,L:2,Q:4,C:6,Z:0},s={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,o=4,a=8,r=16,i=32;let l;function c(A){if(!l){const k={R:e,L:t,D:o,C:r,U:i,T:a};l=new Map;for(let I in s){let T=0;s[I].split(",").forEach(K=>{let[S,F]=K.split("+");S=parseInt(S,36),F=F?parseInt(F,36):0,l.set(T+=S,k[I]);for(let D=F;D--;)l.set(++T,k[I])})}}return l.get(A)||i}const u=1,h=2,v=3,b=4,m=[null,"isol","init","fina","medi"];function L(A){const k=new Uint8Array(A.length);let I=i,T=u,K=-1;for(let S=0;S<A.length;S++){const F=A.codePointAt(S);let D=c(F)|0,Y=u;D&a||(I&(t|o|r)?D&(e|o|r)?(Y=v,(T===u||T===v)&&k[K]++):D&(t|i)&&(T===h||T===b)&&k[K]--:I&(e|i)&&(T===h||T===b)&&k[K]--,T=k[S]=Y,I=D,K=S,F>65535&&S++)}return k}function _(A,k){const I=[];for(let K=0;K<k.length;K++){const S=k.codePointAt(K);S>65535&&K++,I.push(d.U.codeToGlyph(A,S))}const T=A.GSUB;if(T){const{lookupList:K,featureList:S}=T;let F;const D=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,Y=[];S.forEach(H=>{if(D.test(H.tag))for(let ee=0;ee<H.tab.length;ee++){if(Y[H.tab[ee]])continue;Y[H.tab[ee]]=!0;const te=K[H.tab[ee]],j=/^(isol|init|fina|medi)$/.test(H.tag);j&&!F&&(F=L(k));for(let R=0;R<I.length;R++)(!F||!j||m[F[R]]===H.tag)&&d.U._applySubs(I,R,te,K)}})}return I}function x(A,k){const I=new Int16Array(k.length*3);let T=0;for(;T<k.length;T++){const D=k[T];if(D===-1)continue;I[T*3+2]=A.hmtx.aWidth[D];const Y=A.GPOS;if(Y){const H=Y.lookupList;for(let ee=0;ee<H.length;ee++){const te=H[ee];for(let j=0;j<te.tabs.length;j++){const R=te.tabs[j];if(te.ltype===1){if(d._lctf.coverageIndex(R.coverage,D)!==-1&&R.pos){F(R.pos,T);break}}else if(te.ltype===2){let g=null,U=K();if(U!==-1){const M=d._lctf.coverageIndex(R.coverage,k[U]);if(M!==-1){if(R.fmt===1){const P=R.pairsets[M];for(let C=0;C<P.length;C++)P[C].gid2===D&&(g=P[C])}else if(R.fmt===2){const P=d.U._getGlyphClass(k[U],R.classDef1),C=d.U._getGlyphClass(D,R.classDef2);g=R.matrix[P][C]}if(g){g.val1&&F(g.val1,U),g.val2&&F(g.val2,T);break}}}}else if(te.ltype===4){const g=d._lctf.coverageIndex(R.markCoverage,D);if(g!==-1){const U=K(S),M=U===-1?-1:d._lctf.coverageIndex(R.baseCoverage,k[U]);if(M!==-1){const P=R.markArray[g],C=R.baseArray[M][P.markClass];I[T*3]=C.x-P.x+I[U*3]-I[U*3+2],I[T*3+1]=C.y-P.y+I[U*3+1];break}}}else if(te.ltype===6){const g=d._lctf.coverageIndex(R.mark1Coverage,D);if(g!==-1){const U=K();if(U!==-1){const M=k[U];if(p(A,M)===3){const P=d._lctf.coverageIndex(R.mark2Coverage,M);if(P!==-1){const C=R.mark1Array[g],z=R.mark2Array[P][C.markClass];I[T*3]=z.x-C.x+I[U*3]-I[U*3+2],I[T*3+1]=z.y-C.y+I[U*3+1];break}}}}}}}}else if(A.kern&&!A.cff){const H=K();if(H!==-1){const ee=A.kern.glyph1.indexOf(k[H]);if(ee!==-1){const te=A.kern.rval[ee].glyph2.indexOf(D);te!==-1&&(I[H*3+2]+=A.kern.rval[ee].vals[te])}}}}return I;function K(D){for(let Y=T-1;Y>=0;Y--)if(k[Y]!==-1&&(!D||D(k[Y])))return Y;return-1}function S(D){return p(A,D)===1}function F(D,Y){for(let H=0;H<3;H++)I[Y*3+H]+=D[H]||0}}function p(A,k){const I=A.GDEF&&A.GDEF.glyphClassDef;return I?d.U._getGlyphClass(k,I):0}function w(...A){for(let k=0;k<A.length;k++)if(typeof A[k]=="number")return A[k]}function E(A){const k=Object.create(null),I=A["OS/2"],T=A.hhea,K=A.head.unitsPerEm,S=w(I&&I.sTypoAscender,T&&T.ascender,K),F={unitsPerEm:K,ascender:S,descender:w(I&&I.sTypoDescender,T&&T.descender,0),capHeight:w(I&&I.sCapHeight,S),xHeight:w(I&&I.sxHeight,S),lineGap:w(I&&I.sTypoLineGap,T&&T.lineGap),supportsCodePoint(D){return d.U.codeToGlyph(A,D)>0},forEachGlyph(D,Y,H,ee){let te=0;const j=1/F.unitsPerEm*Y,R=_(A,D);let g=0;const U=x(A,R);return R.forEach((M,P)=>{if(M!==-1){let C=k[M];if(!C){const{cmds:z,crds:O}=d.U.glyphToPath(A,M);let N="",Z=0;for(let me=0,q=z.length;me<q;me++){const se=f[z[me]];N+=z[me];for(let de=1;de<=se;de++)N+=(de>1?",":"")+O[Z++]}let oe,X,W,we;if(O.length){oe=X=1/0,W=we=-1/0;for(let me=0,q=O.length;me<q;me+=2){let se=O[me],de=O[me+1];se<oe&&(oe=se),de<X&&(X=de),se>W&&(W=se),de>we&&(we=de)}}else oe=W=X=we=0;C=k[M]={index:M,advanceWidth:A.hmtx.aWidth[M],xMin:oe,yMin:X,xMax:W,yMax:we,path:N}}ee.call(null,C,te+U[P*3]*j,U[P*3+1]*j,g),te+=U[P*3+2]*j,H&&(te+=H*Y)}g+=D.codePointAt(g)>65535?2:1}),te}};return F}return function(k){const I=new Uint8Array(k,0,4),T=d._bin.readASCII(I,0,4);if(T==="wOFF")k=n(k);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return E(d.parse(k)[0])}}const po=_t({name:"Typr Font Parser",dependencies:[fo,uo,ho],init(d,n,f){const s=d(),t=n();return f(s,t)}});function vo(){return(function(d){var n=function(){this.buckets=new Map};n.prototype.add=function(x){var p=x>>5;this.buckets.set(p,(this.buckets.get(p)||0)|1<<(31&x))},n.prototype.has=function(x){var p=this.buckets.get(x>>5);return p!==void 0&&(p&1<<(31&x))!=0},n.prototype.serialize=function(){var x=[];return this.buckets.forEach((function(p,w){x.push((+w).toString(36)+":"+p.toString(36))})),x.join(",")},n.prototype.deserialize=function(x){var p=this;this.buckets.clear(),x.split(",").forEach((function(w){var E=w.split(":");p.buckets.set(parseInt(E[0],36),parseInt(E[1],36))}))};var f=Math.pow(2,8),s=f-1,t=~s;function e(x){var p=(function(E){return E&t})(x).toString(16),w=(function(E){return(E&t)+f-1})(x).toString(16);return"codepoint-index/plane"+(x>>16)+"/"+p+"-"+w+".json"}function o(x,p){var w=x&s,E=p.codePointAt(w/6|0);return((E=(E||48)-48)&1<<w%6)!=0}function a(x,p){var w;(w=x,w.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(E){return E.split("-").map((function(A){return parseInt(A.trim(),16)}))}))).forEach((function(E){var A=E[0],k=E[1];k===void 0&&(k=A),p(A,k)}))}function r(x,p){a(x,(function(w,E){for(var A=w;A<=E;A++)p(A)}))}var i={},l={},c=new WeakMap,u="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(x){var p=c.get(x);return p||(p=new n,r(x.ranges,(function(w){return p.add(w)})),c.set(x,p)),p}var v,b=new Map;function m(x,p,w){return x[p]?p:x[w]?w:(function(E){for(var A in E)return A})(x)}function L(x,p){var w=p;if(!x.includes(w)){w=1/0;for(var E=0;E<x.length;E++)Math.abs(x[E]-p)<Math.abs(w-p)&&(w=x[E])}return w}function _(x){return v||(v=new Set,r("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(p){v.add(p)}))),v.has(x)}return d.CodePointSet=n,d.clearCache=function(){i={},l={}},d.getFontsForString=function(x,p){p===void 0&&(p={});var w,E=p.lang;E===void 0&&(E=new RegExp("\\p{Script=Hangul}","u").test(w=x)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(w)?"ja":"en");var A=p.category;A===void 0&&(A="sans-serif");var k=p.style;k===void 0&&(k="normal");var I=p.weight;I===void 0&&(I=400);var T=(p.dataUrl||u).replace(/\/$/g,""),K=new Map,S=new Uint8Array(x.length),F={},D={},Y=new Array(x.length),H=new Map,ee=!1;function te(g){var U=b.get(g);return U||(U=fetch(T+"/"+g).then((function(M){if(!M.ok)throw new Error(M.statusText);return M.json().then((function(P){if(!Array.isArray(P)||P[0]!==1)throw new Error("Incorrect schema version; need 1, got "+P[0]);return P[1]}))})).catch((function(M){if(T!==u)return ee||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+T+'", trying default CDN. '+M.message),ee=!0),T=u,b.delete(g),te(g);throw M})),b.set(g,U)),U}for(var j=function(g){var U=x.codePointAt(g),M=e(U);Y[g]=M,i[M]||H.has(M)||H.set(M,te(M).then((function(P){i[M]=P}))),U>65535&&(g++,R=g)},R=0;R<x.length;R++)j(R);return Promise.all(H.values()).then((function(){H.clear();for(var g=function(M){var P=x.codePointAt(M),C=null,z=i[Y[M]],O=void 0;for(var N in z){var Z=D[N];if(Z===void 0&&(Z=D[N]=new RegExp(N).test(E||"en")),Z){for(var oe in O=N,z[N])if(o(P,z[N][oe])){C=oe;break}break}}if(!C){e:for(var X in z)if(X!==O){for(var W in z[X])if(o(P,z[X][W])){C=W;break e}}}C||(console.debug("No font coverage for U+"+P.toString(16)),C="latin"),Y[M]=C,l[C]||H.has(C)||H.set(C,te("font-meta/"+C+".json").then((function(we){l[C]=we}))),P>65535&&(M++,U=M)},U=0;U<x.length;U++)g(U);return Promise.all(H.values())})).then((function(){for(var g,U=null,M=0;M<x.length;M++){var P=x.codePointAt(M);if(U&&(_(P)||h(U).has(P)))S[M]=S[M-1];else{U=l[Y[M]];var C=F[U.id];if(!C){var z=U.typeforms,O=m(z,A,"sans-serif"),N=m(z[O],k,"normal"),Z=L((g=z[O])===null||g===void 0?void 0:g[N],I);C=F[U.id]=T+"/font-files/"+U.id+"/"+O+"."+N+"."+Z+".woff"}var oe=K.get(C);oe==null&&(oe=K.size,K.set(C,oe)),S[M]=oe}P>65535&&(M++,S[M]=S[M-1])}return{fontUrls:Array.from(K.keys()),chars:S}}))},Object.defineProperty(d,"__esModule",{value:!0}),d})({})}function mo(d,n){const f=Object.create(null),s=Object.create(null);function t(o,a){const r=i=>{console.error(`Failure loading font ${o}`,i)};try{const i=new XMLHttpRequest;i.open("get",o,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)r(new Error(i.statusText));else if(i.status>0)try{const l=d(i.response);l.src=o,a(l)}catch(l){r(l)}},i.onerror=r,i.send()}catch(i){r(i)}}function e(o,a){let r=f[o];r?a(r):s[o]?s[o].push(a):(s[o]=[a],t(o,i=>{i.src=o,f[o]=i,s[o].forEach(l=>l(i)),delete s[o]}))}return function(o,a,{lang:r,fonts:i=[],style:l="normal",weight:c="normal",unicodeFontsURL:u}={}){const h=new Uint8Array(o.length),v=[];o.length||_();const b=new Map,m=[];if(l!=="italic"&&(l="normal"),typeof c!="number"&&(c=c==="bold"?700:400),i&&!Array.isArray(i)&&(i=[i]),i=i.slice().filter(p=>!p.lang||p.lang.test(r)).reverse(),i.length){let A=0;(function k(I=0){for(let T=I,K=o.length;T<K;T++){const S=o.codePointAt(T);if(A===1&&v[h[T-1]].supportsCodePoint(S)||T>0&&/\s/.test(o[T]))h[T]=h[T-1],A===2&&(m[m.length-1][1]=T);else for(let F=h[T],D=i.length;F<=D;F++)if(F===D){const Y=A===2?m[m.length-1]:m[m.length]=[T,T];Y[1]=T,A=2}else{h[T]=F;const{src:Y,unicodeRange:H}=i[F];if(!H||x(S,H)){const ee=f[Y];if(!ee){e(Y,()=>{k(T)});return}if(ee.supportsCodePoint(S)){let te=b.get(ee);typeof te!="number"&&(te=v.length,v.push(ee),b.set(ee,te)),h[T]=te,A=1;break}}}S>65535&&T+1<K&&(h[T+1]=h[T],T++,A===2&&(m[m.length-1][1]=T))}L()})()}else m.push([0,o.length-1]),L();function L(){if(m.length){const p=m.map(w=>o.substring(w[0],w[1]+1)).join(`
`);n.getFontsForString(p,{lang:r||void 0,style:l,weight:c,dataUrl:u}).then(({fontUrls:w,chars:E})=>{const A=v.length;let k=0;m.forEach(T=>{for(let K=0,S=T[1]-T[0];K<=S;K++)h[T[0]+K]=E[k++]+A;k++});let I=0;w.forEach((T,K)=>{e(T,S=>{v[K+A]=S,++I===w.length&&_()})})})}else _()}function _(){a({chars:h,fonts:v})}function x(p,w){for(let E=0;E<w.length;E++){const[A,k=A]=w[E];if(A<=p&&p<=k)return!0}return!1}}}const go=_t({name:"FontResolver",dependencies:[mo,po,vo],init(d,n,f){return d(n,f())}});function yo(d,n){const s=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,t="[^\\S\\u00A0]",e=new RegExp(`${t}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:v,lang:b,fonts:m,style:L,weight:_,preResolvedFonts:x,unicodeFontsURL:p},w){const E=({chars:A,fonts:k})=>{let I,T;const K=[];for(let S=0;S<A.length;S++)A[S]!==T?(T=A[S],K.push(I={start:S,end:S,fontObj:k[A[S]]})):I.end=S;w(K)};x?E(x):d(v,E,{lang:b,fonts:m,style:L,weight:_,unicodeFontsURL:p})}function a({text:v="",font:b,lang:m,sdfGlyphSize:L=64,fontSize:_=400,fontWeight:x=1,fontStyle:p="normal",letterSpacing:w=0,lineHeight:E="normal",maxWidth:A=1/0,direction:k,textAlign:I="left",textIndent:T=0,whiteSpace:K="normal",overflowWrap:S="normal",anchorX:F=0,anchorY:D=0,metricsOnly:Y=!1,unicodeFontsURL:H,preResolvedFonts:ee=null,includeCaretPositions:te=!1,chunkedBoundsSize:j=8192,colorRanges:R=null},g){const U=c(),M={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,w=+w,A=+A,E=E||"normal",T=+T,o({text:v,lang:m,style:p,weight:x,fonts:typeof b=="string"?[{src:b}]:b,unicodeFontsURL:H,preResolvedFonts:ee},P=>{M.fontLoad=c()-U;const C=isFinite(A);let z=null,O=null,N=null,Z=null,oe=null,X=null,W=null,we=null,me=0,q=0,se=K!=="nowrap";const de=new Map,V=c();let ie=T,ne=0,B=new u;const xe=[B];P.forEach(le=>{const{fontObj:ce}=le,{ascender:pe,descender:Se,unitsPerEm:Me,lineGap:Pe,capHeight:Ue,xHeight:_e}=ce;let ue=de.get(ce);if(!ue){const $=_/Me,Te=E==="normal"?(pe-Se+Pe)*$:E*_,Be=(Te-(pe-Se)*$)/2,Fe=Math.min(Te,(pe-Se)*$),Ee=(pe+Se)/2*$+Fe/2;ue={index:de.size,src:ce.src,fontObj:ce,fontSizeMult:$,unitsPerEm:Me,ascender:pe*$,descender:Se*$,capHeight:Ue*$,xHeight:_e*$,lineHeight:Te,baseline:-Be-pe*$,caretTop:Ee,caretBottom:Ee-Fe},de.set(ce,ue)}const{fontSizeMult:y}=ue,G=v.slice(le.start,le.end+1);let ae,fe;ce.forEachGlyph(G,_,w,($,Te,Be,Fe)=>{Te+=ne,Fe+=le.start,ae=Te,fe=$;const Ee=v.charAt(Fe),Ce=$.advanceWidth*y,Ae=B.count;let ye;if("isEmpty"in $||($.isWhitespace=!!Ee&&new RegExp(t).test(Ee),$.canBreakAfter=!!Ee&&e.test(Ee),$.isEmpty=$.xMin===$.xMax||$.yMin===$.yMax||s.test(Ee)),!$.isWhitespace&&!$.isEmpty&&q++,se&&C&&!$.isWhitespace&&Te+Ce+ie>A&&Ae){if(B.glyphAt(Ae-1).glyphObj.canBreakAfter)ye=new u,ie=-Te;else for(let Oe=Ae;Oe--;)if(Oe===0&&S==="break-word"){ye=new u,ie=-Te;break}else if(B.glyphAt(Oe).glyphObj.canBreakAfter){ye=B.splitAt(Oe+1);const Re=ye.glyphAt(0).x;ie-=Re;for(let Ie=ye.count;Ie--;)ye.glyphAt(Ie).x-=Re;break}ye&&(B.isSoftWrapped=!0,B=ye,xe.push(B),me=A)}let De=B.glyphAt(B.count);De.glyphObj=$,De.x=Te+ie,De.y=Be,De.width=Ce,De.charIndex=Fe,De.fontData=ue,Ee===`
`&&(B=new u,xe.push(B),ie=-(Te+Ce+w*_)+T)}),ne=ae+fe.advanceWidth*y+w*_});let Q=0;xe.forEach(le=>{let ce=!0;for(let pe=le.count;pe--;){const Se=le.glyphAt(pe);ce&&!Se.glyphObj.isWhitespace&&(le.width=Se.x+Se.width,le.width>me&&(me=le.width),ce=!1);let{lineHeight:Me,capHeight:Pe,xHeight:Ue,baseline:_e}=Se.fontData;Me>le.lineHeight&&(le.lineHeight=Me);const ue=_e-le.baseline;ue<0&&(le.baseline+=ue,le.cap+=ue,le.ex+=ue),le.cap=Math.max(le.cap,le.baseline+Pe),le.ex=Math.max(le.ex,le.baseline+Ue)}le.baseline-=Q,le.cap-=Q,le.ex-=Q,Q+=le.lineHeight});let re=0,J=0;if(F&&(typeof F=="number"?re=-F:typeof F=="string"&&(re=-me*(F==="left"?0:F==="center"?.5:F==="right"?1:i(F)))),D&&(typeof D=="number"?J=-D:typeof D=="string"&&(J=D==="top"?0:D==="top-baseline"?-xe[0].baseline:D==="top-cap"?-xe[0].cap:D==="top-ex"?-xe[0].ex:D==="middle"?Q/2:D==="bottom"?Q:D==="bottom-baseline"?-xe[xe.length-1].baseline:i(D)*Q)),!Y){const le=n.getEmbeddingLevels(v,k);z=new Uint16Array(q),O=new Uint8Array(q),N=new Float32Array(q*2),Z={},W=[1/0,1/0,-1/0,-1/0],we=[],te&&(X=new Float32Array(v.length*4)),R&&(oe=new Uint8Array(q*3));let ce=0,pe=-1,Se=-1,Me,Pe;if(xe.forEach((Ue,_e)=>{let{count:ue,width:y}=Ue;if(ue>0){let G=0;for(let Fe=ue;Fe--&&Ue.glyphAt(Fe).glyphObj.isWhitespace;)G++;let ae=0,fe=0;if(I==="center")ae=(me-y)/2;else if(I==="right")ae=me-y;else if(I==="justify"&&Ue.isSoftWrapped){let Fe=0;for(let Ee=ue-G;Ee--;)Ue.glyphAt(Ee).glyphObj.isWhitespace&&Fe++;fe=(me-y)/Fe}if(fe||ae){let Fe=0;for(let Ee=0;Ee<ue;Ee++){let Ce=Ue.glyphAt(Ee);const Ae=Ce.glyphObj;Ce.x+=ae+Fe,fe!==0&&Ae.isWhitespace&&Ee<ue-G&&(Fe+=fe,Ce.width+=fe)}}const $=n.getReorderSegments(v,le,Ue.glyphAt(0).charIndex,Ue.glyphAt(Ue.count-1).charIndex);for(let Fe=0;Fe<$.length;Fe++){const[Ee,Ce]=$[Fe];let Ae=1/0,ye=-1/0;for(let De=0;De<ue;De++)if(Ue.glyphAt(De).charIndex>=Ee){let Oe=De,Re=De;for(;Re<ue;Re++){let Ie=Ue.glyphAt(Re);if(Ie.charIndex>Ce)break;Re<ue-G&&(Ae=Math.min(Ae,Ie.x),ye=Math.max(ye,Ie.x+Ie.width))}for(let Ie=Oe;Ie<Re;Ie++){const Ze=Ue.glyphAt(Ie);Ze.x=ye-(Ze.x+Ze.width-Ae)}break}}let Te;const Be=Fe=>Te=Fe;for(let Fe=0;Fe<ue;Fe++){const Ee=Ue.glyphAt(Fe);Te=Ee.glyphObj;const Ce=Te.index,Ae=le.levels[Ee.charIndex]&1;if(Ae){const ye=n.getMirroredCharacter(v[Ee.charIndex]);ye&&Ee.fontData.fontObj.forEachGlyph(ye,0,0,Be)}if(te){const{charIndex:ye,fontData:De}=Ee,Oe=Ee.x+re,Re=Ee.x+Ee.width+re;X[ye*4]=Ae?Re:Oe,X[ye*4+1]=Ae?Oe:Re,X[ye*4+2]=Ue.baseline+De.caretBottom+J,X[ye*4+3]=Ue.baseline+De.caretTop+J;const Ie=ye-pe;Ie>1&&l(X,pe,Ie),pe=ye}if(R){const{charIndex:ye}=Ee;for(;ye>Se;)Se++,R.hasOwnProperty(Se)&&(Pe=R[Se])}if(!Te.isWhitespace&&!Te.isEmpty){const ye=ce++,{fontSizeMult:De,src:Oe,index:Re}=Ee.fontData,Ie=Z[Oe]||(Z[Oe]={});Ie[Ce]||(Ie[Ce]={path:Te.path,pathBounds:[Te.xMin,Te.yMin,Te.xMax,Te.yMax]});const Ze=Ee.x+re,at=Ee.y+Ue.baseline+J;N[ye*2]=Ze,N[ye*2+1]=at;const nt=Ze+Te.xMin*De,ot=at+Te.yMin*De,ft=Ze+Te.xMax*De,rt=at+Te.yMax*De;nt<W[0]&&(W[0]=nt),ot<W[1]&&(W[1]=ot),ft>W[2]&&(W[2]=ft),rt>W[3]&&(W[3]=rt),ye%j===0&&(Me={start:ye,end:ye,rect:[1/0,1/0,-1/0,-1/0]},we.push(Me)),Me.end++;const He=Me.rect;if(nt<He[0]&&(He[0]=nt),ot<He[1]&&(He[1]=ot),ft>He[2]&&(He[2]=ft),rt>He[3]&&(He[3]=rt),z[ye]=Ce,O[ye]=Re,R){const ut=ye*3;oe[ut]=Pe>>16&255,oe[ut+1]=Pe>>8&255,oe[ut+2]=Pe&255}}}}}),X){const Ue=v.length-pe;Ue>1&&l(X,pe,Ue)}}const ke=[];de.forEach(({index:le,src:ce,unitsPerEm:pe,ascender:Se,descender:Me,lineHeight:Pe,capHeight:Ue,xHeight:_e})=>{ke[le]={src:ce,unitsPerEm:pe,ascender:Se,descender:Me,lineHeight:Pe,capHeight:Ue,xHeight:_e}}),M.typesetting=c()-V,g({glyphIds:z,glyphFontIndices:O,glyphPositions:N,glyphData:Z,fontData:ke,caretPositions:X,glyphColors:oe,chunkedBounds:we,fontSize:_,topBaseline:J+xe[0].baseline,blockBounds:[re,J-Q,re+me,J],visibleBounds:W,timings:M})})}function r(v,b){a({...v,metricsOnly:!0},m=>{const[L,_,x,p]=m.blockBounds;b({width:x-L,height:p-_})})}function i(v){let b=v.match(/^([\d.]+)%$/),m=b?parseFloat(b[1]):NaN;return isNaN(m)?0:m/100}function l(v,b,m){const L=v[b*4],_=v[b*4+1],x=v[b*4+2],p=v[b*4+3],w=(_-L)/m;for(let E=0;E<m;E++){const A=(b+E)*4;v[A]=L+w*E,v[A+1]=L+w*(E+1),v[A+2]=x,v[A+3]=p}}function c(){return(self.performance||Date).now()}function u(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return u.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(v){let b=u.flyweight;return b.data=this.data,b.index=v,b},splitAt(v){let b=new u;return b.data=this.data.splice(v*h.length),b}},u.flyweight=h.reduce((v,b,m,L)=>(Object.defineProperty(v,b,{get(){return this.data[this.index*h.length+m]},set(_){this.data[this.index*h.length+m]=_}}),v),{data:null,index:0}),{typeset:a,measure:r}}const pt=()=>(self.performance||Date).now(),un=na();let Ir;function bo(d,n,f,s,t,e,o,a,r,i,l=!0){return l?wo(d,n,f,s,t,e,o,a,r,i).then(null,c=>(Ir||(console.warn("WebGL SDF generation failed, falling back to JS",c),Ir=!0),Gr(d,n,f,s,t,e,o,a,r,i))):Gr(d,n,f,s,t,e,o,a,r,i)}const ln=[],xo=5;let Yn=0;function aa(){const d=pt();for(;ln.length&&pt()-d<xo;)ln.shift()();Yn=ln.length?setTimeout(aa,0):0}const wo=(...d)=>new Promise((n,f)=>{ln.push(()=>{const s=pt();try{un.webgl.generateIntoCanvas(...d),n({timing:pt()-s})}catch(t){f(t)}}),Yn||(Yn=setTimeout(aa,0))}),So=4,_o=2e3,Br={};let Uo=0;function Gr(d,n,f,s,t,e,o,a,r,i){const l="TroikaTextSDFGenerator_JS_"+Uo++%So;let c=Br[l];return c||(c=Br[l]={workerModule:_t({name:l,workerId:l,dependencies:[na,pt],init(u,h){const v=u().javascript.generate;return function(...b){const m=h();return{textureData:v(...b),timing:h()-m}}},getTransferables(u){return[u.textureData.buffer]}}),requests:0,idleTimer:null}),c.requests++,clearTimeout(c.idleTimer),c.workerModule(d,n,f,s,t,e).then(({textureData:u,timing:h})=>{const v=pt(),b=new Uint8Array(u.length*4);for(let m=0;m<u.length;m++)b[m*4+i]=u[m];return un.webglUtils.renderImageData(o,b,a,r,d,n,1<<3-i),h+=pt()-v,--c.requests===0&&(c.idleTimer=setTimeout(()=>{eo(l)},_o)),{timing:h}})}function To(d){d._warm||(un.webgl.isSupported(d),d._warm=!0)}const Eo=un.webglUtils.resizeWebGLCanvasWithoutClearing,Ot={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Ao=new ct;function wt(){return(self.performance||Date).now()}const jr=Object.create(null);function oa(d,n){d=Do({},d);const f=wt(),s=[];if(d.font&&s.push({label:"user",src:Mo(d.font)}),d.font=s,d.text=""+d.text,d.sdfGlyphSize=d.sdfGlyphSize||Ot.sdfGlyphSize,d.unicodeFontsURL=d.unicodeFontsURL||Ot.unicodeFontsURL,d.colorRanges!=null){let u={};for(let h in d.colorRanges)if(d.colorRanges.hasOwnProperty(h)){let v=d.colorRanges[h];typeof v!="number"&&(v=Ao.set(v).getHex()),u[h]=v}d.colorRanges=u}Object.freeze(d);const{textureWidth:t,sdfExponent:e}=Ot,{sdfGlyphSize:o}=d,a=t/o*4;let r=jr[o];if(!r){const u=document.createElement("canvas");u.width=t,u.height=o*256/a,r=jr[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:u,sdfTexture:new Fa(u,void 0,void 0,void 0,Ur,Ur),contextLost:!1,glyphsByFont:new Map},r.sdfTexture.generateMipmaps=!1,ko(r)}const{sdfTexture:i,sdfCanvas:l}=r;la(d).then(u=>{const{glyphIds:h,glyphFontIndices:v,fontData:b,glyphPositions:m,fontSize:L,timings:_}=u,x=[],p=new Float32Array(h.length*4);let w=0,E=0;const A=wt(),k=b.map(F=>{let D=r.glyphsByFont.get(F.src);return D||r.glyphsByFont.set(F.src,D=new Map),D});h.forEach((F,D)=>{const Y=v[D],{src:H,unitsPerEm:ee}=b[Y];let te=k[Y].get(F);if(!te){const{path:M,pathBounds:P}=u.glyphData[H][F],C=Math.max(P[2]-P[0],P[3]-P[1])/o*(Ot.sdfMargin*o+.5),z=r.glyphCount++,O=[P[0]-C,P[1]-C,P[2]+C,P[3]+C];k[Y].set(F,te={path:M,atlasIndex:z,sdfViewBox:O}),x.push(te)}const{sdfViewBox:j}=te,R=m[E++],g=m[E++],U=L/ee;p[w++]=R+j[0]*U,p[w++]=g+j[1]*U,p[w++]=R+j[2]*U,p[w++]=g+j[3]*U,h[D]=te.atlasIndex}),_.quads=(_.quads||0)+(wt()-A);const I=wt();_.sdf={};const T=l.height,K=Math.ceil(r.glyphCount/a),S=Math.pow(2,Math.ceil(Math.log2(K*o)));S>T&&(console.info(`Increasing SDF texture size ${T}->${S}`),Eo(l,t,S),i.dispose()),Promise.all(x.map(F=>ia(F,r,d.gpuAccelerateSDF).then(({timing:D})=>{_.sdf[F.atlasIndex]=D}))).then(()=>{x.length&&!r.contextLost&&(sa(r),i.needsUpdate=!0),_.sdfTotal=wt()-I,_.total=wt()-f,n(Object.freeze({parameters:d,sdfTexture:i,sdfGlyphSize:o,sdfExponent:e,glyphBounds:p,glyphAtlasIndices:h,glyphColors:u.glyphColors,caretPositions:u.caretPositions,chunkedBounds:u.chunkedBounds,ascender:u.ascender,descender:u.descender,lineHeight:u.lineHeight,capHeight:u.capHeight,xHeight:u.xHeight,topBaseline:u.topBaseline,blockBounds:u.blockBounds,visibleBounds:u.visibleBounds,timings:u.timings}))})}),Promise.resolve().then(()=>{r.contextLost||To(l)})}function ia({path:d,atlasIndex:n,sdfViewBox:f},{sdfGlyphSize:s,sdfCanvas:t,contextLost:e},o){if(e)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:r}=Ot,i=Math.max(f[2]-f[0],f[3]-f[1]),l=Math.floor(n/4),c=l%(a/s)*s,u=Math.floor(l/(a/s))*s,h=n%4;return bo(s,s,d,f,i,r,t,c,u,h,o)}function ko(d){const n=d.sdfCanvas;n.addEventListener("webglcontextlost",f=>{console.log("Context Lost",f),f.preventDefault(),d.contextLost=!0}),n.addEventListener("webglcontextrestored",f=>{console.log("Context Restored",f),d.contextLost=!1;const s=[];d.glyphsByFont.forEach(t=>{t.forEach(e=>{s.push(ia(e,d,!0))})}),Promise.all(s).then(()=>{sa(d),d.sdfTexture.needsUpdate=!0})})}function Co({font:d,characters:n,sdfGlyphSize:f},s){let t=Array.isArray(n)?n.join(`
`):""+n;oa({font:d,sdfGlyphSize:f,text:t},s)}function Do(d,n){for(let f in n)n.hasOwnProperty(f)&&(d[f]=n[f]);return d}let an;function Mo(d){return an||(an=typeof document>"u"?{}:document.createElement("a")),an.href=d,an.href}function sa(d){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:f}=d,{width:s,height:t}=n,e=d.sdfCanvas.getContext("webgl");let o=f.image.data;(!o||o.length!==s*t*4)&&(o=new Uint8Array(s*t*4),f.image={width:s,height:t,data:o},f.flipY=!1,f.isDataTexture=!0),e.readPixels(0,0,s,t,e.RGBA,e.UNSIGNED_BYTE,o)}}const Fo=_t({name:"Typesetter",dependencies:[yo,go,no],init(d,n,f){return d(n,f())}}),la=_t({name:"Typesetter",dependencies:[Fo],init(d){return function(n){return new Promise(f=>{d.typeset(n,f)})}},getTransferables(d){const n=[];for(let f in d)d[f]&&d[f].buffer&&n.push(d[f].buffer);return n}});la.onMainThread;const Nr={};function Lo(d){let n=Nr[d];return n||(n=Nr[d]=new Zn(1,1,d,d).translate(.5,.5,0)),n}const Po="aTroikaGlyphBounds",zr="aTroikaGlyphIndex",Oo="aTroikaGlyphColor";class Ro extends Xr{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Kn,this.boundingBox=new Bt}computeBoundingSphere(){}computeBoundingBox(){}set detail(n){if(n!==this._detail){this._detail=n,(typeof n!="number"||n<1)&&(n=1);let f=Lo(n);["position","normal","uv"].forEach(s=>{this.attributes[s]=f.attributes[s].clone()}),this.setIndex(f.getIndex().clone())}}get detail(){return this._detail}set curveRadius(n){n!==this._curveRadius&&(this._curveRadius=n,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(n,f,s,t,e){this.updateAttributeData(Po,n,4),this.updateAttributeData(zr,f,1),this.updateAttributeData(Oo,e,3),this._blockBounds=s,this._chunkedBounds=t,this.instanceCount=f.length,this._updateBounds()}_updateBounds(){const n=this._blockBounds;if(n){const{curveRadius:f,boundingBox:s}=this;if(f){const{PI:t,floor:e,min:o,max:a,sin:r,cos:i}=Math,l=t/2,c=t*2,u=Math.abs(f),h=n[0]/u,v=n[2]/u,b=e((h+l)/c)!==e((v+l)/c)?-u:o(r(h)*u,r(v)*u),m=e((h-l)/c)!==e((v-l)/c)?u:a(r(h)*u,r(v)*u),L=e((h+t)/c)!==e((v+t)/c)?u*2:a(u-i(h)*u,u-i(v)*u);s.min.set(b,n[1],f<0?-L:0),s.max.set(m,n[3],f<0?0:L)}else s.min.set(n[0],n[1],0),s.max.set(n[2],n[3],0);s.getBoundingSphere(this.boundingSphere)}}applyClipRect(n){let f=this.getAttribute(zr).count,s=this._chunkedBounds;if(s)for(let t=s.length;t--;){f=s[t].end;let e=s[t].rect;if(e[1]<n.w&&e[3]>n.y&&e[0]<n.z&&e[2]>n.x)break}this.instanceCount=f}updateAttributeData(n,f,s){const t=this.getAttribute(n);f?t&&t.array.length===f.length?(t.array.set(f),t.needsUpdate=!0):(this.setAttribute(n,new Ma(f,s)),delete this._maxInstanceCount,this.dispose()):t&&this.deleteAttribute(n)}}const Io=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Bo=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Go=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,jo=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function No(d){const n=Vn(d,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new We},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new lt(0,0,0,0)},uTroikaClipRect:{value:new lt(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new We},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new ct},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new La},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Io,vertexTransform:Bo,fragmentDefs:Go,fragmentColorTransform:jo,customRewriter({vertexShader:f,fragmentShader:s}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(s)&&(s=s.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(f)||(f=f.replace(ra,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:f,fragmentShader:s}}});return n.transparent=!0,n.forceSinglePass=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const qn=new Da({color:16777215,side:Jr,transparent:!0}),Wr=8421504,Hr=new Zr,on=new Le,Bn=new Le,Pt=[],zo=new Le,Gn="+x+y";function Vr(d){return Array.isArray(d)?d[0]:d}let ca=()=>{const d=new fn(new Zn(1,1),qn);return ca=()=>d,d},fa=()=>{const d=new fn(new Zn(1,1,32,1),qn);return fa=()=>d,d};const Wo={type:"syncstart"},Ho={type:"synccomplete"},ua=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Vo=ua.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let da=class extends fn{constructor(){const n=new Ro;super(n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Wr,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Gn,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(n){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(n):(this._isSyncing=!0,this.dispatchEvent(Wo),oa({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},f=>{this._isSyncing=!1,this._textRenderInfo=f,this.geometry.updateGlyphs(f.glyphBounds,f.glyphAtlasIndices,f.blockBounds,f.chunkedBounds,f.glyphColors);const s=this._queuedSyncs;s&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{s.forEach(t=>t&&t())})),this.dispatchEvent(Ho),n&&n()})))}onBeforeRender(n,f,s,t,e,o){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(n){return No(n)}get material(){let n=this._derivedMaterial;const f=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=qn.clone());if((!n||!n.isDerivedFrom(f))&&(n=this._derivedMaterial=this.createDerivedMaterial(f),f.addEventListener("dispose",function s(){f.removeEventListener("dispose",s),n.dispose()})),this.hasOutline()){let s=n._outlineMtl;return s||(s=n._outlineMtl=Object.create(n,{id:{value:n.id+.1}}),s.isTextOutlineMaterial=!0,s.depthWrite=!1,s.map=null,n.addEventListener("dispose",function t(){n.removeEventListener("dispose",t),s.dispose()})),[s,n]}else return n}set material(n){n&&n.isTroikaTextMaterial?(this._derivedMaterial=n,this._baseMaterial=n.baseMaterial):this._baseMaterial=n}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(n){this.geometry.detail=n}get curveRadius(){return this.geometry.curveRadius}set curveRadius(n){this.geometry.curveRadius=n}get customDepthMaterial(){return Vr(this.material).getDepthMaterial()}set customDepthMaterial(n){}get customDistanceMaterial(){return Vr(this.material).getDistanceMaterial()}set customDistanceMaterial(n){}_prepareForRender(n){const f=n.isTextOutlineMaterial,s=n.uniforms,t=this.textRenderInfo;if(t){const{sdfTexture:a,blockBounds:r}=t;s.uTroikaSDFTexture.value=a,s.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),s.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,s.uTroikaSDFExponent.value=t.sdfExponent,s.uTroikaTotalBounds.value.fromArray(r),s.uTroikaUseGlyphColors.value=!f&&!!t.glyphColors;let i=0,l=0,c=0,u,h,v,b=0,m=0;if(f){let{outlineWidth:_,outlineOffsetX:x,outlineOffsetY:p,outlineBlur:w,outlineOpacity:E}=this;i=this._parsePercent(_)||0,l=Math.max(0,this._parsePercent(w)||0),u=E,b=this._parsePercent(x)||0,m=this._parsePercent(p)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(v=this.strokeColor,s.uTroikaStrokeColor.value.set(v??Wr),h=this.strokeOpacity,h==null&&(h=1)),u=this.fillOpacity;s.uTroikaEdgeOffset.value=i,s.uTroikaPositionOffset.value.set(b,m),s.uTroikaBlurRadius.value=l,s.uTroikaStrokeWidth.value=c,s.uTroikaStrokeOpacity.value=h,s.uTroikaFillOpacity.value=u??1,s.uTroikaCurveRadius.value=this.curveRadius||0;let L=this.clipRect;if(L&&Array.isArray(L)&&L.length===4)s.uTroikaClipRect.value.fromArray(L);else{const _=(this.fontSize||.1)*100;s.uTroikaClipRect.value.set(r[0]-_,r[1]-_,r[2]+_,r[3]+_)}this.geometry.applyClipRect(s.uTroikaClipRect.value)}s.uTroikaSDFDebug.value=!!this.debugSDF,n.polygonOffset=!!this.depthOffset,n.polygonOffsetFactor=n.polygonOffsetUnits=this.depthOffset||0;const e=f?this.outlineColor||0:this.color;if(e==null)delete n.color;else{const a=n.hasOwnProperty("color")?n.color:n.color=new ct;(e!==a._input||typeof e=="object")&&a.set(a._input=e)}let o=this.orientation||Gn;if(o!==n._orientation){let a=s.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let r=o!==Gn&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,i,l,c,u]=r;on.set(0,0,0)[l]=i==="-"?1:-1,Bn.set(0,0,0)[u]=c==="-"?-1:1,Hr.lookAt(zo,on.cross(Bn),Bn),a.setFromMatrix4(Hr)}else a.identity();n._orientation=o}}_parsePercent(n){if(typeof n=="string"){let f=n.match(/^(-?[\d.]+)%$/),s=f?parseFloat(f[1]):NaN;n=(isNaN(s)?0:s/100)*this.fontSize}return n}localPositionToTextCoords(n,f=new We){f.copy(n);const s=this.curveRadius;return s&&(f.x=Math.atan2(n.x,Math.abs(s)-Math.abs(n.z))*Math.abs(s)),f}worldPositionToTextCoords(n,f=new We){return on.copy(n),this.localPositionToTextCoords(this.worldToLocal(on),f)}raycast(n,f){const{textRenderInfo:s,curveRadius:t}=this;if(s){const e=s.blockBounds,o=t?fa():ca(),a=o.geometry,{position:r,uv:i}=a.attributes;for(let l=0;l<i.count;l++){let c=e[0]+i.getX(l)*(e[2]-e[0]);const u=e[1]+i.getY(l)*(e[3]-e[1]);let h=0;t&&(h=t-Math.cos(c/t)*t,c=Math.sin(c/t)*t),r.setXYZ(l,c,u,h)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Pt.length=0,o.raycast(n,Pt);for(let l=0;l<Pt.length;l++)Pt[l].object=this,f.push(Pt[l])}}copy(n){const f=this.geometry;return super.copy(n),this.geometry=f,Vo.forEach(s=>{this[s]=n[s]}),this}clone(){return new this.constructor().copy(this)}};ua.forEach(d=>{const n="_private_"+d;Object.defineProperty(da.prototype,d,{get(){return this[n]},set(f){f!==this[n]&&(this[n]=f,this._needsSync=!0)}})});new Bt;new ct;const ha=be.forwardRef(({sdfGlyphSize:d=64,anchorX:n="center",anchorY:f="middle",font:s,fontSize:t=1,children:e,characters:o,onSync:a,...r},i)=>{const l=Ke(({invalidate:v})=>v),[c]=be.useState(()=>new da),[u,h]=be.useMemo(()=>{const v=[];let b="";return be.Children.forEach(e,m=>{typeof m=="string"||typeof m=="number"?b+=m:v.push(m)}),[v,b]},[e]);return Pa(()=>new Promise(v=>Co({font:s,characters:o},v)),["troika-text",s,o]),be.useLayoutEffect(()=>{c.sync(()=>{l(),a&&a(c)})}),be.useEffect(()=>()=>c.dispose(),[c]),be.createElement("primitive",cn({object:c,ref:i,font:s,text:h,anchorX:n,anchorY:f,fontSize:t,sdfGlyphSize:d},r),u)}),Yo=()=>parseInt(Yr.replace(/\D+/g,"")),Xo=Yo(),Ko=be.forwardRef(({makeDefault:d,camera:n,regress:f,domElement:s,enableDamping:t=!0,keyEvents:e=!1,onChange:o,onStart:a,onEnd:r,...i},l)=>{const c=Ke(E=>E.invalidate),u=Ke(E=>E.camera),h=Ke(E=>E.gl),v=Ke(E=>E.events),b=Ke(E=>E.setEvents),m=Ke(E=>E.set),L=Ke(E=>E.get),_=Ke(E=>E.performance),x=n||u,p=s||v.connected||h.domElement,w=be.useMemo(()=>new Va(x),[x]);return Gt(()=>{w.enabled&&w.update()},-1),be.useEffect(()=>(e&&w.connect(e===!0?p:e),w.connect(p),()=>{w.dispose()}),[e,p,f,w,c]),be.useEffect(()=>{const E=I=>{c(),f&&_.regress(),o&&o(I)},A=I=>{a&&a(I)},k=I=>{r&&r(I)};return w.addEventListener("change",E),w.addEventListener("start",A),w.addEventListener("end",k),()=>{w.removeEventListener("start",A),w.removeEventListener("end",k),w.removeEventListener("change",E)}},[o,a,r,w,c,b]),be.useEffect(()=>{if(d){const E=L().controls;return m({controls:w}),()=>m({controls:E})}},[d,w]),be.createElement("primitive",cn({ref:l,object:w,enableDamping:t},i))});class Zo extends Kr{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${Xo>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const Jo=d=>new Le().setFromSpherical(new jn(d,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Qo=be.forwardRef(({radius:d=100,depth:n=50,count:f=5e3,saturation:s=0,factor:t=4,fade:e=!1,speed:o=1},a)=>{const r=be.useRef(null),[i,l,c]=be.useMemo(()=>{const h=[],v=[],b=Array.from({length:f},()=>(.5+.5*Math.random())*t),m=new ct;let L=d+n;const _=n/f;for(let x=0;x<f;x++)L-=_*Math.random(),h.push(...Jo(L).toArray()),m.setHSL(x/f,s,.9),v.push(m.r,m.g,m.b);return[new Float32Array(h),new Float32Array(v),new Float32Array(b)]},[f,n,t,d,s]);Gt(h=>r.current&&(r.current.uniforms.time.value=h.clock.elapsedTime*o));const[u]=be.useState(()=>new Zo);return be.createElement("points",{ref:a},be.createElement("bufferGeometry",null,be.createElement("bufferAttribute",{attach:"attributes-position",args:[i,3]}),be.createElement("bufferAttribute",{attach:"attributes-color",args:[l,3]}),be.createElement("bufferAttribute",{attach:"attributes-size",args:[c,1]})),be.createElement("primitive",{ref:r,object:u,attach:"material",blending:Oa,"uniforms-fade-value":e,depthWrite:!1,transparent:!0,vertexColors:!0}))}),Xn=2e3,qo={id:"root",name:"Skinny Genes Breeds",year:2026,type:"Invisible",parents:[{id:"chem-91-problem-child",name:"Chem 91 x Problem Child",year:2025,type:"Hybrid",description:"This strain is the result of a long-term breeding project by       Jay Hershfield, aiming to combine the legendary Chem 91 with the robust genetics       of Problem Child. The goal was to create a high-potency strain with a unique       terpene profile and vigorous growth. After several generations of selection,       this stable F2 hybrid was born.",parents:[{id:"chem-91-auto",name:"Chem 91 Auto",year:2024,type:"Hybrid",description:"Chem 91 Auto is an ruderalis / indica / sativa from Night Owl           Seeds and can be cultivated indoors, outdoors and greenhouse (Where the           plants will need a flowering time of 85 days) Night Owl Seeds's Chem 91           Auto is only available as feminized seeds.           Lineage: Chem 91 Clone Only x Chemdogging F3           Generation: F4 Feminized Autoflower           Quantity: 3 Feminized Autoflower Seeds           Height: Up to 3.5 Feet           Yield: 2 - 4 Ounces           Harvest Time: 75 - 85 Days from Sprout",link:"https://seedfinder.eu/en/strain-info/chem-91-auto/night-owl-seeds"},{id:"problem-child",name:"Problem Child",year:2022,type:"Indica",description:"Problem Child is an mostly indica from Jinxproof Genetics           and can be cultivated indoors, outdoors and greenhouse (Where the plants           will need a flowering time of 60 days) Jinxproof Genetics's Problem Child           is/was never available as feminized seeds.",link:"https://seedfinder.eu/en/strain-info/problem-child/jinxproof-genetics"}]},{id:"pulp",name:"Pulp",year:2023,type:"Hybrid",description:`Approximately 60% Indica/40% Sativa. Phenotypes tend to show either       a slight dominance leaning more toward a Sativa direction stemming from the Tangie       and Maui Haze in the Problem Child F2 father, or take an Indica-leaning and more       Narcotic/ heavy-eyed dominant effect from the Cherry Ghostenade mother also       from the nature of everything 9lb Hammer touches. Was intentionally bred to       reduce/eliminate "thought salad". Best of both worlds effects-wise.       Exceptionally potent, and the flavor is off-the-charts delicious. Think Cherry &       Orange fun dip, accompanied by tart Lemon, Lime, candy Grape and deep bold       Blackberries. This strain is aptly named... It smells and tastes like PULP! One       of the least demanding plants I have ever grown by a clear mile gets that from       the parent genetics. Typically finishes in 56-63 days, including the more       sativa-dominant phenotypes which don't need to go much further than the 63 day       mark, even after stress or shock.`,link:"https://skinnygenes.com/strain/pulp-skinny-genes/",parents:[{id:"cherry-ghostenade",name:"Cherry Ghostenade",year:2020,type:"Indica",description:"Cherry Ghostenade is an mostly indica from Clone Only Strains           and can be cultivated indoors and outdoors Clone Only Strains's Cherry           Ghostenade is/was clone only available as feminized seeds.",link:"https://seedfinder.eu/en/strain-info/cherry-ghostenade/clone-only-strains"},{id:"problem-child",name:"Problem Child",year:2022,type:"Indica"}]},{id:"skunk-hammer",name:"Skunk Hammer",year:2019,type:"Indica",description:"Skunk Hammer is an mostly indica from Strainger Seeds and can be       cultivated indoors (Where the plants will need a flowering time of 63 days)       Strainger Seeds's Skunk Hammer is/was never available as feminized seeds. 9lb       Hammer x Big Buddha Blue Cheese Super heavy onset, some haziness, heavy       sedative/narcotic high in both mind and body. Some giggles, followed by a       catatonic couch lock high that will ease patients to sleep, regardless of       tolerance. Bred for pain, insomnia, and reducing 'thought salad'.",link:"https://seedfinder.eu/en/strain-info/skunk-hammer/strainger-seeds",parents:[{id:"9lb-hammer",name:"9lb Hammer",year:2014,type:"Indica",description:"9lb Hammer is an mostly indica from Jinxproof Genetics and can be cultivated indoors and outdoors (Where the plants will need a flowering time of 55 days) Jinxproof Genetics's 9lb Hammer is/was never available as feminized seeds.           This strain was distributed from TGA genetics until 2019.           Parents: Gooberry Afgooey x Blackberry & Jesus OG Kush           Havest: 50-60 days           Yield: Heavy",link:"https://seedfinder.eu/en/strain-info/9lb-hammer/jinxproof-genetics"},{id:"blue-cheese",name:"Blue Cheese",year:2006,type:"Hybrid",description:"Blue Cheese is an indica / sativa from Big Buddha Seeds and can be cultivated indoors and outdoors (Where the plants will need a flowering time of 63 days) Big Buddha Seeds's Blue Cheese also available as feminized seeds. Genetics: (Skunk No. 1 (Cheese) x Afghani) x Blueberry           Type: f1 Hybrid           Harvest Date: October/November           Flowering Period: 8-10 Weeks           THC Content: Unknown           No. of Seeds Per Packet: 10           Characteristics: A Sweet, Fruity, Berry scent, with musky undertone of the original cheese.",link:"https://seedfinder.eu/en/strain-info/blue-cheese/big-buddha-seeds"}]}]},pa=(d,n,f,s,t,e,o)=>{if(!e.has(d.id)){const i=(d.year-Xn)*.5,l=f+s/2,c=n*1.5,u=Math.cos(l)*c,h=Math.sin(l)*c,v=new Le(i,u,h);e.set(d.id,{...d,position:v})}if(t&&d.type!=="Invisible"&&t!=="root"&&o.push({parentId:t,childId:d.id}),d.parents&&d.parents.length>0){const i=s/d.parents.length;d.parents.forEach((l,c)=>{pa(l,n+1,f+i*c,i,d.id,e,o)})}},$o=d=>{const n=new Map,f=[];return pa(d,0,0,Math.PI*2,void 0,n,f),{uniqueRenderNodes:Array.from(n.values()),connections:f,nodesMap:n}},ei=({targetNode:d})=>{const{camera:n,controls:f}=Ke();return new Le,Gt((s,t)=>{if(d){const{x:e,y:o,z:a}=d.position,r=new Le(0,5,10),i=new Le(e,o,a),l=i.clone().add(r);s.camera.position.lerp(l,4*t);const c=f;c&&(c.target.lerp(i,4*t),c.update())}}),null},ti=({node:d,searchQuery:n,isFocused:f,onSelect:s,isHighlighted:t})=>{const[e,o]=be.useState(!1),a=be.useRef(null),{gl:r}=Ke(),i=n===""||d.name.toLowerCase().includes(n.toLowerCase()),l=!i;Gt(_=>{if(a.current)if(a.current.rotation.y+=.01,f){const x=1.5+Math.sin(_.clock.elapsedTime*8)*.2;a.current.scale.setScalar(x)}else if(t){const x=1.2+Math.sin(_.clock.elapsedTime*4)*.1;a.current.scale.setScalar(x)}else if(i&&n!==""){const x=1+Math.sin(_.clock.elapsedTime*4)*.1;a.current.scale.setScalar(x)}else e?a.current.scale.setScalar(1.3):a.current.scale.setScalar(1)});const u=(_=>{switch(_){case"Indica":return"purple";case"Sativa":return"orange";case"Hybrid":return"green";default:return"gray"}})(d.type),h=t?"#fff":u,v=t?new ct("#fff"):new ct(u),b=t?1.5:e?.6:.2,m=l&&!t?.1:1,L=!e&&!f&&!t;return ge.jsxs("group",{position:d.position,children:[ge.jsxs("mesh",{ref:a,onClick:_=>{_.stopPropagation(),s(d)},onPointerOver:_=>{_.stopPropagation(),o(!0),r.domElement.style.cursor="pointer"},onPointerOut:()=>{o(!1),r.domElement.style.cursor="default"},children:[ge.jsx("icosahedronGeometry",{args:[.4,1]}),ge.jsx("meshStandardMaterial",{color:h,emissive:v,emissiveIntensity:b,transparent:!0,opacity:m,wireframe:L})]}),ge.jsx(ha,{position:[0,.7,0],fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",fillOpacity:l&&!t?.1:1,children:d.name})]})},ni=()=>{const d=[];for(let t=Xn;t<=2020;t+=10){const e=(t-Xn)*.5;d.push(ge.jsxs("group",{position:[e,0,0],children:[ge.jsxs("mesh",{rotation:[0,Math.PI/2,Math.PI/2],children:[ge.jsx("ringGeometry",{args:[5,5.05,32]}),ge.jsx("meshBasicMaterial",{color:"white",opacity:.05,transparent:!0,side:Jr})]}),ge.jsx(ha,{position:[0,5.5,0],fontSize:.5,color:"#666",anchorX:"center",anchorY:"bottom",children:t})]},t))}return ge.jsx("group",{children:d})},ri=({rotationDirection:d,setRotationDirection:n,autoRotateActive:f,rotationSpeed:s=.005})=>{const{controls:t}=Ke(),e=t;return Gt(()=>{if(f&&e){const o=e.getAzimuthalAngle(),a=e.minAzimuthAngle,r=e.maxAzimuthAngle;o<=a+.01&&d===-1?n(1):o>=r-.01&&d===1&&n(-1),e.setAzimuthalAngle(o+d*s),e.update()}}),null};function ui(){const{uniqueRenderNodes:d,connections:n,nodesMap:f}=be.useMemo(()=>$o(qo),[]),[s,t]=be.useState(""),[e,o]=be.useState(!1),[a,r]=be.useState(-1),[i,l]=be.useState(null),[c,u]=be.useState(new Set),[h,v]=be.useState(1),b=window.innerHeight-76,m=be.useMemo(()=>[...d].filter(p=>p.type!=="Invisible").sort((p,w)=>p.year!==w.year?p.year-w.year:p.name.localeCompare(w.name)),[d]);be.useEffect(()=>{const p=w=>{w.key==="Escape"?(t(""),r(-1),l(null),u(new Set),o(!1)):w.key==="ArrowLeft"||w.key==="ArrowDown"?(o(!1),r(E=>E===-1?m.length-1:(E-1+m.length)%m.length)):(w.key==="ArrowRight"||w.key==="ArrowUp")&&(o(!1),r(E=>E===-1?0:(E+1)%m.length))};return window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}},[e,s,m,o,r,l,t]),be.useEffect(()=>{if(a!==-1&&m[a]){const p=m[a];l(p),t(p.name)}else l(null),t("")},[a,m]),be.useEffect(()=>{i&&_(i)},[i,f]);const L=be.useMemo(()=>s?d.filter(p=>p.name.toLowerCase().includes(s.toLowerCase())):[],[s,d]),_=p=>{o(!1),t(p.name);const w=m.findIndex(I=>I.id===p.id);r(w),l(p);const E=(I,T,K=new Set)=>{const S=T.get(I);if(!S)return K;if(S.parents&&S.parents.length>0)for(const F of S.parents)K.has(F.id)||(K.add(F.id),E(F.id,T,K));return K},A=E(p.id,f),k=new Set(A);k.add(p.id),u(k)},x=()=>{l(null),t(""),o(!1),r(-1),u(new Set)};return ge.jsxs("div",{className:"explorer-container",style:{height:b},children:[ge.jsxs("div",{className:"info-panel",children:[ge.jsx("div",{className:"search-container",children:ge.jsxs("div",{className:"chatgpt-input-wrapper",children:[ge.jsx("input",{name:"search",type:"text",placeholder:"Search strains...",value:s,onChange:p=>{const w=p.target.value;t(w),o(w!==""),r(-1),w===""&&l(null)},className:"search-input",style:{width:"100%",padding:"10px 15px",borderRadius:"20px",border:"1px solid #333",background:"rgba(255,255,255,0.1)",color:"white",fontSize:"14px",outline:"none",backdropFilter:"blur(5px)"}}),s&&ge.jsx(Ia,{className:"clear-search-icon",onClick:x,style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer"}})]})}),L.length>0&&s!==i?.name&&ge.jsx("div",{className:"search-results",children:L.map(p=>ge.jsxs("div",{onClick:w=>{w.stopPropagation(),_(p)},style:{padding:"8px 15px",cursor:"pointer",borderBottom:"1px solid #222",fontSize:"0.9rem",display:"flex",justifyContent:"space-between"},onMouseEnter:w=>w.currentTarget.style.background="#222",onMouseLeave:w=>w.currentTarget.style.background="transparent",children:[ge.jsx("span",{children:p.name}),ge.jsx("span",{children:p.year})]},p.id))}),ge.jsxs("div",{className:"legend",children:[ge.jsx($t,{color:"orange",variant:"light",style:{opacity:i&&i.type!=="Sativa"?.3:1},children:"Sativa"}),ge.jsx($t,{color:"purple",variant:"light",style:{opacity:i&&i.type!=="Indica"?.3:1},children:"Indica"}),ge.jsx($t,{color:"green",variant:"light",style:{opacity:i&&i.type!=="Hybrid"?.3:1},children:"Hybrid"}),ge.jsx($t,{color:"gray",variant:"light",style:{opacity:i&&i.type!=="Ruderalis"?.3:1},children:"Ruderalis"})]}),i?ge.jsxs("div",{children:[ge.jsx("h3",{children:i.name}),i.description&&ge.jsx("p",{style:{maxHeight:"150px",overflowY:"auto",paddingRight:"10px"},children:i.description}),i.link&&ge.jsx("a",{href:i.link,target:"_blank",rel:"noopener noreferrer",children:"View strain details on seedfinder.eu"})]}):ge.jsxs(ge.Fragment,{children:[ge.jsx("h3",{children:"Cann-thology"}),ge.jsx("p",{children:"Explore the rich history and lineage of cannabis strains with our interactive 3D Cann-thology."})]})]}),ge.jsxs(Ra,{camera:{position:[7.5,7.5,15],fov:45},onPointerMissed:x,children:[ge.jsx("color",{attach:"background",args:["#050505"]}),ge.jsx(ei,{targetNode:i}),ge.jsx(ri,{rotationDirection:h,setRotationDirection:v,autoRotateActive:!i&&s===""}),ge.jsx("ambientLight",{intensity:.4}),ge.jsx("pointLight",{position:[10,10,10],intensity:1}),ge.jsx("spotLight",{position:[0,50,0],angle:.5,penumbra:1,intensity:2}),ge.jsx(Qo,{radius:100,depth:50,count:3e3,factor:4,saturation:0,fade:!0}),ge.jsx(ni,{}),ge.jsxs("group",{children:[ge.jsxs("mesh",{position:[15,0,0],rotation:[0,0,Math.PI/2],children:[ge.jsx("cylinderGeometry",{args:[.02,.02,30,8]}),ge.jsx("meshBasicMaterial",{color:"#222",transparent:!0,opacity:.5})]}),d.map(p=>p.type!=="Invisible"&&ge.jsx(ti,{node:p,searchQuery:s,isFocused:i?.id===p.id,onSelect:_,isHighlighted:c.has(p.id)},p.id)),n.map((p,w)=>{const E=f.get(p.parentId),A=f.get(p.childId);if(E&&A){const k=c.has(p.parentId),I=c.has(p.childId),T=k&&I,K=s!==""&&!E.name.toLowerCase().includes(s.toLowerCase()),S=s!==""&&!A.name.toLowerCase().includes(s.toLowerCase()),F=K||S,D=T?"white":F?"#444":"white",Y=T?2:F?.5:1,H=T?1:F?.1:.3;return ge.jsx(Za,{points:[E.position,A.position],color:D,lineWidth:Y,opacity:H,transparent:!0},w)}return null})]}),ge.jsx(Ko,{makeDefault:!0,enablePan:!0,enableZoom:!0,minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minAzimuthAngle:-Math.PI/4,maxAzimuthAngle:Math.PI/4,minDistance:2,maxDistance:25,target:[7.5,0,0]})]})]})}export{ui as default};
